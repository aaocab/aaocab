var BookNow=function(){this.model={step:0,bookingType:1};this.data={};this.isMobile=function(){return this.Android()||this.BlackBerry()||this.iOS()||this.Opera()||this.Windows()};this.Android=function(){return navigator.userAgent.match(/Android/i)};this.BlackBerry=function(){return navigator.userAgent.match(/BlackBerry/i)};this.iOS=function(){return navigator.userAgent.match(/iPhone|iPad|iPod/i)};this.Opera=function(){return navigator.userAgent.match(/Opera Mini/i)};this.Windows=function(){return navigator.userAgent.match(/IEMobile/i)};
this.arrSteps="TripType Route Quote Details Info Summary".split(" ");this.arrTripTypes=";One Way Trip;Round Trip/Multi City;Round Trip/Multi City;Airport Transfer;Package;Flexxi;Shuttle Trip;Custom Trip;Day Rental;Day Rental;Day Rental".split(";");this.errorColor="#a94442";this.noError="1px solid #ccc";this.init=function(){};this.hideTab=function(){};this.showTab=function(a){$('ul.nav-tabs li.ltab a[href="#menu'+a+'"]').trigger("click",["inflow"])};this.goToPrevTab=function(a){var b=this.arrSteps[parseInt(a)+
1];a=this.arrSteps[a];$("#menu"+b).hide();$("#menu"+a).show()};this.jumpToStep=function(a){this.arrSteps.forEach(function(a,c){$("#menu"+a).hide()});a=this.arrSteps[parseInt(a)];$("#menu"+a).show()};this.changeTripType=function(a){var b=this,c=$(a).closest("form");this.model.step=$(c).find('input[name="step"]').val();this.model.bookingType=$(a).val();5==this.model.bookingType?window.location="/packages":$.ajax({type:"POST",dataType:"html",url:$baseUrl+"/booking/pickup",data:$(c).serialize(),success:function(d){$("#menuRoute").html("");
$("#menuRoute").html(d);document.getElementById("bookingtime-form").reset();d=parseInt(b.model.step)+1;d=b.arrSteps[d];b.isMobile()||($(".clickable").removeClass("active"),$(a).parent().addClass("active"),$("#l1").find("span").html(b.arrTripTypes[b.model.bookingType]));b.showTab(d);b.enableTab("Route");$(c)[0].reset();$("#topRouteDesc").length&&$("#topRouteDesc").html(b.arrTripTypes[b.model.bookingType])},error:function(a){console.log(a)}})};this.populateSource=function(a,b,c=""){$loadCityId=b;$bkType=
c;a.load(function(a){var c=this;null==$sourceList&&9!=$bkType&&10!=$bkType&&11!=$bkType?xhr=$.ajax({url:$baseUrl+"/lookup/citylist1",dataType:"json",data:{city:b},success:function(b){$sourceList=b;c.enable();a($sourceList);c.setValue($loadCityId)},error:function(){a()}}):9==$bkType||10==$bkType||11==$bkType?xhr=$.ajax({url:$baseUrl+"/lookup/dayrentalcitylist",dataType:"json",data:{city:b},success:function(b){$sourceList=b;c.enable();a($sourceList);c.setValue($loadCityId)},error:function(){a()}}):
(c.enable(),a($sourceList),c.setValue($loadCityId))})};this.loadSource=function(a,b){$.ajax({url:$baseUrl+"/lookup/citylist1/?q="+encodeURIComponent(a),type:"GET",dataType:"json",error:function(){b()},success:function(a){b(a)}})};this.changeDestination=function(a,b,c){$loadCityId=c;a.length&&(b.disable(),b.clearOptions(),b.load(function(c){xhr=$.ajax({url:$baseUrl+"/lookup/nearestcitylist/source/"+a,dataType:"json",success:function(a){b.enable();c(a);b.setValue($loadCityId)},error:function(){c()}})}))};
this.addMoreRoute=function(){var a=this,b=$("SELECT.ctyDrop"),c=b.length;count=c;var d=$(b[c-1]).val();b=$($("SELECT.ctyPickup")[c-1]).val();1<c&&(b=$($("SELECT.ctyDrop")[c-2]).val());var e=$($("INPUT.datePickup")[c-1]).val();c=$($("INPUT.timePickup")[c-1]).val();messages={};""==e&&(messages.BookingRoute_brt_pickup_date_date=[],messages.BookingRoute_brt_pickup_date_date.push("Please enter pickup date"));""==b&&(messages.BookingRoute_brt_from_city_id=[],messages.BookingRoute_brt_from_city_id.push("Please select source city"));
""==d&&(messages.BookingRoute_brt_to_city_id=[],messages.BookingRoute_brt_to_city_id.push("Please select your destination"));if("{}"!=JSON.stringify(messages)){c=messages;b="";if(a.isMobile()||900>screen.width){for(k in c)b+=c[k]+"<br/>";a.showErrorMsg(b)}else{for(k in c)b+=c[k]+"\n";alert(b)}return!1}$.ajax({type:"POST",dataType:"html",url:$baseUrl+"/booking/addroute",data:{scity:d,pscity:b,pdate:e,ptime:c,index:count,btype:3,YII_CSRF_TOKEN:bkCSRFToken},async:!0,success:function(b){$("#fieldBefore").show();
$("SELECT.ctyPickup").attr("readonly",!0);$("SELECT.ctyDrop").attr("readonly",!0);$("INPUT.datePickup").attr("readonly",!0);$("INPUT.timePickup").attr("readonly",!0);a.isMobile()||$("INPUT.datePickup").datepicker("remove");$("INPUT.timePickup").next("span").hide();$("#insertBefore").before(b);$("SELECT.ctyPickup").attr("readonly",!0);a.disableRows();a.changeDestination(d,$dest_city,null)}})};this.addRoute=function(a){let b=this;$.ajax({type:"POST",dataType:"html",url:"/booking/Addmoreroute",data:a.serialize(),
beforeSend:function(){ajaxindicatorstart("")},complete:function(){ajaxindicatorstop()},success:function(c){var d="",e=!1;try{d=JSON.parse(c),e=!0}catch(h){}if(e){var f=d.errors;settings=a.data("settings");$.each(settings.attributes,function(b){$.fn.yiiactiveform.updateInput(settings.attributes[b],f,a)});$.fn.yiiactiveform.updateSummary(a,f);messages=f;content="";c=[];for(var g in settings.attributes)settings.attributes[g].summary&&c.push(settings.attributes[g].id);b.displayError(a,messages)}else b.clearError(a),
$("#fieldBefore").show(),$("SELECT.ctyPickup").attr("readonly",!0),$("SELECT.ctyDrop").attr("readonly",!0),$("INPUT.datePickup").attr("readonly",!0),$("INPUT.timePickup").attr("readonly",!0),b.isMobile()||$("INPUT.datePickup").datepicker("remove"),$("INPUT.timePickup").next("span").hide(),$(".estarvtime").removeClass("hide"),$(".estarvtime").show(),$("#insertBefore").before(c),$("SELECT.ctyPickup").attr("readonly",!0),b.disableRows()},error:function(a,b,e){alert(e);alert(a.status)}})};this.disableRows=
function(){var a=$("SELECT.ctyDrop").length;if(1<a){$("SELECT.ctyPickup")[0].selectize.lock();for(var b=0;b<a-1;b++)this.disableRow(b);$("#fieldBefore").show()}};this.disableRow=function(a){$("SELECT.ctyDrop")[a].selectize.lock();$($("INPUT.datePickup")[a]).attr("readonly",!0);$($("INPUT.timePickup")[a]).attr("readonly",!0);this.isMobile()||$($("INPUT.datePickup")[a]).datepicker("remove");$($("INPUT.timePickup")[a]).next("span").hide()};this.removeRoute=function(){var a=$("SELECT.ctyDrop").length;
$($(".clsRoute")[a-1]).remove();this.enableRows()};this.disableTab=function(a){$(".nav-tabs .l"+a).addClass("disabled")};this.enableTab=function(a){$(".nav-tabs .l"+a).removeClass("disabled")};this.disableTabs=function(a){switch(a){case "Route":this.disableTab("Route");case "Quote":this.disableTab("Quote");case "Info":this.disableTab("Info");case "Summary":this.disableTab("Summary")}};this.enableTabs=function(a){switch(a){case "Summary":this.enableTab("Info");case "Info":this.enableTab("Quote");case "Quote":this.enableTab("Route");
case "Route":this.enableTab("TripType")}};this.booknowReady=function(){0==$("#book_Step").val()&&(this.disableTab("Route"),$("#book_Step").val("1"));this.disableTab("Quote");this.disableTab("Info");this.disableTab("Summary")};this.checkTabs=function(){$(".utab").bind("click",function(a,b){if(void 0===b&&-1!=$(this).attr("class").indexOf("disabled"))return a.preventDefault(),!1})};this.enableRow=function(a){$("SELECT.ctyDrop")[a].selectize.unlock();$($("INPUT.datePickup")[a]).attr("readonly",!1);$($("INPUT.timePickup")[a]).attr("readonly",
!1);$($("INPUT.datePickup")[a]).datepicker({autoclose:!0,startDate:$($("INPUT.datePickup")[a]).attr("min"),format:"dd/mm/yyyy",language:"en"});$($("INPUT.timePickup")[a]).next("span").show()};this.enableRows=function(){var a=$("SELECT.ctyDrop").length;if(1<a)this.enableRow(a-1),$("SELECT.ctyPickup")[a-1].selectize.lock();else return $("SELECT.ctyPickup")[a-1].selectize.unlock(),$("SELECT.ctyDrop")[a-1].selectize.unlock(),$("INPUT.datePickup").attr("readonly",!1),$("INPUT.timePickup").attr("readonly",
!1),$("INPUT.timePickup").next("span").show(),a=new Date($("INPUT.datePickup").attr("min")),$("INPUT.datePickup").datepicker({autoclose:!0,startDate:a,format:"dd/mm/yyyy",language:"en"}),$("#fieldBefore").hide(),!1};this.bkRouteReady=function(){var a=this;trackPage("/booking/pickup");$("#fieldBefore").click(function(){var b=$("SELECT.ctyDrop").length;$($(".clsRoute")[b-1]).remove();a.enableRows()})};this.populateDatarut=function(a,b){$scity=$($("INPUT.ctyPickup")[b-1]).val();$tcity=$($("INPUT.ctyDrop")[b-
1]);$tcity.select2("val","").trigger("change");""!==$scity&&$.ajax({type:"GET",dataType:"json",url:a,data:{source:$scity},async:!1,success:function(a){$data2=a;a=$tcity.attr("placeholder");$tcity.select2({data:$data2,placeholder:a,formatNoMatches:function(a){return"Can't find the Destination?<br>Let us help you.<br><i>Call now</i> (+91) 90518-77-000"}})}})};this.resetTransferSelects=function(a){$($("INPUT.ctyPickup")[a-1]).select2("val","").trigger("change");$($("INPUT.ctyDrop")[a-1]).select2("val",
"").trigger("change");$($("INPUT.ctyPickup")[a-1]).val("").change();$($("INPUT.ctyDrop")[a-1]).val("").change();$($("INPUT.ctyPickup")[a-1]).select2({data:[],formatNoMatches:function(a){return"Please, first choose your destination airport.<br><i>If you need any help, please call now</i> (+91) 90518-77-000"}},null,!1);$($("INPUT.ctyDrop")[a-1]).select2({data:[],formatNoMatches:function(a){return"Please, first choose your pickup airport.<br><i>If you need any help, please call now</i> (+91) 90518-77-000"}},
null,!1)};this.transferOpt1=function(){var a=this,b=this.data.count,c=$($("INPUT.ctyPickup")[b-1]).val(),d=$($("INPUT.ctyDrop")[b-1]).val();0<c?setTimeout(function(){a.resetTransferSelects(b);a.populateDataTrP();setTimeout(function(){$($("INPUT.ctyPickup")[b-1]).val(c).trigger("change");0<d&&$($("INPUT.ctyDrop")[b-1]).val(d).trigger("change")},400)},400):setTimeout(function(){a.resetTransferSelects(b);a.populateDataTrP();$("#dlabel11").text("Pickup Airport")},300)};this.transferOpt2=function(){var a=
this,b=this.data,c=b.count;if(""!=$($("INPUT.ctyDrop")[c-1]).val()||""!=b.toCityId){var d=b.toCityId,e=$($("INPUT.ctyPickup")[c-1]).val();a.changeLabelText("2");setTimeout(function(){a.resetTransferSelects(c);a.populateDataTrD();setTimeout(function(){$($("INPUT.ctyDrop")[c-1]).val(d).trigger("change");""!=e&&$($("INPUT.ctyPickup")[c-1]).val(e).trigger("change")},400)},400)}else setTimeout(function(){a.resetTransferSelects(c);a.populateDataTrD()},300)};this.populateDataTrP=function(){var a=this,b=
this.data.count;$scity=$($("INPUT.ctyPickup")[b-1]);$tcity=$($("INPUT.ctyDrop")[b-1]);$.ajax({type:"GET",dataType:"json",url:$baseUrl+"/index/getairportcities",success:function(b){$data2=b;b=$scity.attr("placeholder");$scity.select2({data:$data2,placeholder:b,formatNoMatches:function(a){return"Can't find the source?<br>Let us help you.<br><i>Call now</i> (+91) 90518-77-000"}}).on("change",function(b){a.populateDataTrOthersF()})}})};this.populateDataTrD=function(){var a=this,b=this.data.count;$scity=
$($("INPUT.ctyPickup")[b-1]);$tcity=$($("INPUT.ctyDrop")[b-1]);$.ajax({type:"GET",dataType:"json",url:$baseUrl+"/index/getairportcities",success:function(b){$data2=b;b=$tcity.attr("placeholder");$tcity.select2({data:$data2,placeholder:b,formatNoMatches:function(a){return"Can't find the Destination?<br>Let us help you.<br><i>Call now</i> (+91) 90518-77-000"}}).on("change",function(b){a.populateDataTrOthersT()})}})};this.populateDataTrOthersF=function(){var a=this.data,b=a.count,c=$($("INPUT.ctyPickup")[b-
1]).val(),d=$(a.fromCityId),e=$($("INPUT.ctyDrop")[b-1]);(0<c||0<d)&&$("#"+a.transferTypeOne).is(":checked")&&$.ajax({type:"GET",dataType:"json",url:$baseUrl+"/index/getairportnearest",data:{source:0<c?c:d},async:!1,success:function(a){$data2=a;a=e.attr("placeholder");e.select2({data:$data2,placeholder:a,formatNoMatches:function(a){return"Can't find the Destination?<br>Let us help you.<br><i>Call now</i> (+91) 90518-77-000"}})}})};this.populateDataTrOthersT=function(){var a=this.data,b=a.count,c=
$("INPUT.ctyPickup");b=$($("INPUT.ctyDrop")[b-1]).val();var d=$(a.toCityId);(0<d||0<b)&&$("#"+a.transferTypeTwo).is(":checked")&&$.ajax({type:"GET",dataType:"json",url:$baseUrl+"/index/getairportnearest",data:{source:0<b?b:d},async:!1,success:function(a){$data2=a;a=c.attr("placeholder");c.select2({data:$data2,placeholder:a,formatNoMatches:function(a){return"Can't find the Destination?<br>Let us help you.<br><i>Call now</i> (+91) 90518-77-000"}})}})};this.bkRouteNext=function(){var a=this,b=this.data;
4!=b.bookingType&&$($("INPUT.ctyPickup")[b.count-1]).change(function(){a.populateDatarut()})};this.bkQuoteReady=function(a,b){$('[data-toggle="popover"]').popover();$(".clsBkgID").val(a);$(".clsHash").val(b);trackPage("/booking/rates")};this.validateQuote=function(a){var b=this.data,c=$("#diff").val(),d=void 0!=$(a).attr("value")?$(a).attr("value"):$(a).data("value"),e=$(a).attr("kmr"),f=$(a).attr("booktype"),g=$(a).attr("capacity");this.isMobile()&&(d=void 0!=a.value?a.value:$(a).data("value"),e=
a.kmr,f=a.booktype,g=a.capacity);if("flexxi"==f&&8>c)return alert("Departure time should be at least 8 hours hence for Flexxi shared booking"),!1;0<d&&($("#"+b.extraRate).val(e),"flexxi"==f?($("#"+b.vehicleTypeId).val(11),trackPage(b.flexiUrl),boxFlexxi=bootbox.dialog({message:$("#flexxi_rates_"+d).html()+"<br><div class='panel'><div class='panel panel-body'><div class='col-xs-12'><label align='left'>You will Use :</label><div class='row'><div class='col-xs-12'>\n\t\t\t\t\t\t\t\t\t<div class='row'>\n\t\t\t\t\t\t\t\t\t<div class='col-xs-3'><label>No. of seats</label><br><input class='form-control' min=1 id='noofseats' type='number' placeholder='No.of seats' max='"+
g+"' required></div>\n\t\t\t\t\t\t\t\t\t<div class='col-xs-4'><label></label><br><br><b>Allowed only <span id='bagunit'>0</span> Bag Units</b></div>\n\t\t\t\t\t\t\t\t\t<div class='col-xs-5'>\n\t\t\t\t\t\t\t\t\t<table>\n\t\t\t\t\t\t\t\t\t<tr><th style='padding:8px; border: 1px solid black; font-size: 13px'>Type of Bag</th>\n\t\t\t\t\t\t\t\t\t<th style='padding:8px; border: 1px solid black; font-size: 13px'>Bag Units</th></tr>\n\t\t\t\t\t\t\t\t\t<tr><td style='padding:8px; border: 1px solid black; font-size: 13px'>1 Backpack</td>\n\t\t\t\t\t\t\t\t\t<td style='padding:8px; border: 1px solid black; font-size: 13px'>1 Bag Unit</td></tr>\n\t\t\t\t\t\t\t\t\t<tr><td style='padding:8px; border: 1px solid black; font-size: 13px'>1 Small Bag</td>\n\t\t\t\t\t\t\t\t\t<td style='padding:8px; border: 1px solid black; font-size: 13px'>2 Bag Units</td></tr>\n\t\t\t\t\t\t\t\t\t<tr><td style='padding:8px; border: 1px solid black; font-size: 13px'>1 Big Bags</td>\n\t\t\t\t\t\t\t\t\t<td style='padding:8px; border: 1px solid black; font-size: 13px'>4 Bag Units</td></tr>\n\t\t\t\t\t\t\t\t\t</table>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<div class='col-xs-12 text-center mt20'><button value='"+
d+"'  class='btn btn-info' onclick='flexiShare_promo(this)'>Submit</button></div></div></div></div></div>",title:"Rate Charts:",size:"large",onEscape:function(){boxFlexxi.modal("hide")}}),$("#noofseats").bind("keyup click change",function(a){a=$("#noofseats").val();0==a||""==a?$("#bagunit").text(0):1==a?$("#bagunit").text(3):2==a?$("#bagunit").text(5):$("#bagunit").text(6)})):this.sendQuoteToInfo(a))};this.sendQuoteToInfo=function(a){var b=void 0!=$(a).attr("value")?$(a).attr("value"):$(a).data("value"),
c=$(a).attr("kms"),d=$(a).attr("kmr"),e=$(a).attr("duration");this.isMobile()&&(b=void 0!=a.value?a.value:$(a).data("value"),c=a.kms,d=a.kmr,e=a.duration);var f=this;a=this.data;$("#"+a.vehicleTypeId).val(b);$("#"+a.bkgTripDistance).val(c);$("#"+a.bkgTripDuration).val(e);$("#"+a.extraRate).val(d);b=$("#cabrate-form1").serialize();$.ajax({type:"POST",url:$baseUrl+"/booking/info",data:b,beforeSend:function(){ajaxindicatorstart("")},complete:function(){ajaxindicatorstop()},success:function(a){f.enableTab("Quote");
$("#menuInfo").html(a);f.showTab("Info");f.enableTab("Info");$("body").removeClass("modal-open");f.isMobile()||900>screen.width?($("html,body").animate({scrollTop:0},"slow"),$("#menuDetails").hide()):($("#menuQuote").removeClass("active"),$("#menuQuote").addClass("fade"));trackPage("/booking/info")},error:function(a){alert("Error occured.please try again");alert(a)},dataType:"html"})};this.searchFlexi=function(a){jQuery.ajax({type:"GET",url:$baseUrl+"/booking/Flexisearch?bkg_id="+a,success:function(a){box=
bootbox.dialog({message:a,title:"",size:"large",onEscape:function(){box.modal("hide")}})}})};this.bkInfoReady=function(){var a=this,b=this.data;callbackLogin="fillUserform";setTimeout(function(){$("."+b.hyperlocationClass).attr("autocomplete","disabled")},500);$("#"+b.infoSource).change(function(){var c=$("#"+b.infoSource).val();a.extraAdditionalInfo(c)});4==b.bookingType&&($("#chkAirport").hide(),$("#picklabeloth").hide(),$("#flightlabeldivoth").hide(),$("#othreq").show(),$("#flightlabeldivairport").show());
"91"!=$("#BookingTemp_bkg_country_code").val()&&1==b.bookingType&&$("#"+b.sendSms).prop("checked",!1)};this.bkInfoNext=function(){var a=this,b=this.data;$('.nav-tabs a[href="#menu3"] span').html("BY"+b.carType);a.checkInfo(b);11!=b.vehicleType&&$("#nxtBtnAddDtls").click(function(){$("#error_div_info").html("");$("#error_div_info").hide();$("#BookingTemp_bkg_user_email2").next("div").html("");$("#BookingTemp_bkg_user_email2").next("div").hide();var c=$("#BookingTemp_bkg_user_email2").val(),d=0;d=$.trim($("#fullContactNumber1").val());
if(a.isMobile()||900>screen.width)var e=$("#"+b.pickupLaterChk).data("key"),f=$("#"+b.dropLaterChk).data("key");else e=$("#"+b.pickupLaterChk).parent().parent().parent().data("key"),f=$("#"+b.dropLaterChk).parent().parent().parent().data("key");e=a.validateLocation(b,e,f);f=a.validateName();d=a.validateContact(d,/^[0-9\s]*$/);c=a.validateContactEmail(c);var g=0;$.each($('input[name="skipAdd"]'),function(b,c){0==$(c).is(":checked")&&(b=$(c).data("key"),0==$(".brt_location_"+b).val().trim().length||
""==$(".locLat_"+b).val()||""==$(".locLon_"+b).val())&&($(".brt_location_"+b).css("border-color",a.errorColor),$("#skipAddErr"+b).removeClass("hide"),g+=1)});d=e+f+d+c+g;if(1==$("#islogin").val()){var h=0;(new Promise(function(b,c){h=a.checkIfLoggedIn()})).then()}if(1<=d||1==h)return!1;c=$("#customerinfo").serialize();$.ajax({type:"POST",url:$baseUrl+"/booking/summary1",data:c,beforeSend:function(){ajaxindicatorstart("")},complete:function(){ajaxindicatorstop()},success:function(b){a.successInfo(b)},
error:function(a){alert("Error occured.please try again");alert(a)},dataType:"html"})});$("#"+b.countryCode).change(function(){"91"!=$("#"+b.countryCode).val()&&1==b.bookingType?$("#"+b.sendSms).prop("checked",!1):$("#"+b.sendSms).prop("checked",!0)})};this.extraAdditionalInfo=function(a){var b=this.data;$("#source_desc_show").addClass("hide");"Friend"==a?($("#source_desc_show").removeClass("hide"),$("#agent_show").addClass("hide"),$("#"+b.infoSourceDesc).attr("placeholder","Friend's email please")):
"Other"==a&&($("#source_desc_show").removeClass("hide"),$("#agent_show").addClass("hide"),$("#"+b.infoSourceDesc).attr("placeholder",""))};this.findPickupAirport=function(){var a=this.data;jQuery.ajax({type:"GET",url:$baseUrl+"/booking/pickupcityairport",data:{fromCity:a.fromCity,maxDistance:500,forAirport:!1,queryStr:a.queryStr,limit:"LIMIT 0, 1"},success:function(b){b=b.split(",");$("#"+a.key).val(b[0]).change()}})};this.showCityCenterPara=function(){0<checkActivated?$("#cityCentreText").show():
$("#cityCentreText").hide()};this.validateEmail=function(a){return/^([A-Za-z0-9_\-\.])+@([A-Za-z0-9_\-\.])+\.([A-Za-z]{2,4})$/.test(a)};this.clearError=function(a){settings=a.data("settings");$("#"+settings.summaryID).toggle(!1)};this.displayError=function(a,b){settings=a.data("settings");content="";let c=[];for(var d in b)"string"===$.type(b[d])?content=content+"<li>"+b[d]+"</li>":$.each(b[d],function(a,f){"array"===$.type(f)?$.each(b[d],function(a,b){"array"==$.type(b)?$.each(b,function(a,b){"array"==
$.type(b)?$.each(b,function(a,b){-1<c.indexOf(b)||(c.push(b),content=content+"<li>"+b+"</li>")}):-1<c.indexOf(b)||(c.push(b),content=content+"<li>"+b+"</li>")}):$.each(b,function(a,b){-1<c.indexOf(b)||(c.push(b),content=content+"<li>"+b+"</li>")})}):-1<c.indexOf(f)||(c.push(f),content=content+"<li>"+f+"</li>")});$("#"+settings.summaryID).toggle(""!==content).find("ul").html(content);return""==content};this.validateLocation=function(a,b,c){var d=0,e=a.bookingType;void 0!=b&&(0==$("#"+a.pickupLaterChk).is(":checked")?
0==$(".brt_location_"+b).val().trim().length||""==$(".locLat_"+b).val()||""==$(".locLon_"+b).val()||""==$(".locPlaceid_"+b).val()?($(".brt_location_"+b).css("border-color",this.errorColor),d=1):$(".brt_location_"+b).css("border",this.noError):$(".brt_location_"+b).css("border","1px solid #ccc"));void 0!=c&&(0==$("#"+a.dropLaterChk).is(":checked")?0!=$(".brt_location_"+c).val().trim().length&&""!=$(".locLat_"+c).val()&&""!=$(".locLon_"+c).val()&&""!=$(".locPlaceid_"+c).val()||9==e||10==e||11==e?$(".brt_location_"+
c).css("border",this.noError):($(".brt_location_"+c).css("border-color",this.errorColor),d=1):$(".brt_location_"+c).css("border",this.noError));return d};this.validateName=function(){var a=0;""==$.trim($("#BookingTemp_bkg_user_name").val())?(a=1,$("#BookingTemp_bkg_user_name_em_").html("First name cannot be blank."),$("#BookingTemp_bkg_user_name_em_").show(),$("#BookingTemp_bkg_user_name_em_").css("color",this.errorColor)):($("#BookingTemp_bkg_user_name_em_").html(""),$("#BookingTemp_bkg_user_name_em_").hide());
""==$.trim($("#BookingTemp_bkg_user_lname").val())?(a=1,$("#BookingTemp_bkg_user_lname_em_").html("Last name cannot be blank."),$("#BookingTemp_bkg_user_lname_em_").show(),$("#BookingTemp_bkg_user_lname_em_").css("color",this.errorColor)):($("#BookingTemp_bkg_user_lname_em_").html(""),$("#BookingTemp_bkg_user_lname_em_").hide());return a};this.validateContact=function(a,b){var c=0;""==a?(c=1,$("#BookingTemp_bkg_contact_no1_em_").html("Contact number cannot be blank."),$("#BookingTemp_bkg_contact_no1_em_").show(),
$("#BookingTemp_bkg_contact_no1_em_").css("color",this.errorColor)):0==b.test(a)?(c=1,$("#BookingTemp_bkg_contact_no1_em_").html("Contact number must be numeric."),$("#BookingTemp_bkg_contact_no1_em_").show(),$("#BookingTemp_bkg_contact_no1_em_").css("color",this.errorColor)):8>a.length?(c=1,$("#BookingTemp_bkg_contact_no1_em_").html("Contact No is too short (minimum is 8 characters)"),$("#BookingTemp_bkg_contact_no1_em_").show(),$("#BookingTemp_bkg_contact_no1_em_").css("color",this.errorColor)):
($("#BookingTemp_bkg_contact_no1_em_").html(""),$("#BookingTemp_bkg_contact_no1_em_").hide());return c};this.validateContactEmail=function(a){var b=0;""==$.trim(a)?(b=1,$("#BookingTemp_bkg_user_email2").next("div").html("Email name cannot be blank."),$("#BookingTemp_bkg_user_email2").next("div").show(),$("#BookingTemp_bkg_user_email2").next("div").css("color",this.errorColor)):this.validateEmail(a)?($("#BookingTemp_bkg_user_email2").next("div").html(""),$("#BookingTemp_bkg_user_email2").next("div").hide()):
(b=1,$("#BookingTemp_bkg_user_email2").next("div").html("Email is not valid."),$("#BookingTemp_bkg_user_email2").next("div").show(),$("#BookingTemp_bkg_user_email2").next("div").css("color",this.errorColor));return b};this.successInfo=function(a){var b=1,c="";try{c=JSON.parse(a)}catch(e){b=0}if(b){var d="";c.url&&window.open("http://"+c.url,"_parent");a=c.message;void 0!=a||""!=a?(c=c.errors,$.each(c,function(a,b){d+=b+"\n"}),this.isMobile()||900>screen.width?this.showErrorMsg(d):($("#error_div_info").text(d),
$("#error_div_info").css("display","block"))):(c=JSON.parse(a),c.bkg_contact_no&&($("#BookingTemp_bkg_contact_no1_em_").html(c.bkg_contact_no),$("#BookingTemp_bkg_contact_no1_em_").show(),$("#BookingTemp_bkg_contact_no1_em_").css("color","#a94442"),d+=c.bkg_contact_no+"\n"),c.bkg_user_email&&($("#BookingTemp_bkg_user_email2").next("div").html(c.bkg_user_email),$("#BookingTemp_bkg_user_email2").next("div").show(),$("#BookingTemp_bkg_user_email2").next("div").css("color","#a94442"),d+=c.bkg_user_email),
c.bkg_id&&(a=JSON.parse(c.bkg_id),b="",a.bkg_contact_no&&(b+=a.bkg_contact_no+"\n"),a.bkg_user_email&&(b+=a.bkg_user_email+"\n"),a.bkg_shuttle_id&&(b+=a.bkg_shuttle_id+"\n"),this.isMobile()||900>screen.width?this.showErrorMsg(b):($("#error_div_info").text(b),$("#error_div_info").css("display","block"))),c.bkg_shuttle_id&&(d+=c.bkg_shuttle_id));return!1}$("html,body").animate({scrollTop:0},"slow");this.showTab("Summary");$("#menuSummary").html(a);this.enableTab("Summary");if(this.isMobile()||900>screen.width)$("#menuInfo").hide(),
$("#menuSummary").show();trackPage("/booking/summary1")};this.checkInfo=function(a){var b=this;$("#"+a.chkOthers).change(function(){$("#"+a.chkOthers).is(":checked")?$("#othreq").show():$("#othreq").hide()});$("#"+a.sendEmail).change(function(){$("#"+a.sendEmail).is(":checked")&&""==$("#"+a.userEmail).val()&&($("#error_div_info").show(),$("#error_div_info").html("<h5>Please fix the following input errors:</h5><ul style='list-style:none'><li>Please provide email address.</li></ul>"))});$("#"+a.sendSms).change(function(){$("#"+
a.sendSms).is(":checked")&&""==$("#"+a.contactNo).val()&&($("#error_div_info").show(),$("#error_div_info").html("<h5>Please fix the following input errors:</h5><ul style='list-style:none'><li>Please provide contact number.</li></ul>"))});$("#"+a.flightChk).change(function(){$("#"+a.flightChk).is(":checked")?($("#othreq").show(),1==a.bookingType&&b.findPickupAirport()):($("#othreq").hide(),1==a.bookingType&&$("#brt_from_location"+a.key).val("").change())})};this.showSuccessMsg=function(a,b=!1,c=!1){document.getElementById("notify_success").click();
$("#noti_success_content").html(a);b&&$("#noti_success_title").html(b);c&&$("#noti_success_bell_msg").html(c);setTimeout(function(){$("#noti_success_bell_msg").click()},3E3)};this.showErrorMsg=function(a,b=!1,c=!1){document.getElementById("notify_error").click();$("#noti_error_content").html(a);b&&$("#noti_error_title").html(b);c&&$("#noti_error_bell_msg").html(c);setTimeout(function(){$("#noti_error_bell_msg").click()},5E3)};this.showInfoMsg=function(a,b=!1,c=!1){document.getElementById("notify_info").click();
$("#noti_info_content").html(a);b&&$("#noti_info_title").html(b);c&&$("#noti_info_bell_msg").html(c);setTimeout(function(){$("#noti_error_bell_msg").click()},6E3)};this.homeReady=function(){$(".sub-tab").click(function(){var a=$(this).data("sub-tab");"tab-pill-3a"!=a&&"tab-pill-4a"!=a&&"tab-pill-1a"!=a&&"tab-pill-5a"!=a&&"tab-pill-7a"!=a&&"tab-pill-8a"!=a&&"tab-pill-10a"!=a||$(this).parent().parent().css({display:"none"});$(".sub-tab").removeClass("active-tab-pill-button active");$('a[data-sub-tab="'+
a+'"]').addClass("active-tab-pill-button active");"tab-pill-10a"==a&&($('a[data-sub-tab="tab-pill-1a"]').addClass("active-tab-pill-button active"),$(".btnpersonalcab").removeClass("active-tab-pill-button active"));$("#"+a).css({display:"block"})});$(".sub-subtab").click(function(a){var b=$(a.currentTarget).data("subtab-sub");"tab-pill-5a"!=b&&"tab-pill-7a"!=b||$(a.currentTarget).parent().parent().css({display:"none"});$(".sub-subtab").removeClass("active");$('a[data-subtab-sub="'+b+'"]').addClass("active");
$("#"+b).css({display:"block"})})};this.validateTrip=function(a,b){var c=this,d=!1;$.ajax({type:"POST",async:!1,url:b,data:a.serialize(),dataType:"json",success:function(a){if(a.success)d=!0;else{a=a.errors;var b="",e;for(e in a)$.each(a[e],function(a,c){b=b+c+"<br/>"});c.showErrorMsg(b)}}});return d};this.togglePackage=function(a){let b=a.attr("data-cab"),c=$(".rowPackage"+b);a.hasClass("pkgShow")?0<c.length?(c.show(),this.togglePackageButton(b,!1)):this.getPackageContent(b,this.togglePackageButton):
(c.hide(),this.togglePackageButton(b,!0))};this.togglePackageButton=function(a,b=!0){let c=$(".pkgShow[data-cab="+a+"]");a=$(".pkgHide[data-cab="+a+"]");b?(c.removeClass("hide"),a.addClass("hide")):(c.addClass("hide"),a.removeClass("hide"))};this.getPackageContent=function(a,b){$.ajax({type:"POST",url:"/booking/packageQuote",data:{bkgid:$bkgId,cab:a,YII_CSRF_TOKEN:$('input[name="YII_CSRF_TOKEN"]').val()},success:function(c){let d=$(".pkgShow[data-cab="+a+"]").attr("data-cat");$(".rowCategory"+d).after(c);
b(a,!1)},error:function(a){console.log(a)}})};this.checkIfLoggedIn=function(){var a=this,b=0;$.ajax({url:"/users/userdata",type:"GET",async:!1,success:function(c){c=JSON.parse(c);null!==c.usr_name||null!==c.usr_lname||c.hasOwnProperty("usr_mobile")||c.hasOwnProperty("usr_email")||(b=1,a.isMobile()?(a.showErrorMsg("Please loggein to continue."),$("html, body").animate({scrollTop:$(document).height()},"slow")):$("#signinpopup").click())}});return b}};