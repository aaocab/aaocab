var Booking=function(){this.model={step:0,bookingType:1};this.data={};this.isMobile=function(){return this.Android()||this.BlackBerry()||this.iOS()||this.Opera()||this.Windows()};this.Android=function(){return navigator.userAgent.match(/Android/i)};this.BlackBerry=function(){return navigator.userAgent.match(/BlackBerry/i)};this.iOS=function(){return navigator.userAgent.match(/iPhone|iPad|iPod/i)};this.Opera=function(){return navigator.userAgent.match(/Opera Mini/i)};this.Windows=function(){return navigator.userAgent.match(/IEMobile/i)};
this.addRouteNew=function(b){let a=$("SELECT.ctyPickup").val(),c=$("SELECT.ctyDrop").val(),d=this;$("#error_div").html("");$("#error_div").hide();if(""==a||""==c)return $("#error_div").html("Please select Source/destintion city"),$("#error_div").show(),!1;$.ajax({type:"POST",dataType:"html",url:"/booking/addmoreitinerary",data:b.serialize(),beforeSend:function(){ajaxindicatorstart("")},complete:function(){ajaxindicatorstop()},success:function(a){var c="",f=!1;try{c=JSON.parse(a),f=!0}catch(g){}f?
!c.success&&c.errors&&(messages=c.errors,d.displayError(b,messages)):($("SELECT.ctyPickup").attr("readonly",!0),$("SELECT.ctyDrop").attr("readonly",!0),$("INPUT.datePickup").attr("readonly",!0),$("INPUT.timePickup").attr("readonly",!0),$("INPUT.timePickup").next("span").hide(),$("#bkgItinerary").html(a),$("SELECT.ctyPickup").attr("readonly",!0),d.disableRows())},error:function(a,b,c){alert(c);alert(a.status)}})};this.disableRows=function(){var b=$("SELECT.ctyDrop").length;if(1<b){$("SELECT.ctyPickup")[0].selectize.lock();
for(var a=0;a<b-1;a++)this.disableRow(a);$("#fieldBefore").show()}};this.disableRow=function(b){$("SELECT.ctyDrop")[b].selectize.lock();$($("INPUT.datePickup")[b]).attr("readonly",!0);$($("INPUT.timePickup")[b]).attr("readonly",!0);this.isMobile()||$($("INPUT.datePickup")[b]).datepicker("remove");$($("INPUT.timePickup")[b]).next("span").hide()};this.bkRouteReady=function(){var b=this;trackPage("/booking/pickup");$("#fieldBefore").click(function(){var a=$("SELECT.ctyDrop").length;$($(".clsRoute")[a-
1]).remove();b.enableRows()})};this.displayError=function(b,a){settings=b.data("settings");content="";let c=[];for(var d in a)"string"===$.type(a[d])?content=content+"<li>"+a[d]+"</li>":$.each(a[d],function(b,e){"array"===$.type(e)?$.each(a[d],function(a,b){"array"==$.type(b)?$.each(b,function(b,a){"array"==$.type(a)?$.each(a,function(a,b){-1<c.indexOf(b)||(c.push(b),content=content+"<li>"+b+"</li>")}):-1<c.indexOf(a)||(c.push(a),content=content+"<li>"+a+"</li>")}):$.each(b,function(b,a){-1<c.indexOf(a)||
(c.push(a),content=content+"<li>"+a+"</li>")})}):-1<c.indexOf(e)||(c.push(e),content=content+"<li>"+e+"</li>")});$("#"+settings.summaryID).toggle(""!==content).find("ul").html(content);return""==content}};