BRObject={object:{},init:function(d,a){if(void 0!==a&&a||void 0==this.object[d])this.object[d]=new bookingRoute(d);return this.object[d]},get:function(d){return void 0!=this.object[d]?this.object[d]:!1}};
var bookingRoute=function(d){this.model={};this.model.id=d;this.model.source={};this.model.source.fetchUrl="/lookup/citylist1";this.model.source.enable=!0;this.model.destination={};this.model.destination.fetchUrl="/lookup/nearestcitylist";this.airportDestination=this.airportSource=!1;this.airportURL="/index/getairportcities";$(".selectize-control INPUT").attr("autocomplete","new-password");this.initSource=function(a,b,c=!0){this.model.source.selectObj=a;this.airportSource&&(this.model.source.fetchUrl=
this.airportURL);this.model.source.value=b;this.model.source.enable=c;a.on("loaded",function(a){c?a[0].unlock():a[0].lock()});this.populateSource(b)};this.disable=function(a){null!=a&&a.lock()};this.disableSource=function(){this.disable(this.model.source.selectObj)};this.disableDestination=function(){this.disable(this.model.destination.selectObj)};this.initDestination=function(a,b,c=!0){this.model.destination.selectObj=a;this.airportDestination&&(this.model.destination.fetchUrl=this.airportURL);this.model.destination.value=
b;this.model.destination.enable=c};this.populateSource=function(a){this.model.source.value=a;this.populate(this.model.source)};this.changeSource=function(a){this.model.source.value=a;""!=a&&this.populateDestination(this.model.destination.value)};this.changeDestination=function(a){this.model.destination.value=a};this.populateDestination=function(a){null!=this.model.destination.selectObj&&(this.model.destination.value=a,this.model.destination.source=this.model.source.selectObj.getValue(),""===this.model.destination.source?
(this.model.destination.selectObj.clear(),this.model.destination.selectObj.disable()):this.populate(this.model.destination))};this.onLoad=function(a,b){if(0<a.length){debugger;b.selectObj.enable();""!=b.value&&b.selectObj.setValue(b.value)}b.selectObj.trigger("loaded",[b.selectObj])};this.populate=function(a){console.log("obj.populate");var b=this;a.selectObj.load(function(c){console.log("obj.selectObj.load");b.load(c,null,a)})};this.load=function(a,b,c){console.log("this.load");var d={};c.hasOwnProperty("value")&&
null!==c.value&&(d.city=c.value);c.hasOwnProperty("source")&&null!==c.source&&(d.source=c.source);null!=b&&(d.q=b);xhr=$.ajax({url:c.fetchUrl,dataType:"json",data:d,success:function(b){console.log("xhr.success");c.data=b;a(c.data)},error:function(){a()}})}};