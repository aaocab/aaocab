2024/10/24 00:02:42 [profile] [profile.module.admin.controller.booking.create] [T: 3649.457] [M: 9523.35] 
------------------------------------------------------module.admin.controller.booking.create ACTION START------------------------------------------------------
	URL: [GET]/aaohome/booking/create
	User IP: 192.168.255.12
	[UserID: 30] [UserType: 4]
2024/10/24 00:02:43 [profile] [profile.module.admin.controller.booking.create] [T: 3733.741] [M: 10759.62] setLocationRequest start
2024/10/24 00:02:43 [profile] [profile.module.admin.controller.booking.create] [T: 3814.71] [M: 10760.13] setLocationRequest ends
2024/10/24 00:02:43 [profile] [profile.module.admin.controller.booking.create] [T: 3947.602] [M: 20742.75] [ET: 15.657/3908.604] [MU: 1.99/20741.25] 
	SQL: SELECT  teams.tea_id 
					FROM   admins adm
					LEFT JOIN `admin_profiles` adp ON adp.adp_adm_id = adm.adm_id
					LEFT JOIN
					(
						SELECT 
						admin_profiles.adp_adm_id,
						JSON_UNQUOTE(JSON_EXTRACT(admin_profiles.adp_cdt_id, CONCAT('$[', pseudo_rows.row, '].cdtWeight'))) AS cdtWeight,
						JSON_UNQUOTE(JSON_EXTRACT(admin_profiles.adp_cdt_id, CONCAT('$[', pseudo_rows.row, '].cdtId'))) AS cdtId
						FROM admin_profiles
						JOIN pseudo_rows
						WHERE 1 AND  adp_adm_id = :admId
						HAVING cdtId IS NOT NULL
					) temp ON temp.adp_adm_id=adp.adp_adm_id
					LEFT JOIN `cat_depart_team_map` cdt  ON temp.cdtId=cdt.cdt_id
					LEFT JOIN teams ON cdt.cdt_tea_id = teams.tea_id								   
					WHERE  adm_id = :admId
					AND
					( 
						(tea_start_time IS NULL AND tea_stop_time IS NULL)
							OR           
						(tea_start_time < tea_stop_time AND CURRENT_TIME() BETWEEN tea_start_time AND tea_stop_time)
							OR
						(tea_stop_time < tea_start_time AND CURRENT_TIME() < tea_start_time AND CURRENT_TIME() < tea_stop_time)
							OR
						(tea_stop_time < tea_start_time AND CURRENT_TIME() > tea_start_time)
					)
					ORDER BY temp.cdtWeight  ASC LIMIT 0,1 
	 [params: {"admId":"30"}]
2024/10/24 00:02:43 [profile] [profile.module.admin.controller.booking.create] [T: 3950.46] [M: 20743.82] [ET: 2.778/3911.471] [MU: 1.2/20743.38] 
	SQL: SELECT  COUNT(*) as active_cbr_count_byId FROM `service_call_queue`
					WHERE 1 AND scq_status IN (1,3) AND scq_follow_up_queue_type=9
					AND scq_create_date >='2021-01-01 00:00:00'
					AND scq_active=1
				    AND scq_follow_up_date_time  < DATE_ADD(NOW(),INTERVAL 24 HOUR) AND scq_to_be_followed_up_by_id = :team_id 
	 [params: {"team_id":null}]
2024/10/24 00:02:43 [profile] [profile.module.admin.controller.booking.create] [T: 3950.948] [M: 20745.84] [ET: 0.372/3911.949] [MU: 1.15/20745.34] 
	SQL: SELECT  COUNT(*) as active_cbr_count_byId FROM `service_call_queue`
					WHERE 1 AND scq_status IN (1,3)  AND scq_follow_up_queue_type=9
					 AND scq_create_date >='2021-01-01 00:00:00'
					 AND scq_active=1
				   AND scq_follow_up_date_time  < DATE_ADD(NOW(),INTERVAL 24 HOUR) AND scq_to_be_followed_up_by_id = :adm_id AND scq_to_be_followed_up_by_type=2 
	 [params: {"adm_id":"30"}]
2024/10/24 00:02:43 [profile] [profile.module.admin.controller.booking.create] [T: 3988.042] [M: 21085.84] [ET: 13.906/3948.977] [MU: 1.99/21084.59] 
	SQL: SELECT cdt.cdt_id
			FROM admins adm
			LEFT JOIN `admin_profiles` adp ON adp.adp_adm_id = adm.adm_id
			LEFT JOIN
			(
				SELECT 
				admin_profiles.adp_adm_id,
				JSON_UNQUOTE(JSON_EXTRACT(admin_profiles.adp_cdt_id, CONCAT('$[', pseudo_rows.row, '].cdtWeight'))) AS cdtWeight,
				JSON_UNQUOTE(JSON_EXTRACT(admin_profiles.adp_cdt_id, CONCAT('$[', pseudo_rows.row, '].cdtId'))) AS cdtId
				FROM admin_profiles
				JOIN pseudo_rows
				WHERE 1
				HAVING cdtId IS NOT NULL
			) temp ON temp.adp_adm_id=adp.adp_adm_id
			LEFT JOIN `cat_depart_team_map` cdt  ON temp.cdtId=cdt.cdt_id
			LEFT JOIN teams ON cdt.cdt_tea_id = teams.tea_id
			WHERE cdt.cdt_id IN (:gp0)
			AND
			(
				(tea_start_time IS NULL AND tea_stop_time IS NULL)
				OR
				(tea_start_time < tea_stop_time AND CURRENT_TIME() BETWEEN tea_start_time AND tea_stop_time)
				OR
				(tea_stop_time < tea_start_time AND CURRENT_TIME() < tea_start_time AND CURRENT_TIME() < tea_stop_time)
				OR
				(tea_stop_time < tea_start_time AND CURRENT_TIME() > tea_start_time)
			)
			ORDER BY temp.cdtWeight ASC LIMIT 0,1 
	 [params: {":gp0":"1"}]
2024/10/24 00:02:43 [profile] [profile.module.admin.controller.booking.create] [T: 4122.607] [M: 21384.52] [ET: 473.061/4083.616] [MU: 11859.64/21384.41] 
	module.admin.controller.booking.create
2024/10/24 00:02:43 [profile] [profile.module.admin.controller.booking.create] [T: 4122.64] [M: 21384.66] 
*******************************************************module.admin.controller.booking.create ACTION DONE****************************************************************
2024/10/24 00:03:15 [profile] [profile.module.admin.controller.booking.getamountbyvehicle] [T: 90.424] [M: 10046.09] 
------------------------------------------------------module.admin.controller.booking.getamountbyvehicle ACTION START------------------------------------------------------
	URL: [POST]/aaohome/booking/getamountbyvehicle
	User IP: 192.168.255.12
	Referrer: http://localhost:84/aaohome/booking/create
	POST: {"fromCity":"30804","toCity":"30372","cabType":"1","tripDistance":"","tripDuration":"","multiCityData":"","bookingType":"1","pickupAddress":"","pickupDate":"31\/10\/2024","pickupTime":"04:00 AM","isGozonow":"0","minTripDistance":"0","sccId":"0","tripUser":"1","YII_CSRF_TOKEN":"N3VxRE1WeG9UeHk5UWFBUFpPT216eWVyY0xWTVpoTkcUoJ2aBoup1fU2M5E4ePVZVcUNlKiYZZysUqEklNiKWw==","isAirportPickup":"1"}
	RawBody: fromCity=30804&toCity=30372&cabType=1&tripDistance=&tripDuration=&multiCityData=&bookingType=1&pickupAddress=&pickupDate=31%2F10%2F2024&pickupTime=04%3A00+AM&isGozonow=0&minTripDistance=0&sccId=0&tripUser=1&YII_CSRF_TOKEN=N3VxRE1WeG9UeHk5UWFBUFpPT216eWVyY0xWTVpoTkcUoJ2aBoup1fU2M5E4ePVZVcUNlKiYZZysUqEklNiKWw%3D%3D&isAirportPickup=1
	[UserID: 30] [UserType: 4]
2024/10/24 00:03:15 [profile] [profile.module.admin.controller.booking.getamountbyvehicle] [T: 129.241] [M: 11282.29] setLocationRequest start
2024/10/24 00:03:15 [profile] [profile.module.admin.controller.booking.getamountbyvehicle] [T: 223.038] [M: 11282.8] setLocationRequest ends
2024/10/24 00:03:15 [profile] [profile.module.admin.controller.booking.getamountbyvehicle] [T: 298.145] [M: 18107.86] [ET: 0.335/273.034] [MU: 0.83/18107.67] 
	SQL: SELECT COUNT(1) as cnt FROM cities WHERE cty_active=1 AND cty_service_active=1 AND cty_id=30804 
	 [params: []]
2024/10/24 00:03:15 [profile] [profile.module.admin.controller.booking.getamountbyvehicle] [T: 298.463] [M: 18109.16] [ET: 0.22/273.357] [MU: 0.83/18108.97] 
	SQL: SELECT COUNT(1) as cnt FROM cities WHERE cty_active=1 AND cty_service_active=1 AND cty_id=30372 
	 [params: []]
2024/10/24 00:03:15 [profile] [profile.module.admin.controller.booking.getamountbyvehicle] [T: 317.548] [M: 18592.41] [ET: 18.972/292.399] [MU: 483.16/18592.3] 
	BookingRoute::calculateDistance
2024/10/24 00:03:15 [profile] [profile.module.admin.controller.booking.getamountbyvehicle] [T: 318.524] [M: 18589.7] [ET: 0.473/293.397] [MU: 1.25/18589.59] 
	BookingRoute::calculateDistance
2024/10/24 00:03:15 [profile] [profile.module.admin.controller.booking.getamountbyvehicle] [T: 318.663] [M: 18589.5] [ET: 58.016/293.527] [MU: 5974.34/18589.41] 
	validateRoutes
2024/10/24 00:03:15 [profile] [profile.module.admin.controller.booking.getamountbyvehicle] [T: 322.382] [M: 18822.62] [ET: 1.028/297.275] [MU: 27.08/18822.4] 
	SQL: SELECT scv_id FROM svc_class_vhc_cat WHERE scv_active = 1 AND scv_scc_id IN (1,2,4,6) ORDER BY scv_vct_id ASC,scv_scc_id ASC 
	 [params: []]
2024/10/24 00:03:15 [profile] [profile.module.admin.controller.booking.getamountbyvehicle] [T: 324.125] [M: 18808.7] 
+++++++++++++++++++++++++++++++++++++++++++++++++++++++++++profile models.Quote.getQuote START++++++++++++++++++++++++++++++++++++++++++++++++++
	URL: [POST]/aaohome/booking/getamountbyvehicle
	User IP: 192.168.255.12
	Referrer: http://localhost:84/aaohome/booking/create
	POST: {"fromCity":"30804","toCity":"30372","cabType":"1","tripDistance":"","tripDuration":"","multiCityData":"","bookingType":"1","pickupAddress":"","pickupDate":"31\/10\/2024","pickupTime":"04:00 AM","isGozonow":"0","minTripDistance":"0","sccId":"0","tripUser":"1","YII_CSRF_TOKEN":"N3VxRE1WeG9UeHk5UWFBUFpPT216eWVyY0xWTVpoTkcUoJ2aBoup1fU2M5E4ePVZVcUNlKiYZZysUqEklNiKWw==","isAirportPickup":"1"}
	RawBody: fromCity=30804&toCity=30372&cabType=1&tripDistance=&tripDuration=&multiCityData=&bookingType=1&pickupAddress=&pickupDate=31%2F10%2F2024&pickupTime=04%3A00+AM&isGozonow=0&minTripDistance=0&sccId=0&tripUser=1&YII_CSRF_TOKEN=N3VxRE1WeG9UeHk5UWFBUFpPT216eWVyY0xWTVpoTkcUoJ2aBoup1fU2M5E4ePVZVcUNlKiYZZysUqEklNiKWw%3D%3D&isAirportPickup=1
	[UserID: 30] [UserType: 4]
2024/10/24 00:03:15 [profile] [profile.module.admin.controller.booking.getamountbyvehicle] [T: 359.858] [M: 19261.08] [ET: 0.951/334.734] [MU: 2.5/19260.77] 
	SQL: SELECT GROUP_CONCAT(zct_zon_id) as zones FROM zone_cities 
						INNER JOIN zones ON zon_id=zct_zon_id AND zon_active=1
						WHERE zct_cty_id=:city AND zct_active=1 
	 [params: {":city":"30804"}]
2024/10/24 00:03:16 [profile] [profile.module.admin.controller.booking.getamountbyvehicle] [T: 382.983] [M: 19674.48] [ET: 0.803/357.864] [MU: 3.33/19674.04] 
	SQL: SELECT stt_id, GROUP_CONCAT(DISTINCT zct_zon_id) zones, stt_zone AS region
				FROM   cities
				INNER JOIN states ON cty_state_id = stt_id AND stt_active = '1'
				LEFT JOIN zone_cities ON cty_id = zct_cty_id AND zct_active = 1
				LEFT JOIN zones ON zon_id=zct_zon_id AND zon_active=1
				WHERE  cty_id =:city AND cty_active = 1 
	 [params: {"city":"30804"}]
2024/10/24 00:03:16 [profile] [profile.module.admin.controller.booking.getamountbyvehicle] [T: 386.132] [M: 19679.3] [ET: 3.013/361.006] [MU: 3.22/19678.87] 
	SQL: SELECT stt_id, GROUP_CONCAT(DISTINCT zct_zon_id) zones, stt_zone AS region
				FROM   cities
				INNER JOIN states ON cty_state_id = stt_id AND stt_active = '1'
				LEFT JOIN zone_cities ON cty_id = zct_cty_id AND zct_active = 1
				LEFT JOIN zones ON zon_id=zct_zon_id AND zon_active=1
				WHERE  cty_id =:city AND cty_active = 1 
	 [params: {"city":"30372"}]
2024/10/24 00:03:16 [profile] [profile.module.admin.controller.booking.getamountbyvehicle] [T: 386.937] [M: 19681.34] [ET: 0.658/361.818] [MU: 0.9/19681.13] 
	SQL: SELECT rut_id FROM `route` WHERE rut_from_city_id =:fromCty AND rut_to_city_id=:toCty AND rut_active = 1 
	 [params: {"fromCty":"30804","toCty":"30372"}]
2024/10/24 00:03:16 [profile] [profile.module.admin.controller.booking.getamountbyvehicle] [T: 399.082] [M: 19732.5] [ET: 11.781/373.98] [MU: 43.61/19731] 
	SQL: SELECT scv_id, CASE
				WHEN scr_area_type=1 AND scr_area_id IN (31) THEN 10
				WHEN scr_area_type=1 AND scr_area_id IN (0) THEN 9
				WHEN scr_area_type=2 AND scr_area_id IN (105) THEN 5
				WHEN scr_area_type=2 AND scr_area_id IN (86) THEN 4
				WHEN scr_area_type=3 AND scr_area_id IN (30804) THEN 20
				WHEN scr_area_type=3 AND scr_area_id IN (30372) THEN 19
				WHEN scr_area_type=4 AND scr_area_id IN (1) THEN 3
				WHEN scr_area_type=4 AND scr_area_id IN (2) THEN 2
				WHEN scr_area_type=5 THEN 25
				ELSE 1
				END AS rank, 
			scc_id, scr_is_allowed 
		FROM service_class_rule 
		INNER JOIN svc_class_vhc_cat ON scv_id = scr_scv_id AND scv_active = 1
		INNER JOIN service_class ON scv_scc_id = scc_id
		WHERE   ((scr_area_type = 1 AND scr_area_id IN (:gp0)) 
			OR (scr_area_type = 2 AND scr_area_id IN (:gp3,:gp4)) 
			OR (scr_area_type = 3 AND scr_area_id IN (:gp1,:gp2)) 
			OR (scr_area_type = 4 AND scr_area_id IN (:gp5,:gp6))
			OR (scr_area_type = 5 AND scr_area_id IN (4181))
			OR scr_area_type IS NULL)
			AND (scr_trip_type = :tripType OR scr_trip_type IS NULL) 
			AND scr_active = 1 AND scv_id IN (1)
		ORDER BY rank DESC
		 
	 [params: {":gp0":"31",":gp1":"30804",":gp2":"30372",":gp3":"105",":gp4":"86",":gp5":"1",":gp6":"2","tripType":"1"}]
2024/10/24 00:03:16 [profile] [profile.module.admin.controller.booking.getamountbyvehicle] [T: 428.09] [M: 19783.05] [ET: 13.237/402.987] [MU: 0.83/19782.86] 
	SQL: SELECT cts_category FROM cities_stats WHERE cts_cty_id = :cityId 
	 [params: {"cityId":"30804"}]
2024/10/24 00:03:16 [profile] [profile.module.admin.controller.booking.getamountbyvehicle] [T: 438.19] [M: 19785.34] [ET: 9.973/413.081] [MU: 0.96/19785.02] 
	SQL: SELECT GROUP_CONCAT(adn_id) as ids FROM addon_service_class_rule INNER JOIN addons ON ascr_adn_id = adn_id AND adn_active=1 AND ascr_active = 1 WHERE ascr_cty_category=:cat AND ascr_scc_id=:class 
	 [params: {"cat":2,"class":"1"}]
2024/10/24 00:03:16 [profile] [profile.module.admin.controller.booking.getamountbyvehicle] [T: 459.322] [M: 19929.16] [ET: 4/434.192] [MU: 6.66/19928.28] 
	SQL: SELECT route.rut_id, route.rut_from_city_id start,route.rut_to_city_id end, NULL AS fromAlias, NULL AS toAlias, rut_name,route.rut_estm_distance as quotedDistance, route.rut_estm_distance as rateDistance,
                                0 AS extraDistance, 
								0 AS extraStartDistance,
								1 as rank,
                                0 as startTime, 0 as endTime, route.rut_estm_time,rate.*
                        FROM   route
						INNER JOIN rate ON rut_id = rate.rte_route_id AND rate.rte_status=1 AND rate.rte_vendor_amount>0 AND rate.rte_vehicletype_id=:cabType
                        WHERE  rut_active = 1 AND route.rut_from_city_id =:fromCity AND route.rut_to_city_id =:toCity 
	 [params: {"cabType":"1","fromCity":"30804","toCity":"30372"}]
2024/10/24 00:03:16 [profile] [profile.module.admin.controller.booking.getamountbyvehicle] [T: 463.077] [M: 20096.08] [ET: 0.74/437.952] [MU: 0.9/20095.86] 
	SQL: SELECT rut_id FROM `route` WHERE rut_from_city_id =:fromCty AND rut_to_city_id=:toCty AND rut_active = 1 
	 [params: {"fromCty":"30804","toCty":"30372"}]
2024/10/24 00:03:16 [profile] [profile.module.admin.controller.booking.getamountbyvehicle] [T: 466.967] [M: 20227.14] [ET: 0.674/441.849] [MU: 2.97/20226.7] 
	SQL: SELECT stt_id, GROUP_CONCAT(DISTINCT zct_zon_id) zones, stt_zone AS region
				FROM   cities
				INNER JOIN states ON cty_state_id = stt_id AND stt_active = '1'
				LEFT JOIN zone_cities ON cty_id = zct_cty_id AND zct_active = 1
				LEFT JOIN zones ON zon_id=zct_zon_id AND zon_active=1
				WHERE  cty_id =:city AND cty_active = 1 
	 [params: {"city":"30804"}]
2024/10/24 00:03:16 [profile] [profile.module.admin.controller.booking.getamountbyvehicle] [T: 467.888] [M: 20259] [ET: 0.748/442.781] [MU: 25.34/20258.25] 
	SQL: SELECT area_price_rule.*,
					CASE area_price_rule.apr_area_type
					WHEN 1 THEN 10
					WHEN 2 THEN 5
					WHEN 3 THEN 20   
					ELSE 1
					END AS rank
				FROM area_price_rule 
				WHERE apr_active=1 AND ((apr_area_type = 3 AND apr_area_id IN (:gp9)) OR (apr_area_type = 5 AND apr_area_id IN (:gp7)) OR (apr_area_type = 2 AND apr_area_id IN (:gp10)) OR (apr_area_type = 4 AND apr_area_id IN (:gp11)) OR (apr_area_type = 1 AND apr_area_id IN (:gp8))) AND apr_cab_type=:cab ORDER BY rank DESC 
	 [params: {":gp7":"4181",":gp8":"31",":gp9":"30804",":gp10":"105",":gp11":"1","cab":"1"}]
2024/10/24 00:03:17 [profile] [profile.module.admin.controller.booking.getamountbyvehicle] [T: 1684.708] [M: 21867.48] [ET: 1026.982/1659.605] [MU: 4.05/21866.6] 
	SQL: SELECT *
				FROM 
                   (
							SELECT cities_stats.cts_cty_id AS vnd_city, cities_stats.cts_vnd_cnt AS cnt, 0 AS distance
							FROM cities_stats
							WHERE     cities_stats.cts_cty_id = :city	AND cities_stats.cts_vnd_cnt >= 2

							UNION
							SELECT cities_stats.cts_cty_id AS vnd_city, cities_stats.cts_vnd_cnt AS cnt, IFNULL(rut_actual_distance, rut_estm_distance) AS distance
							FROM route
							INNER JOIN cities_stats  ON  cities_stats.cts_cty_id = route.rut_from_city_id AND cities_stats.cts_vnd_cnt >= 2 AND IFNULL(rut_actual_distance, rut_estm_distance) < 40
							WHERE rut_to_city_id = :city
							GROUP BY cities_stats.cts_cty_id   
                    ) a
				ORDER BY DISTANCE ASC 
	 [params: {":city":"30804"}]
2024/10/24 00:03:18 [profile] [profile.module.admin.controller.booking.getamountbyvehicle] [T: 2633.027] [M: 21888.34] [ET: 946.123/2607.903] [MU: 3.73/21887.46] 
	SQL: SELECT *
				FROM 
                   (
							SELECT cities_stats.cts_cty_id AS vnd_city, cities_stats.cts_vnd_cnt AS cnt, 0 AS distance
							FROM cities_stats
							WHERE     cities_stats.cts_cty_id = :city	AND cities_stats.cts_vnd_cnt >= 2

							UNION
							SELECT cities_stats.cts_cty_id AS vnd_city, cities_stats.cts_vnd_cnt AS cnt, IFNULL(rut_actual_distance, rut_estm_distance) AS distance
							FROM route
							INNER JOIN cities_stats  ON  cities_stats.cts_cty_id = route.rut_from_city_id AND cities_stats.cts_vnd_cnt >= 2 AND IFNULL(rut_actual_distance, rut_estm_distance) < 40
							WHERE rut_to_city_id = :city
							GROUP BY cities_stats.cts_cty_id   
                    ) a
				ORDER BY DISTANCE ASC 
	 [params: {":city":"30372"}]
2024/10/24 00:03:18 [profile] [profile.module.admin.controller.booking.getamountbyvehicle] [T: 2635.55] [M: 21901.03] [ET: 0.491/2610.447] [MU: 3/21900.94] 
	BookingRoute::calculateDistance
2024/10/24 00:03:18 [profile] [profile.module.admin.controller.booking.getamountbyvehicle] [T: 2682.985] [M: 21941.61] [ET: 23.319/2657.864] [MU: 2.04/21941.23] 
	SQL: SELECT *
				FROM   partner_rate prt 
				JOIN route rut ON prt.prt_route_id = rut.rut_id AND rut.rut_active = 1
				AND  rut.rut_from_city_id  = 30804 
				AND  rut.rut_to_city_id  = 30372 
				 WHERE prt_vehicletype_id = 1
				AND prt_partner_id = 1249
				AND prt_status = 1
				 
	 [params: []]
2024/10/24 00:03:18 [profile] [profile.module.admin.controller.booking.getamountbyvehicle] [T: 2684.011] [M: 21946.84] 
+++++++++++++++++++++++++++++++++++++++++++++++++++++++++++profile models.RouteRates.calculateDriverAllowance START++++++++++++++++++++++++++++++++++++++++++++++++++
	URL: [POST]/aaohome/booking/getamountbyvehicle
	User IP: 192.168.255.12
	Referrer: http://localhost:84/aaohome/booking/create
	POST: {"fromCity":"30804","toCity":"30372","cabType":"1","tripDistance":"","tripDuration":"","multiCityData":"","bookingType":"1","pickupAddress":"","pickupDate":"31\/10\/2024","pickupTime":"04:00 AM","isGozonow":"0","minTripDistance":"0","sccId":"0","tripUser":"1","YII_CSRF_TOKEN":"N3VxRE1WeG9UeHk5UWFBUFpPT216eWVyY0xWTVpoTkcUoJ2aBoup1fU2M5E4ePVZVcUNlKiYZZysUqEklNiKWw==","isAirportPickup":"1"}
	RawBody: fromCity=30804&toCity=30372&cabType=1&tripDistance=&tripDuration=&multiCityData=&bookingType=1&pickupAddress=&pickupDate=31%2F10%2F2024&pickupTime=04%3A00+AM&isGozonow=0&minTripDistance=0&sccId=0&tripUser=1&YII_CSRF_TOKEN=N3VxRE1WeG9UeHk5UWFBUFpPT216eWVyY0xWTVpoTkcUoJ2aBoup1fU2M5E4ePVZVcUNlKiYZZysUqEklNiKWw%3D%3D&isAirportPickup=1
	[UserID: 30] [UserType: 4]
2024/10/24 00:03:18 [profile] [profile.module.admin.controller.booking.getamountbyvehicle] [T: 2684.668] [M: 21966.4] [ET: 1.235/2659.578] [MU: 20.76/21966.29] 
	models.RouteRates.calculateDriverAllowance
2024/10/24 00:03:18 [profile] [profile.module.admin.controller.booking.getamountbyvehicle] [T: 2684.711] [M: 21968.08] 
============================================================Profile models.RouteRates.calculateDriverAllowance DONE==================================================
2024/10/24 00:03:18 [profile] [profile.module.admin.controller.booking.getamountbyvehicle] [T: 2705.529] [M: 22051.04] [ET: 19.152/2680.411] [MU: 3.19/22048.54] 
	SQL: SELECT * FROM (
                                SELECT *, FLOOR(IF((cpm_value_type=1),(cpm_value+15157),(IF((cpm_value_type=2),(15157+(15157*(cpm_value/100))),cpm_value))))amount,
                                    ((SELECT GROUP_CONCAT(z2.zct_zon_id) as srcZones FROM zone_cities z2
                                        WHERE z2.zct_active=1 AND zct_cty_id=30804 GROUP BY z2.zct_cty_id)) as srcZones,
                                    (SELECT GROUP_CONCAT(z2.zct_zon_id) as srcZones FROM zone_cities z2
                                        WHERE z2.zct_active=1 AND zct_cty_id=30372 GROUP BY z2.zct_cty_id) as dstZones,
                                    (
                                    IF(cpm_agent_id IS NOT NULL, 1,0) +
                                    IF(cpm_source_city IS NOT NULL,54,0) +
                                    IF(cpm_destination_city IS NOT NULL,54,0) +
                                    IF(cpm_source_zone IS NOT NULL,18,0) +
                                    IF(cpm_destination_zone IS NOT NULL,18,0) +
                                    IF(cpm_source_state IS NOT NULL,6,0) +
                                    IF(cpm_destination_state IS NOT NULL,6,0) +
                                    IF(cpm_trip_type IS NOT NULL,1,0) +
                                    IF(cpm_vehicle_type IS NOT NULL,1,0)
                               ) as rank
                                FROM `channel_partner_markup`
                                WHERE cpm_active=1) a
                            WHERE
                            (
                                (cpm_source_city IS NULL OR cpm_source_city=30804) AND
                                (cpm_destination_city IS NULL OR cpm_destination_city=30372) AND
                                (cpm_source_zone IS NULL OR cpm_source_zone IN (srcZones)) AND
                                (cpm_destination_zone IS NULL OR cpm_destination_zone IN (dstZones))
                            )
                            AND cpm_agent_id = 1249
                            AND ('2024-10-31 04:00:00' BETWEEN cpm_from_date AND cpm_to_date)  AND (cpm_vehicle_type=1 OR cpm_vehicle_type IS NULL)  AND (cpm_trip_type=1 OR cpm_trip_type IS NULL)
                        ORDER BY rank DESC, amount DESC  LIMIT 1 
	 [params: []]
2024/10/24 00:03:18 [profile] [profile.module.admin.controller.booking.getamountbyvehicle] [T: 2743.93] [M: 23404.45] [ET: 60.587/2718.823] [MU: 1459.28/23404.3] 
	RouteRates::calculate for CAB 1 2024-10-31 04:00:00 - Trip Type: 1 332881317
2024/10/24 00:03:18 [profile] [profile.module.admin.controller.booking.getamountbyvehicle] [T: 2744.215] [M: 23383.39] [ET: 2289.172/2719.126] [MU: 3465.33/23383.23] 
	Quote::calculateOneWay  for CAB 1 Date: 2024-10-31 04:00:00
2024/10/24 00:03:18 [profile] [profile.module.admin.controller.booking.getamountbyvehicle] [T: 2744.6] [M: 23377.73] [ET: 0.292/2719.494] [MU: 0.9/23377.48] 
	SQL: SELECT svc.scv_scc_id FROM svc_class_vhc_cat svc
					-- INNER JOIN service_class scc ON svc.scv_scc_id=scc_id
					WHERE scv_id=:cabId 
	 [params: {"cabId":"1"}]
2024/10/24 00:03:18 [profile] [profile.module.admin.controller.booking.getamountbyvehicle] [T: 2744.705] [M: 23378.33] [ET: 2420.476/2719.607] [MU: 4567.14/23378.23] 
	Quote For CabType: 1
2024/10/24 00:03:18 [profile] [profile.module.admin.controller.booking.getamountbyvehicle] [T: 2746.024] [M: 23391.77] [ET: 0.445/2720.93] [MU: 2.97/23391.34] 
	SQL: SELECT stt_id, GROUP_CONCAT(DISTINCT zct_zon_id) zones, stt_zone AS region
				FROM   cities
				INNER JOIN states ON cty_state_id = stt_id AND stt_active = '1'
				LEFT JOIN zone_cities ON cty_id = zct_cty_id AND zct_active = 1
				LEFT JOIN zones ON zon_id=zct_zon_id AND zon_active=1
				WHERE  cty_id =:city AND cty_active = 1 
	 [params: {"city":"30804"}]
2024/10/24 00:03:18 [profile] [profile.module.admin.controller.booking.getamountbyvehicle] [T: 2746.531] [M: 23396.73] [ET: 0.429/2721.433] [MU: 3.34/23396.29] 
	SQL: SELECT stt_id, GROUP_CONCAT(DISTINCT zct_zon_id) zones, stt_zone AS region
				FROM   cities
				INNER JOIN states ON cty_state_id = stt_id AND stt_active = '1'
				LEFT JOIN zone_cities ON cty_id = zct_cty_id AND zct_active = 1
				LEFT JOIN zones ON zon_id=zct_zon_id AND zon_active=1
				WHERE  cty_id =:city AND cty_active = 1 
	 [params: {"city":"30372"}]
2024/10/24 00:03:18 [profile] [profile.module.admin.controller.booking.getamountbyvehicle] [T: 2747.082] [M: 23406.8] [ET: 0.471/2721.985] [MU: 0.9/23406.55] 
	SQL: SELECT rut_id FROM `route` WHERE rut_from_city_id =:fromCty AND rut_to_city_id=:toCty AND rut_active = 1 
	 [params: {"fromCty":"30804","toCty":"30372"}]
2024/10/24 00:03:18 [profile] [profile.module.admin.controller.booking.getamountbyvehicle] [T: 2758.572] [M: 23438.53] [ET: 11.365/2733.466] [MU: 24.21/23437.03] 
	SQL: SELECT scv_id, CASE
				WHEN scr_area_type=1 AND scr_area_id IN (31) THEN 10
				WHEN scr_area_type=1 AND scr_area_id IN (0) THEN 9
				WHEN scr_area_type=2 AND scr_area_id IN (105) THEN 5
				WHEN scr_area_type=2 AND scr_area_id IN (86) THEN 4
				WHEN scr_area_type=3 AND scr_area_id IN (30804) THEN 20
				WHEN scr_area_type=3 AND scr_area_id IN (30372) THEN 19
				WHEN scr_area_type=4 AND scr_area_id IN (1) THEN 3
				WHEN scr_area_type=4 AND scr_area_id IN (2) THEN 2
				WHEN scr_area_type=5 THEN 25
				ELSE 1
				END AS rank, 
			scc_id, scr_is_allowed 
		FROM service_class_rule 
		INNER JOIN svc_class_vhc_cat ON scv_id = scr_scv_id AND scv_active = 1
		INNER JOIN service_class ON scv_scc_id = scc_id
		WHERE   ((scr_area_type = 1 AND scr_area_id IN (:gp12)) 
			OR (scr_area_type = 2 AND scr_area_id IN (:gp15,:gp16)) 
			OR (scr_area_type = 3 AND scr_area_id IN (:gp13,:gp14)) 
			OR (scr_area_type = 4 AND scr_area_id IN (:gp17,:gp18))
			OR (scr_area_type = 5 AND scr_area_id IN (4181))
			OR scr_area_type IS NULL)
			AND (scr_trip_type = :tripType OR scr_trip_type IS NULL) 
			AND scr_active = 1 AND scv_id IN (14)
		ORDER BY rank DESC
		 
	 [params: {":gp12":"31",":gp13":"30804",":gp14":"30372",":gp15":"105",":gp16":"86",":gp17":"1",":gp18":"2","tripType":"1"}]
2024/10/24 00:03:18 [profile] [profile.module.admin.controller.booking.getamountbyvehicle] [T: 2764.285] [M: 23416.84] [ET: 5.096/2739.183] [MU: 0.84/23416.66] 
	SQL: SELECT cts_category FROM cities_stats WHERE cts_cty_id = :cityId 
	 [params: {"cityId":"30804"}]
2024/10/24 00:03:18 [profile] [profile.module.admin.controller.booking.getamountbyvehicle] [T: 2774.339] [M: 23419.13] [ET: 9.917/2749.208] [MU: 0.96/23418.82] 
	SQL: SELECT GROUP_CONCAT(adn_id) as ids FROM addon_service_class_rule INNER JOIN addons ON ascr_adn_id = adn_id AND adn_active=1 AND ascr_active = 1 WHERE ascr_cty_category=:cat AND ascr_scc_id=:class 
	 [params: {"cat":2,"class":"2"}]
2024/10/24 00:03:18 [profile] [profile.module.admin.controller.booking.getamountbyvehicle] [T: 2779.077] [M: 23436] [ET: 3.027/2753.953] [MU: 3.53/23435.13] 
	SQL: SELECT route.rut_id, route.rut_from_city_id start,route.rut_to_city_id end, NULL AS fromAlias, NULL AS toAlias, rut_name,route.rut_estm_distance as quotedDistance, route.rut_estm_distance as rateDistance,
                                0 AS extraDistance, 
								0 AS extraStartDistance,
								1 as rank,
                                0 as startTime, 0 as endTime, route.rut_estm_time,rate.*
                        FROM   route
						INNER JOIN rate ON rut_id = rate.rte_route_id AND rate.rte_status=1 AND rate.rte_vendor_amount>0 AND rate.rte_vehicletype_id=:cabType
                        WHERE  rut_active = 1 AND route.rut_from_city_id =:fromCity AND route.rut_to_city_id =:toCity 
	 [params: {"cabType":"14","fromCity":"30804","toCity":"30372"}]
2024/10/24 00:03:18 [profile] [profile.module.admin.controller.booking.getamountbyvehicle] [T: 2786.795] [M: 23439.25] [ET: 7.392/2761.683] [MU: 0.86/23439.03] 
	SQL: SELECT rut_id FROM `route` WHERE rut_from_city_id =:fromCty AND rut_to_city_id=:toCty AND rut_active = 1 
	 [params: {"fromCty":"30804","toCty":0}]
2024/10/24 00:03:18 [profile] [profile.module.admin.controller.booking.getamountbyvehicle] [T: 2787.789] [M: 23446.53] [ET: 0.695/2762.665] [MU: 2.97/23446.09] 
	SQL: SELECT stt_id, GROUP_CONCAT(DISTINCT zct_zon_id) zones, stt_zone AS region
				FROM   cities
				INNER JOIN states ON cty_state_id = stt_id AND stt_active = '1'
				LEFT JOIN zone_cities ON cty_id = zct_cty_id AND zct_active = 1
				LEFT JOIN zones ON zon_id=zct_zon_id AND zon_active=1
				WHERE  cty_id =:city AND cty_active = 1 
	 [params: {"city":"30804"}]
2024/10/24 00:03:18 [profile] [profile.module.admin.controller.booking.getamountbyvehicle] [T: 2788.522] [M: 23474.7] [ET: 0.579/2763.432] [MU: 22.05/23474.08] 
	SQL: SELECT area_price_rule.*,
					CASE area_price_rule.apr_area_type
					WHEN 1 THEN 10
					WHEN 2 THEN 5
					WHEN 3 THEN 20   
					ELSE 1
					END AS rank
				FROM area_price_rule 
				WHERE apr_active=1 AND ((apr_area_type = 3 AND apr_area_id IN (:gp20)) OR (apr_area_type = 2 AND apr_area_id IN (:gp21)) OR (apr_area_type = 4 AND apr_area_id IN (:gp22)) OR (apr_area_type = 1 AND apr_area_id IN (:gp19))) AND apr_cab_type=:cab ORDER BY rank DESC 
	 [params: {":gp19":"31",":gp20":"30804",":gp21":"105",":gp22":"1","cab":"14"}]
2024/10/24 00:03:18 [profile] [profile.module.admin.controller.booking.getamountbyvehicle] [T: 2789.6] [M: 23460.69] [ET: 0.497/2764.504] [MU: 3.33/23460.25] 
	SQL: SELECT stt_id, GROUP_CONCAT(DISTINCT zct_zon_id) zones, stt_zone AS region
				FROM   cities
				INNER JOIN states ON cty_state_id = stt_id AND stt_active = '1'
				LEFT JOIN zone_cities ON cty_id = zct_cty_id AND zct_active = 1
				LEFT JOIN zones ON zon_id=zct_zon_id AND zon_active=1
				WHERE  cty_id =:city AND cty_active = 1 
	 [params: {"city":"30804"}]
2024/10/24 00:03:18 [profile] [profile.module.admin.controller.booking.getamountbyvehicle] [T: 2790.404] [M: 23491.72] [ET: 0.676/2765.298] [MU: 24.91/23491.09] 
	SQL: SELECT area_price_rule.*,
					CASE area_price_rule.apr_area_type
					WHEN 1 THEN 10
					WHEN 2 THEN 5
					WHEN 3 THEN 20   
					ELSE 1
					END AS rank
				FROM area_price_rule 
				WHERE apr_active=1 AND ((apr_area_type = 3 AND apr_area_id IN (:gp24)) OR (apr_area_type = 2 AND apr_area_id IN (:gp25)) OR (apr_area_type = 4 AND apr_area_id IN (:gp26)) OR (apr_area_type = 1 AND apr_area_id IN (:gp23))) AND apr_cab_type=:cab ORDER BY rank DESC 
	 [params: {":gp23":"31",":gp24":"30804",":gp25":"105",":gp26":"1","cab":"1"}]
2024/10/24 00:03:18 [profile] [profile.module.admin.controller.booking.getamountbyvehicle] [T: 2791.859] [M: 23477.66] [ET: 0.493/2766.76] [MU: 3.34/23477.23] 
	SQL: SELECT stt_id, GROUP_CONCAT(DISTINCT zct_zon_id) zones, stt_zone AS region
				FROM   cities
				INNER JOIN states ON cty_state_id = stt_id AND stt_active = '1'
				LEFT JOIN zone_cities ON cty_id = zct_cty_id AND zct_active = 1
				LEFT JOIN zones ON zon_id=zct_zon_id AND zon_active=1
				WHERE  cty_id =:city AND cty_active = 1 
	 [params: {"city":"30804"}]
2024/10/24 00:03:18 [profile] [profile.module.admin.controller.booking.getamountbyvehicle] [T: 2794.3] [M: 23487.98] [ET: 2.289/2769.186] [MU: 3.57/23487.11] 
	SQL: SELECT service_class_rule.*,
					CASE 
						WHEN scr_area_type=1 THEN 10
						WHEN scr_area_type=2 THEN 5
						WHEN scr_area_type=3 THEN 20
						WHEN scr_area_type=4 THEN 3
						WHEN scr_area_type=5 THEN 25
						ELSE 1
					END AS rank FROM service_class_rule
				INNER JOIN svc_class_vhc_cat scv ON scv.scv_id = scr_scv_id
				WHERE ((scr_area_type = 3 AND scr_area_id IN (:gp28)) OR (scr_area_type = 2 AND scr_area_id IN (:gp29)) OR (scr_area_type = 4 AND scr_area_id IN (:gp30)) OR (scr_area_type = 1 AND scr_area_id IN (:gp27)) OR scr_area_type IS NULL) 
					AND scv.scv_id=:scv_id AND scr_active=1
				ORDER BY rank DESC
						 
	 [params: {":gp27":"31",":gp28":"30804",":gp29":"105",":gp30":"1","scv_id":"14"}]
2024/10/24 00:03:22 [profile] [profile.module.admin.controller.booking.getamountbyvehicle] [T: 6487.021] [M: 23564.27] [ET: 3691.302/6461.902] [MU: 0.74/23556.27] 
	SQL: CALL prcCreateTempTable(:tableName, :sql) 
	 [params: {"tableName":"nearest_route_30804_30372","sql":"(INDEX indx_nearest_rt_rutid (rut_id)) \r\n\t\t\tSELECT routeAlias.rut_id, routeAlias.rut_from_city_id start, routeAlias.rut_to_city_id end, routeFrom.rut_name as fromAlias, \r\n\t\t\t\tNULL AS toAlias, routeAlias.rut_name, route.rut_estm_distance as quotedDistance, routeAlias.rut_estm_distance as rateDistance, \r\n\t\t\t\t\t(IFNULL(route.rut_actual_distance, route.rut_estm_distance) + IFNULL(routeFrom.rut_actual_distance, routeFrom.rut_estm_distance) \r\n\t\t\t\t\t\t- IFNULL(routeAlias.rut_actual_distance, routeAlias.rut_estm_distance)) AS extraDistance, \r\n\t\t\t\tIFNULL(routeFrom.rut_actual_distance, routeFrom.rut_estm_distance) AS extraStartDistance, \r\n\t\t\t\t0 as rank, routeFrom.rut_estm_time as startTime, 0 as endTime, route.rut_estm_time, \r\n\t\t\t\t(IFNULL(routeFrom.rut_actual_distance, routeFrom.rut_estm_distance) + IFNULL(routeAlias.rut_actual_distance, routeAlias.rut_estm_distance)) as extraTravelDistance\r\n\t\t\tFROM route\r\n\t\t\tINNER JOIN route routeFrom ON routeFrom.rut_to_city_id = route.rut_from_city_id AND route.rut_from_city_id=30804 \r\n\t\t\t\tAND route.rut_to_city_id=30372 AND routeFrom.rut_to_city_id=30804 AND routeFrom.rut_estm_distance < 50 \r\n\t\t\t\tAND routeFrom.rut_from_city_id<>routeFrom.rut_to_city_id AND route.rut_active=1 AND routeFrom.rut_active=1\r\n\t\t\tINNER JOIN route routeAlias ON (routeAlias.rut_from_city_id = routeFrom.rut_from_city_id) \r\n\t\t\t\t\t\tAND (routeAlias.rut_to_city_id=route.rut_to_city_id) AND routeAlias.rut_active = 1 \r\n\t\t\tUNION\r\n\t\t\tSELECT routeAlias.rut_id, routeAlias.rut_from_city_id start, routeAlias.rut_to_city_id end, NULL, routeTo.rut_name, routeAlias.rut_name, \r\n\t\t\t\troute.rut_estm_distance as quotedDistance, routeAlias.rut_estm_distance as rateDistance, \r\n\t\t\t\t\t(IFNULL(route.rut_actual_distance, route.rut_estm_distance) + IFNULL(routeTo.rut_actual_distance, routeTo.rut_estm_distance) \r\n\t\t\t\t\t\t\t- IFNULL(routeAlias.rut_actual_distance, routeAlias.rut_estm_distance)) AS extraDistance, \r\n\t\t\t\t0 AS extraStartDistance, 0, 0 as startTime, routeTo.rut_estm_time as endTime, route.rut_estm_time, \r\n\t\t\t\t(IFNULL(routeTo.rut_actual_distance, routeTo.rut_estm_distance) + IFNULL(routeAlias.rut_actual_distance, routeAlias.rut_estm_distance)) as extraTravelDistance\r\n\t\t\tFROM   route\r\n\t\t\tINNER JOIN route routeTo ON routeTo.rut_from_city_id = route.rut_to_city_id AND route.rut_from_city_id = 30804 AND route.rut_to_city_id=30372 \r\n\t\t\t\tAND routeTo.rut_from_city_id=30372\r\n\t\t\t\tAND route.rut_active = 1 AND routeTo.rut_active = 1 AND routeTo.rut_estm_distance < 50 AND routeTo.rut_from_city_id<>routeTo.rut_to_city_id\r\n\t\t\tINNER JOIN route routeAlias ON (routeAlias.rut_from_city_id = route.rut_from_city_id) \r\n\t\t\t   AND (routeAlias.rut_to_city_id = routeTo.rut_to_city_id) AND routeAlias.rut_active = 1 \r\n\t\t\tUNION\r\n\t\t\tSELECT routeAlias.rut_id, routeAlias.rut_from_city_id start, routeAlias.rut_to_city_id end, \r\n\t\t\t\trouteFrom.rut_name, routeTo.rut_name, routeAlias.rut_name, \r\n\t\t\t\troute.rut_estm_distance as quotedDistance, routeAlias.rut_estm_distance as rateDistance, \r\n\t\t\t\t\t(IFNULL(route.rut_actual_distance, route.rut_estm_distance) + IFNULL(routeFrom.rut_actual_distance, routeFrom.rut_estm_distance) \r\n\t\t\t\t\t+ IFNULL(routeTo.rut_actual_distance, routeTo.rut_estm_distance) - IFNULL(routeAlias.rut_actual_distance, routeAlias.rut_estm_distance)) \r\n\t\t\t\tAS extraDistance, IFNULL(routeFrom.rut_actual_distance, routeFrom.rut_estm_distance) AS extraStartDistance, 0, \r\n\t\t\t\trouteFrom.rut_estm_time as startTime, routeTo.rut_estm_time as endTime, route.rut_estm_time, \r\n\t\t\t\t(IFNULL(routeFrom.rut_actual_distance, routeFrom.rut_estm_distance) + IFNULL(routeTo.rut_actual_distance, routeTo.rut_estm_distance) + IFNULL(routeAlias.rut_actual_distance, routeAlias.rut_estm_distance)) as extraTravelDistance\r\n\t\t\tFROM   route\r\n\t\t\tINNER JOIN route routeFrom ON routeFrom.rut_to_city_id = route.rut_from_city_id AND route.rut_from_city_id=30804 \r\n\t\t\t\t\tAND route.rut_to_city_id=30372 AND routeFrom.rut_to_city_id=30804 AND routeFrom.rut_estm_distance < 50 AND routeFrom.rut_from_city_id <> routeFrom.rut_to_city_id\r\n\t\t\t\t\tAND route.rut_active=1 AND routeFrom.rut_active=1\r\n\t\t\tINNER JOIN route routeTo ON routeTo.rut_from_city_id = route.rut_to_city_id AND routeTo.rut_estm_distance < 50 \r\n\t\t\t\t\tAND routeTo.rut_from_city_id=30372 AND routeTo.rut_from_city_id<>routeTo.rut_to_city_id\r\n\t\t\tINNER JOIN route routeAlias ON (routeAlias.rut_from_city_id = routeFrom.rut_from_city_id) \r\n\t\t\t\t\tAND (routeAlias.rut_to_city_id=routeTo.rut_to_city_id) AND routeAlias.rut_active = 1 AND routeAlias.rut_from_city_id=30804 "}]
2024/10/24 00:03:22 [profile] [profile.module.admin.controller.booking.getamountbyvehicle] [T: 6487.431] [M: 23574.13] [ET: 0.325/6462.337] [MU: 0.88/23573.98] 
	SQL: SELECT GROUP_CONCAT(rut_id) as rutIds FROM nearest_route_30804_30372 
	 [params: []]
2024/10/24 00:03:22 [profile] [profile.module.admin.controller.booking.getamountbyvehicle] [T: 6491.795] [M: 23572.16] [ET: 2.75/6466.669] [MU: 2.77/23571.72] 
	SQL: SELECT *, (rte_vendor_amount + extraDistance * 9.5) as totalCost FROM (SELECT * FROM nearest_route_30804_30372) a
					INNER JOIN rate ON a.rut_id = rate.rte_route_id AND rte_status=1 AND rate.rte_vehicletype_id=:cabType AND rate.rte_vendor_amount <>0
					WHERE 1 ORDER BY rank DESC, totalCost ASC LIMIT 0,1 
	 [params: {"cabType":"14"}]
2024/10/24 00:03:29 [profile] [profile.module.admin.controller.booking.getamountbyvehicle] [T: 13520.651] [M: 23580.18] [ET: 7028.716/13495.544] [MU: 0.74/23578.18] 
	SQL: CALL prcCreateTempTable(:tableName, :sql) 
	 [params: {"tableName":"getNearestRoute_30804_30372_70","sql":"(INDEX getNearestRoute_30804_30372_70_index_rut_id (rut_id))\r\n\t\t\t\t\t\tSELECT routeAlias.rut_id, routeAlias.rut_from_city_id AS start, routeAlias.rut_to_city_id AS end,\r\n\t\t\t\t\t\t\t\trouteFrom.rut_name AS fromAlias, NULL AS toAlias, routeAlias.rut_name, route.rut_estm_distance AS quotedDistance,\r\n\t\t\t\t\t\t\t\trouteAlias.rut_estm_distance AS rateDistance, \r\n\t\t\t\t\t\t\t\t(IFNULL(route.rut_actual_distance, route.rut_estm_distance) + IFNULL(routeFrom.rut_actual_distance, routeFrom.rut_estm_distance)\r\n\t\t\t\t\t\t\t\t\t - IFNULL(routeAlias.rut_actual_distance, routeAlias.rut_estm_distance)) AS extraDistance,\r\n\t\t\t\t\t\t\t\tIFNULL(routeFrom.rut_actual_distance, routeFrom.rut_estm_distance) AS extraStartDistance,\r\n\t\t\t\t\t\t\t\t0 AS rank, routeFrom.rut_estm_time AS startTime, 0 AS endTime, route.rut_estm_time, \r\n\t\t\t\t\t\t\t\t(IFNULL(routeFrom.rut_actual_distance, routeFrom.rut_estm_distance) + IFNULL(routeAlias.rut_actual_distance, routeAlias.rut_estm_distance)) AS extraTravelDistance\r\n\t\t\t\t\t\tFROM   route\r\n\t\t\t\t\t\tINNER JOIN route routeTo ON routeTo.rut_to_city_id=route.rut_from_city_id\r\n\t\t\t\t\t\t\t\tAND route.rut_from_city_id=30804 AND routeTo.rut_active=1\r\n\t\t\t\t\t\t\t\tAND routeTo.rut_estm_distance<70 AND route.rut_active=1\r\n\t\t\t\t\t\tINNER JOIN route routeFrom ON routeFrom.rut_from_city_id=route.rut_to_city_id\r\n\t\t\t\t\t\t\t\tAND route.rut_to_city_id=30372 AND routeFrom.rut_active = 1\r\n\t\t\t\t\t\t\t\tAND routeFrom.rut_estm_distance<70 AND route.rut_active = 1\r\n\t\t\t\t\t\tINNER JOIN route routeAlias ON routeAlias.rut_to_city_id=routeFrom.rut_to_city_id\r\n\t\t\t\t\t\t\tAND routeAlias.rut_from_city_id=routeTo.rut_from_city_id AND routeAlias.rut_active = 1"}]
2024/10/24 00:03:29 [profile] [profile.module.admin.controller.booking.getamountbyvehicle] [T: 13523.379] [M: 23585.49] [ET: 2.607/13498.255] [MU: 2.46/23584.87] 
	SQL: SELECT *, (rte_vendor_amount + extradistance * 9.5 ) AS totalCost, 
						ABS(quotedDistance-rateDistance) AS extraChargeableDistance
					FROM getNearestRoute_30804_30372_70 a
					INNER JOIN rate ON a.rut_id=rate.rte_route_id AND rte_status=1 
						AND rate.rte_vehicletype_id=:cabType AND rate.rte_vendor_amount <> 0
					WHERE  1
					ORDER  BY rank DESC, extraStartDistance, extraChargeableDistance ASC, totalcost ASC
					LIMIT  0, 1 
	 [params: {"cabType":"14"}]
2024/10/24 00:03:29 [profile] [profile.module.admin.controller.booking.getamountbyvehicle] [T: 13530.997] [M: 23602.36] [ET: 0.775/13505.877] [MU: 5.2/23601.48] 
	SQL: SELECT route.rut_id, route.rut_from_city_id start,route.rut_to_city_id end, NULL AS fromAlias, NULL AS toAlias, rut_name,route.rut_estm_distance as quotedDistance, route.rut_estm_distance as rateDistance,
                                0 AS extraDistance, 
								0 AS extraStartDistance,
								1 as rank,
                                0 as startTime, 0 as endTime, route.rut_estm_time,rate.*
                        FROM   route
						INNER JOIN rate ON rut_id = rate.rte_route_id AND rate.rte_status=1 AND rate.rte_vendor_amount>0 AND rate.rte_vehicletype_id=:cabType
                        WHERE  rut_active = 1 AND route.rut_from_city_id =:fromCity AND route.rut_to_city_id =:toCity 
	 [params: {"cabType":"1","fromCity":"30804","toCity":"30372"}]
2024/10/24 00:03:29 [profile] [profile.module.admin.controller.booking.getamountbyvehicle] [T: 13596.773] [M: 23609.63] [ET: 65.394/13571.681] [MU: 0.9/23609.38] 
	SQL: SELECT rut_id FROM `route` WHERE rut_from_city_id =:fromCty AND rut_to_city_id=:toCty AND rut_active = 1 
	 [params: {"fromCty":"30804","toCty":"30372"}]
2024/10/24 00:03:29 [profile] [profile.module.admin.controller.booking.getamountbyvehicle] [T: 13597.95] [M: 23628.22] [ET: 0.53/13572.863] [MU: 3.33/23627.78] 
	SQL: SELECT stt_id, GROUP_CONCAT(DISTINCT zct_zon_id) zones, stt_zone AS region
				FROM   cities
				INNER JOIN states ON cty_state_id = stt_id AND stt_active = '1'
				LEFT JOIN zone_cities ON cty_id = zct_cty_id AND zct_active = 1
				LEFT JOIN zones ON zon_id=zct_zon_id AND zon_active=1
				WHERE  cty_id =:city AND cty_active = 1 
	 [params: {"city":"30804"}]
2024/10/24 00:03:29 [profile] [profile.module.admin.controller.booking.getamountbyvehicle] [T: 13608.861] [M: 23638.77] [ET: 10.729/13583.743] [MU: 3.53/23637.89] 
	SQL: SELECT service_class_rule.*,
					CASE 
						WHEN scr_area_type=1 THEN 10
						WHEN scr_area_type=2 THEN 5
						WHEN scr_area_type=3 THEN 20
						WHEN scr_area_type=4 THEN 3
						WHEN scr_area_type=5 THEN 25
						ELSE 1
					END AS rank FROM service_class_rule
				INNER JOIN svc_class_vhc_cat scv ON scv.scv_id = scr_scv_id
				WHERE ((scr_area_type = 3 AND scr_area_id IN (:gp33)) OR (scr_area_type = 5 AND scr_area_id IN (:gp31)) OR (scr_area_type = 2 AND scr_area_id IN (:gp34)) OR (scr_area_type = 4 AND scr_area_id IN (:gp35)) OR (scr_area_type = 1 AND scr_area_id IN (:gp32)) OR scr_area_type IS NULL) 
					AND scv.scv_id=:scv_id AND scr_active=1
				ORDER BY rank DESC
						 
	 [params: {":gp31":"4181",":gp32":"31",":gp33":"4181",":gp34":"105",":gp35":"1","scv_id":"14"}]
2024/10/24 00:03:29 [profile] [profile.module.admin.controller.booking.getamountbyvehicle] [T: 13609.969] [M: 23637.36] [ET: 0.566/13584.857] [MU: 0.9/23637.11] 
	SQL: SELECT rut_id FROM `route` WHERE rut_from_city_id =:fromCty AND rut_to_city_id=:toCty AND rut_active = 1 
	 [params: {"fromCty":"30804","toCty":"30372"}]
2024/10/24 00:03:29 [profile] [profile.module.admin.controller.booking.getamountbyvehicle] [T: 13611.536] [M: 23649.7] [ET: 0.641/13586.421] [MU: 2.97/23649.27] 
	SQL: SELECT stt_id, GROUP_CONCAT(DISTINCT zct_zon_id) zones, stt_zone AS region
				FROM   cities
				INNER JOIN states ON cty_state_id = stt_id AND stt_active = '1'
				LEFT JOIN zone_cities ON cty_id = zct_cty_id AND zct_active = 1
				LEFT JOIN zones ON zon_id=zct_zon_id AND zon_active=1
				WHERE  cty_id =:city AND cty_active = 1 
	 [params: {"city":"30804"}]
2024/10/24 00:03:29 [profile] [profile.module.admin.controller.booking.getamountbyvehicle] [T: 13612.344] [M: 23678.63] [ET: 0.636/13587.225] [MU: 22.41/23677.88] 
	SQL: SELECT area_price_rule.*,
					CASE area_price_rule.apr_area_type
					WHEN 1 THEN 10
					WHEN 2 THEN 5
					WHEN 3 THEN 20   
					ELSE 1
					END AS rank
				FROM area_price_rule 
				WHERE apr_active=1 AND ((apr_area_type = 3 AND apr_area_id IN (:gp38)) OR (apr_area_type = 5 AND apr_area_id IN (:gp36)) OR (apr_area_type = 2 AND apr_area_id IN (:gp39)) OR (apr_area_type = 4 AND apr_area_id IN (:gp40)) OR (apr_area_type = 1 AND apr_area_id IN (:gp37))) AND apr_cab_type=:cab ORDER BY rank DESC 
	 [params: {":gp36":"4181",":gp37":"31",":gp38":"30804",":gp39":"105",":gp40":"1","cab":"14"}]
2024/10/24 00:03:29 [profile] [profile.module.admin.controller.booking.getamountbyvehicle] [T: 13614.596] [M: 23665.89] [ET: 0.617/13589.465] [MU: 3.34/23665.45] 
	SQL: SELECT stt_id, GROUP_CONCAT(DISTINCT zct_zon_id) zones, stt_zone AS region
				FROM   cities
				INNER JOIN states ON cty_state_id = stt_id AND stt_active = '1'
				LEFT JOIN zone_cities ON cty_id = zct_cty_id AND zct_active = 1
				LEFT JOIN zones ON zon_id=zct_zon_id AND zon_active=1
				WHERE  cty_id =:city AND cty_active = 1 
	 [params: {"city":"30804"}]
2024/10/24 00:03:29 [profile] [profile.module.admin.controller.booking.getamountbyvehicle] [T: 13616.899] [M: 23676.44] [ET: 2.126/13591.803] [MU: 3.54/23675.56] 
	SQL: SELECT service_class_rule.*,
					CASE 
						WHEN scr_area_type=1 THEN 10
						WHEN scr_area_type=2 THEN 5
						WHEN scr_area_type=3 THEN 20
						WHEN scr_area_type=4 THEN 3
						WHEN scr_area_type=5 THEN 25
						ELSE 1
					END AS rank FROM service_class_rule
				INNER JOIN svc_class_vhc_cat scv ON scv.scv_id = scr_scv_id
				WHERE ((scr_area_type = 3 AND scr_area_id IN (:gp43)) OR (scr_area_type = 5 AND scr_area_id IN (:gp41)) OR (scr_area_type = 2 AND scr_area_id IN (:gp44)) OR (scr_area_type = 4 AND scr_area_id IN (:gp45)) OR (scr_area_type = 1 AND scr_area_id IN (:gp42)) OR scr_area_type IS NULL) 
					AND scv.scv_id=:scv_id AND scr_active=1
				ORDER BY rank DESC
						 
	 [params: {":gp41":"4181",":gp42":"31",":gp43":"4181",":gp44":"105",":gp45":"1","scv_id":"14"}]
2024/10/24 00:03:29 [profile] [profile.module.admin.controller.booking.getamountbyvehicle] [T: 13618.026] [M: 23681.19] [ET: 0.735/13592.91] [MU: 3.85/23680.31] 
	SQL: SELECT *
				FROM 
                   (
							SELECT cities_stats.cts_cty_id AS vnd_city, cities_stats.cts_vnd_cnt AS cnt, 0 AS distance
							FROM cities_stats
							WHERE     cities_stats.cts_cty_id = :city	AND cities_stats.cts_vnd_cnt >= 2

							UNION
							SELECT cities_stats.cts_cty_id AS vnd_city, cities_stats.cts_vnd_cnt AS cnt, IFNULL(rut_actual_distance, rut_estm_distance) AS distance
							FROM route
							INNER JOIN cities_stats  ON  cities_stats.cts_cty_id = route.rut_from_city_id AND cities_stats.cts_vnd_cnt >= 2 AND IFNULL(rut_actual_distance, rut_estm_distance) < 40
							WHERE rut_to_city_id = :city
							GROUP BY cities_stats.cts_cty_id   
                    ) a
				ORDER BY DISTANCE ASC 
	 [params: {":city":"30804"}]
2024/10/24 00:03:29 [profile] [profile.module.admin.controller.booking.getamountbyvehicle] [T: 13618.714] [M: 23689] [ET: 0.536/13593.605] [MU: 4.21/23688.13] 
	SQL: SELECT *
				FROM 
                   (
							SELECT cities_stats.cts_cty_id AS vnd_city, cities_stats.cts_vnd_cnt AS cnt, 0 AS distance
							FROM cities_stats
							WHERE     cities_stats.cts_cty_id = :city	AND cities_stats.cts_vnd_cnt >= 2

							UNION
							SELECT cities_stats.cts_cty_id AS vnd_city, cities_stats.cts_vnd_cnt AS cnt, IFNULL(rut_actual_distance, rut_estm_distance) AS distance
							FROM route
							INNER JOIN cities_stats  ON  cities_stats.cts_cty_id = route.rut_from_city_id AND cities_stats.cts_vnd_cnt >= 2 AND IFNULL(rut_actual_distance, rut_estm_distance) < 40
							WHERE rut_to_city_id = :city
							GROUP BY cities_stats.cts_cty_id   
                    ) a
				ORDER BY DISTANCE ASC 
	 [params: {":city":"30372"}]
2024/10/24 00:03:29 [profile] [profile.module.admin.controller.booking.getamountbyvehicle] [T: 13619.186] [M: 23693.14] [ET: 0.356/13594.085] [MU: 2.97/23693.03] 
	BookingRoute::calculateDistance
2024/10/24 00:03:29 [profile] [profile.module.admin.controller.booking.getamountbyvehicle] [T: 13624.22] [M: 23699.52] [ET: 4.773/13599.118] [MU: 2.4/23699.14] 
	SQL: SELECT *
				FROM   partner_rate prt 
				JOIN route rut ON prt.prt_route_id = rut.rut_id AND rut.rut_active = 1
				AND  rut.rut_from_city_id  = 30804 
				AND  rut.rut_to_city_id  = 30372 
				 WHERE prt_vehicletype_id = 14
				AND prt_partner_id = 1249
				AND prt_status = 1
				 
	 [params: []]
2024/10/24 00:03:29 [profile] [profile.module.admin.controller.booking.getamountbyvehicle] [T: 13625.285] [M: 23704.74] 
+++++++++++++++++++++++++++++++++++++++++++++++++++++++++++profile models.RouteRates.calculateDriverAllowance START++++++++++++++++++++++++++++++++++++++++++++++++++
	URL: [POST]/aaohome/booking/getamountbyvehicle
	User IP: 192.168.255.12
	Referrer: http://localhost:84/aaohome/booking/create
	POST: {"fromCity":"30804","toCity":"30372","cabType":"1","tripDistance":"","tripDuration":"","multiCityData":"","bookingType":"1","pickupAddress":"","pickupDate":"31\/10\/2024","pickupTime":"04:00 AM","isGozonow":"0","minTripDistance":"0","sccId":"0","tripUser":"1","YII_CSRF_TOKEN":"N3VxRE1WeG9UeHk5UWFBUFpPT216eWVyY0xWTVpoTkcUoJ2aBoup1fU2M5E4ePVZVcUNlKiYZZysUqEklNiKWw==","isAirportPickup":"1"}
	RawBody: fromCity=30804&toCity=30372&cabType=1&tripDistance=&tripDuration=&multiCityData=&bookingType=1&pickupAddress=&pickupDate=31%2F10%2F2024&pickupTime=04%3A00+AM&isGozonow=0&minTripDistance=0&sccId=0&tripUser=1&YII_CSRF_TOKEN=N3VxRE1WeG9UeHk5UWFBUFpPT216eWVyY0xWTVpoTkcUoJ2aBoup1fU2M5E4ePVZVcUNlKiYZZysUqEklNiKWw%3D%3D&isAirportPickup=1
	[UserID: 30] [UserType: 4]
2024/10/24 00:03:29 [profile] [profile.module.admin.controller.booking.getamountbyvehicle] [T: 13626.204] [M: 23724.3] [ET: 1.507/13601.113] [MU: 20.77/23724.2] 
	models.RouteRates.calculateDriverAllowance
2024/10/24 00:03:29 [profile] [profile.module.admin.controller.booking.getamountbyvehicle] [T: 13626.251] [M: 23725.98] 
============================================================Profile models.RouteRates.calculateDriverAllowance DONE==================================================
2024/10/24 00:03:29 [profile] [profile.module.admin.controller.booking.getamountbyvehicle] [T: 13646.234] [M: 23739.45] [ET: 19.817/13621.116] [MU: 2.99/23736.95] 
	SQL: SELECT * FROM (
                                SELECT *, FLOOR(IF((cpm_value_type=1),(cpm_value+15157),(IF((cpm_value_type=2),(15157+(15157*(cpm_value/100))),cpm_value))))amount,
                                    ((SELECT GROUP_CONCAT(z2.zct_zon_id) as srcZones FROM zone_cities z2
                                        WHERE z2.zct_active=1 AND zct_cty_id=30804 GROUP BY z2.zct_cty_id)) as srcZones,
                                    (SELECT GROUP_CONCAT(z2.zct_zon_id) as srcZones FROM zone_cities z2
                                        WHERE z2.zct_active=1 AND zct_cty_id=30372 GROUP BY z2.zct_cty_id) as dstZones,
                                    (
                                    IF(cpm_agent_id IS NOT NULL, 1,0) +
                                    IF(cpm_source_city IS NOT NULL,54,0) +
                                    IF(cpm_destination_city IS NOT NULL,54,0) +
                                    IF(cpm_source_zone IS NOT NULL,18,0) +
                                    IF(cpm_destination_zone IS NOT NULL,18,0) +
                                    IF(cpm_source_state IS NOT NULL,6,0) +
                                    IF(cpm_destination_state IS NOT NULL,6,0) +
                                    IF(cpm_trip_type IS NOT NULL,1,0) +
                                    IF(cpm_vehicle_type IS NOT NULL,1,0)
                               ) as rank
                                FROM `channel_partner_markup`
                                WHERE cpm_active=1) a
                            WHERE
                            (
                                (cpm_source_city IS NULL OR cpm_source_city=30804) AND
                                (cpm_destination_city IS NULL OR cpm_destination_city=30372) AND
                                (cpm_source_zone IS NULL OR cpm_source_zone IN (srcZones)) AND
                                (cpm_destination_zone IS NULL OR cpm_destination_zone IN (dstZones))
                            )
                            AND cpm_agent_id = 1249
                            AND ('2024-10-31 04:00:00' BETWEEN cpm_from_date AND cpm_to_date)  AND (cpm_vehicle_type=14 OR cpm_vehicle_type IS NULL)  AND (cpm_trip_type=1 OR cpm_trip_type IS NULL)
                        ORDER BY rank DESC, amount DESC  LIMIT 1 
	 [params: []]
2024/10/24 00:03:29 [profile] [profile.module.admin.controller.booking.getamountbyvehicle] [T: 13653.768] [M: 23797.67] [ET: 29.159/13628.663] [MU: 94.6/23797.52] 
	RouteRates::calculate for CAB 14 2024-10-31 04:00:00 - Trip Type: 1 651035611
2024/10/24 00:03:29 [profile] [profile.module.admin.controller.booking.getamountbyvehicle] [T: 13654.064] [M: 23777.29] [ET: 10878.224/13628.975] [MU: 349.25/23777.13] 
	Quote::calculateOneWay  for CAB 14 Date: 2024-10-31 04:00:00
2024/10/24 00:03:29 [profile] [profile.module.admin.controller.booking.getamountbyvehicle] [T: 13654.452] [M: 23773.98] [ET: 0.292/13629.348] [MU: 0.9/23773.73] 
	SQL: SELECT svc.scv_scc_id FROM svc_class_vhc_cat svc
					-- INNER JOIN service_class scc ON svc.scv_scc_id=scc_id
					WHERE scv_id=:cabId 
	 [params: {"cabId":"14"}]
2024/10/24 00:03:29 [profile] [profile.module.admin.controller.booking.getamountbyvehicle] [T: 13654.559] [M: 23775.23] [ET: 10909.779/13629.46] [MU: 396.09/23775.13] 
	Quote For CabType: 14
2024/10/24 00:03:29 [profile] [profile.module.admin.controller.booking.getamountbyvehicle] [T: 13655.964] [M: 23785.2] [ET: 0.609/13630.847] [MU: 2.97/23784.77] 
	SQL: SELECT stt_id, GROUP_CONCAT(DISTINCT zct_zon_id) zones, stt_zone AS region
				FROM   cities
				INNER JOIN states ON cty_state_id = stt_id AND stt_active = '1'
				LEFT JOIN zone_cities ON cty_id = zct_cty_id AND zct_active = 1
				LEFT JOIN zones ON zon_id=zct_zon_id AND zon_active=1
				WHERE  cty_id =:city AND cty_active = 1 
	 [params: {"city":"30804"}]
2024/10/24 00:03:29 [profile] [profile.module.admin.controller.booking.getamountbyvehicle] [T: 13656.63] [M: 23791.02] [ET: 0.537/13631.519] [MU: 3.35/23790.59] 
	SQL: SELECT stt_id, GROUP_CONCAT(DISTINCT zct_zon_id) zones, stt_zone AS region
				FROM   cities
				INNER JOIN states ON cty_state_id = stt_id AND stt_active = '1'
				LEFT JOIN zone_cities ON cty_id = zct_cty_id AND zct_active = 1
				LEFT JOIN zones ON zon_id=zct_zon_id AND zon_active=1
				WHERE  cty_id =:city AND cty_active = 1 
	 [params: {"city":"30372"}]
2024/10/24 00:03:29 [profile] [profile.module.admin.controller.booking.getamountbyvehicle] [T: 13657.243] [M: 23793.96] [ET: 0.503/13632.146] [MU: 0.89/23793.71] 
	SQL: SELECT rut_id FROM `route` WHERE rut_from_city_id =:fromCty AND rut_to_city_id=:toCty AND rut_active = 1 
	 [params: {"fromCty":"30804","toCty":"30372"}]
2024/10/24 00:03:29 [profile] [profile.module.admin.controller.booking.getamountbyvehicle] [T: 13664.168] [M: 23826.31] [ET: 6.783/13639.047] [MU: 24.22/23824.81] 
	SQL: SELECT scv_id, CASE
				WHEN scr_area_type=1 AND scr_area_id IN (31) THEN 10
				WHEN scr_area_type=1 AND scr_area_id IN (0) THEN 9
				WHEN scr_area_type=2 AND scr_area_id IN (105) THEN 5
				WHEN scr_area_type=2 AND scr_area_id IN (86) THEN 4
				WHEN scr_area_type=3 AND scr_area_id IN (30804) THEN 20
				WHEN scr_area_type=3 AND scr_area_id IN (30372) THEN 19
				WHEN scr_area_type=4 AND scr_area_id IN (1) THEN 3
				WHEN scr_area_type=4 AND scr_area_id IN (2) THEN 2
				WHEN scr_area_type=5 THEN 25
				ELSE 1
				END AS rank, 
			scc_id, scr_is_allowed 
		FROM service_class_rule 
		INNER JOIN svc_class_vhc_cat ON scv_id = scr_scv_id AND scv_active = 1
		INNER JOIN service_class ON scv_scc_id = scc_id
		WHERE   ((scr_area_type = 1 AND scr_area_id IN (:gp46)) 
			OR (scr_area_type = 2 AND scr_area_id IN (:gp49,:gp50)) 
			OR (scr_area_type = 3 AND scr_area_id IN (:gp47,:gp48)) 
			OR (scr_area_type = 4 AND scr_area_id IN (:gp51,:gp52))
			OR (scr_area_type = 5 AND scr_area_id IN (4181))
			OR scr_area_type IS NULL)
			AND (scr_trip_type = :tripType OR scr_trip_type IS NULL) 
			AND scr_active = 1 AND scv_id IN (43)
		ORDER BY rank DESC
		 
	 [params: {":gp46":"31",":gp47":"30804",":gp48":"30372",":gp49":"105",":gp50":"86",":gp51":"1",":gp52":"2","tripType":"1"}]
2024/10/24 00:03:29 [profile] [profile.module.admin.controller.booking.getamountbyvehicle] [T: 13676.28] [M: 23806.49] [ET: 11.364/13651.161] [MU: 0.84/23806.3] 
	SQL: SELECT cts_category FROM cities_stats WHERE cts_cty_id = :cityId 
	 [params: {"cityId":"30804"}]
2024/10/24 00:03:29 [profile] [profile.module.admin.controller.booking.getamountbyvehicle] [T: 13684.524] [M: 23809.37] [ET: 8.068/13659.384] [MU: 0.96/23809.05] 
	SQL: SELECT GROUP_CONCAT(adn_id) as ids FROM addon_service_class_rule INNER JOIN addons ON ascr_adn_id = adn_id AND adn_active=1 AND ascr_active = 1 WHERE ascr_cty_category=:cat AND ascr_scc_id=:class 
	 [params: {"cat":2,"class":"4"}]
2024/10/24 00:03:29 [profile] [profile.module.admin.controller.booking.getamountbyvehicle] [T: 13688.562] [M: 23827.2] [ET: 2.485/13663.438] [MU: 3.53/23826.32] 
	SQL: SELECT route.rut_id, route.rut_from_city_id start,route.rut_to_city_id end, NULL AS fromAlias, NULL AS toAlias, rut_name,route.rut_estm_distance as quotedDistance, route.rut_estm_distance as rateDistance,
                                0 AS extraDistance, 
								0 AS extraStartDistance,
								1 as rank,
                                0 as startTime, 0 as endTime, route.rut_estm_time,rate.*
                        FROM   route
						INNER JOIN rate ON rut_id = rate.rte_route_id AND rate.rte_status=1 AND rate.rte_vendor_amount>0 AND rate.rte_vehicletype_id=:cabType
                        WHERE  rut_active = 1 AND route.rut_from_city_id =:fromCity AND route.rut_to_city_id =:toCity 
	 [params: {"cabType":"43","fromCity":"30804","toCity":"30372"}]
2024/10/24 00:03:29 [profile] [profile.module.admin.controller.booking.getamountbyvehicle] [T: 13696.107] [M: 23830.45] [ET: 7.227/13671.015] [MU: 0.87/23830.23] 
	SQL: SELECT rut_id FROM `route` WHERE rut_from_city_id =:fromCty AND rut_to_city_id=:toCty AND rut_active = 1 
	 [params: {"fromCty":"30804","toCty":0}]
2024/10/24 00:03:29 [profile] [profile.module.admin.controller.booking.getamountbyvehicle] [T: 13696.814] [M: 23837.73] [ET: 0.52/13671.728] [MU: 2.97/23837.29] 
	SQL: SELECT stt_id, GROUP_CONCAT(DISTINCT zct_zon_id) zones, stt_zone AS region
				FROM   cities
				INNER JOIN states ON cty_state_id = stt_id AND stt_active = '1'
				LEFT JOIN zone_cities ON cty_id = zct_cty_id AND zct_active = 1
				LEFT JOIN zones ON zon_id=zct_zon_id AND zon_active=1
				WHERE  cty_id =:city AND cty_active = 1 
	 [params: {"city":"30804"}]
2024/10/24 00:03:29 [profile] [profile.module.admin.controller.booking.getamountbyvehicle] [T: 13697.5] [M: 23865.9] [ET: 0.568/13672.415] [MU: 22.05/23865.27] 
	SQL: SELECT area_price_rule.*,
					CASE area_price_rule.apr_area_type
					WHEN 1 THEN 10
					WHEN 2 THEN 5
					WHEN 3 THEN 20   
					ELSE 1
					END AS rank
				FROM area_price_rule 
				WHERE apr_active=1 AND ((apr_area_type = 3 AND apr_area_id IN (:gp54)) OR (apr_area_type = 2 AND apr_area_id IN (:gp55)) OR (apr_area_type = 4 AND apr_area_id IN (:gp56)) OR (apr_area_type = 1 AND apr_area_id IN (:gp53))) AND apr_cab_type=:cab ORDER BY rank DESC 
	 [params: {":gp53":"31",":gp54":"30804",":gp55":"105",":gp56":"1","cab":"43"}]
2024/10/24 00:03:29 [profile] [profile.module.admin.controller.booking.getamountbyvehicle] [T: 13698.627] [M: 23852.24] [ET: 0.485/13673.521] [MU: 3.34/23851.8] 
	SQL: SELECT stt_id, GROUP_CONCAT(DISTINCT zct_zon_id) zones, stt_zone AS region
				FROM   cities
				INNER JOIN states ON cty_state_id = stt_id AND stt_active = '1'
				LEFT JOIN zone_cities ON cty_id = zct_cty_id AND zct_active = 1
				LEFT JOIN zones ON zon_id=zct_zon_id AND zon_active=1
				WHERE  cty_id =:city AND cty_active = 1 
	 [params: {"city":"30804"}]
2024/10/24 00:03:29 [profile] [profile.module.admin.controller.booking.getamountbyvehicle] [T: 13700.716] [M: 23862.4] [ET: 1.972/13675.62] [MU: 3.41/23861.52] 
	SQL: SELECT service_class_rule.*,
					CASE 
						WHEN scr_area_type=1 THEN 10
						WHEN scr_area_type=2 THEN 5
						WHEN scr_area_type=3 THEN 20
						WHEN scr_area_type=4 THEN 3
						WHEN scr_area_type=5 THEN 25
						ELSE 1
					END AS rank FROM service_class_rule
				INNER JOIN svc_class_vhc_cat scv ON scv.scv_id = scr_scv_id
				WHERE ((scr_area_type = 3 AND scr_area_id IN (:gp58)) OR (scr_area_type = 2 AND scr_area_id IN (:gp59)) OR (scr_area_type = 4 AND scr_area_id IN (:gp60)) OR (scr_area_type = 1 AND scr_area_id IN (:gp57)) OR scr_area_type IS NULL) 
					AND scv.scv_id=:scv_id AND scr_active=1
				ORDER BY rank DESC
						 
	 [params: {":gp57":"31",":gp58":"30804",":gp59":"105",":gp60":"1","scv_id":"43"}]
2024/10/24 00:03:29 [profile] [profile.module.admin.controller.booking.getamountbyvehicle] [T: 14096.232] [M: 23890.26] [ET: 394.67/14071.107] [MU: 0.74/23882.26] 
	SQL: CALL prcCreateTempTable(:tableName, :sql) 
	 [params: {"tableName":"nearest_route_30804_30372","sql":"(INDEX indx_nearest_rt_rutid (rut_id)) \r\n\t\t\tSELECT routeAlias.rut_id, routeAlias.rut_from_city_id start, routeAlias.rut_to_city_id end, routeFrom.rut_name as fromAlias, \r\n\t\t\t\tNULL AS toAlias, routeAlias.rut_name, route.rut_estm_distance as quotedDistance, routeAlias.rut_estm_distance as rateDistance, \r\n\t\t\t\t\t(IFNULL(route.rut_actual_distance, route.rut_estm_distance) + IFNULL(routeFrom.rut_actual_distance, routeFrom.rut_estm_distance) \r\n\t\t\t\t\t\t- IFNULL(routeAlias.rut_actual_distance, routeAlias.rut_estm_distance)) AS extraDistance, \r\n\t\t\t\tIFNULL(routeFrom.rut_actual_distance, routeFrom.rut_estm_distance) AS extraStartDistance, \r\n\t\t\t\t0 as rank, routeFrom.rut_estm_time as startTime, 0 as endTime, route.rut_estm_time, \r\n\t\t\t\t(IFNULL(routeFrom.rut_actual_distance, routeFrom.rut_estm_distance) + IFNULL(routeAlias.rut_actual_distance, routeAlias.rut_estm_distance)) as extraTravelDistance\r\n\t\t\tFROM route\r\n\t\t\tINNER JOIN route routeFrom ON routeFrom.rut_to_city_id = route.rut_from_city_id AND route.rut_from_city_id=30804 \r\n\t\t\t\tAND route.rut_to_city_id=30372 AND routeFrom.rut_to_city_id=30804 AND routeFrom.rut_estm_distance < 50 \r\n\t\t\t\tAND routeFrom.rut_from_city_id<>routeFrom.rut_to_city_id AND route.rut_active=1 AND routeFrom.rut_active=1\r\n\t\t\tINNER JOIN route routeAlias ON (routeAlias.rut_from_city_id = routeFrom.rut_from_city_id) \r\n\t\t\t\t\t\tAND (routeAlias.rut_to_city_id=route.rut_to_city_id) AND routeAlias.rut_active = 1  AND routeAlias.rut_id IN (1337,1594,9446,9903,643960,2862879,3079674,4398055)\r\n\t\t\tUNION\r\n\t\t\tSELECT routeAlias.rut_id, routeAlias.rut_from_city_id start, routeAlias.rut_to_city_id end, NULL, routeTo.rut_name, routeAlias.rut_name, \r\n\t\t\t\troute.rut_estm_distance as quotedDistance, routeAlias.rut_estm_distance as rateDistance, \r\n\t\t\t\t\t(IFNULL(route.rut_actual_distance, route.rut_estm_distance) + IFNULL(routeTo.rut_actual_distance, routeTo.rut_estm_distance) \r\n\t\t\t\t\t\t\t- IFNULL(routeAlias.rut_actual_distance, routeAlias.rut_estm_distance)) AS extraDistance, \r\n\t\t\t\t0 AS extraStartDistance, 0, 0 as startTime, routeTo.rut_estm_time as endTime, route.rut_estm_time, \r\n\t\t\t\t(IFNULL(routeTo.rut_actual_distance, routeTo.rut_estm_distance) + IFNULL(routeAlias.rut_actual_distance, routeAlias.rut_estm_distance)) as extraTravelDistance\r\n\t\t\tFROM   route\r\n\t\t\tINNER JOIN route routeTo ON routeTo.rut_from_city_id = route.rut_to_city_id AND route.rut_from_city_id = 30804 AND route.rut_to_city_id=30372 \r\n\t\t\t\tAND routeTo.rut_from_city_id=30372\r\n\t\t\t\tAND route.rut_active = 1 AND routeTo.rut_active = 1 AND routeTo.rut_estm_distance < 50 AND routeTo.rut_from_city_id<>routeTo.rut_to_city_id\r\n\t\t\tINNER JOIN route routeAlias ON (routeAlias.rut_from_city_id = route.rut_from_city_id) \r\n\t\t\t   AND (routeAlias.rut_to_city_id = routeTo.rut_to_city_id) AND routeAlias.rut_active = 1  AND routeAlias.rut_id IN (1337,1594,9446,9903,643960,2862879,3079674,4398055)\r\n\t\t\tUNION\r\n\t\t\tSELECT routeAlias.rut_id, routeAlias.rut_from_city_id start, routeAlias.rut_to_city_id end, \r\n\t\t\t\trouteFrom.rut_name, routeTo.rut_name, routeAlias.rut_name, \r\n\t\t\t\troute.rut_estm_distance as quotedDistance, routeAlias.rut_estm_distance as rateDistance, \r\n\t\t\t\t\t(IFNULL(route.rut_actual_distance, route.rut_estm_distance) + IFNULL(routeFrom.rut_actual_distance, routeFrom.rut_estm_distance) \r\n\t\t\t\t\t+ IFNULL(routeTo.rut_actual_distance, routeTo.rut_estm_distance) - IFNULL(routeAlias.rut_actual_distance, routeAlias.rut_estm_distance)) \r\n\t\t\t\tAS extraDistance, IFNULL(routeFrom.rut_actual_distance, routeFrom.rut_estm_distance) AS extraStartDistance, 0, \r\n\t\t\t\trouteFrom.rut_estm_time as startTime, routeTo.rut_estm_time as endTime, route.rut_estm_time, \r\n\t\t\t\t(IFNULL(routeFrom.rut_actual_distance, routeFrom.rut_estm_distance) + IFNULL(routeTo.rut_actual_distance, routeTo.rut_estm_distance) + IFNULL(routeAlias.rut_actual_distance, routeAlias.rut_estm_distance)) as extraTravelDistance\r\n\t\t\tFROM   route\r\n\t\t\tINNER JOIN route routeFrom ON routeFrom.rut_to_city_id = route.rut_from_city_id AND route.rut_from_city_id=30804 \r\n\t\t\t\t\tAND route.rut_to_city_id=30372 AND routeFrom.rut_to_city_id=30804 AND routeFrom.rut_estm_distance < 50 AND routeFrom.rut_from_city_id <> routeFrom.rut_to_city_id\r\n\t\t\t\t\tAND route.rut_active=1 AND routeFrom.rut_active=1\r\n\t\t\tINNER JOIN route routeTo ON routeTo.rut_from_city_id = route.rut_to_city_id AND routeTo.rut_estm_distance < 50 \r\n\t\t\t\t\tAND routeTo.rut_from_city_id=30372 AND routeTo.rut_from_city_id<>routeTo.rut_to_city_id\r\n\t\t\tINNER JOIN route routeAlias ON (routeAlias.rut_from_city_id = routeFrom.rut_from_city_id) \r\n\t\t\t\t\tAND (routeAlias.rut_to_city_id=routeTo.rut_to_city_id) AND routeAlias.rut_active = 1 AND routeAlias.rut_from_city_id=30804  AND routeAlias.rut_id IN (1337,1594,9446,9903,643960,2862879,3079674,4398055)"}]
2024/10/24 00:03:29 [profile] [profile.module.admin.controller.booking.getamountbyvehicle] [T: 14101.071] [M: 23894.34] [ET: 4.704/14075.958] [MU: 2.16/23893.9] 
	SQL: SELECT *, (rte_vendor_amount + extraDistance * 9.5) as totalCost FROM (SELECT * FROM nearest_route_30804_30372) a
					INNER JOIN rate ON a.rut_id = rate.rte_route_id AND rte_status=1 AND rate.rte_vehicletype_id=:cabType AND rate.rte_vendor_amount <>0
					WHERE 1 ORDER BY rank DESC, totalCost ASC LIMIT 0,1 
	 [params: {"cabType":"43"}]
2024/10/24 00:03:29 [profile] [profile.module.admin.controller.booking.getamountbyvehicle] [T: 14102.181] [M: 23902.36] [ET: 0.956/14077.058] [MU: 0.74/23900.36] 
	SQL: CALL prcCreateTempTable(:tableName, :sql) 
	 [params: {"tableName":"getNearestRoute_30804_30372_70","sql":"(INDEX getNearestRoute_30804_30372_70_index_rut_id (rut_id))\r\n\t\t\t\t\t\tSELECT routeAlias.rut_id, routeAlias.rut_from_city_id AS start, routeAlias.rut_to_city_id AS end,\r\n\t\t\t\t\t\t\t\trouteFrom.rut_name AS fromAlias, NULL AS toAlias, routeAlias.rut_name, route.rut_estm_distance AS quotedDistance,\r\n\t\t\t\t\t\t\t\trouteAlias.rut_estm_distance AS rateDistance, \r\n\t\t\t\t\t\t\t\t(IFNULL(route.rut_actual_distance, route.rut_estm_distance) + IFNULL(routeFrom.rut_actual_distance, routeFrom.rut_estm_distance)\r\n\t\t\t\t\t\t\t\t\t - IFNULL(routeAlias.rut_actual_distance, routeAlias.rut_estm_distance)) AS extraDistance,\r\n\t\t\t\t\t\t\t\tIFNULL(routeFrom.rut_actual_distance, routeFrom.rut_estm_distance) AS extraStartDistance,\r\n\t\t\t\t\t\t\t\t0 AS rank, routeFrom.rut_estm_time AS startTime, 0 AS endTime, route.rut_estm_time, \r\n\t\t\t\t\t\t\t\t(IFNULL(routeFrom.rut_actual_distance, routeFrom.rut_estm_distance) + IFNULL(routeAlias.rut_actual_distance, routeAlias.rut_estm_distance)) AS extraTravelDistance\r\n\t\t\t\t\t\tFROM   route\r\n\t\t\t\t\t\tINNER JOIN route routeTo ON routeTo.rut_to_city_id=route.rut_from_city_id\r\n\t\t\t\t\t\t\t\tAND route.rut_from_city_id=30804 AND routeTo.rut_active=1\r\n\t\t\t\t\t\t\t\tAND routeTo.rut_estm_distance<70 AND route.rut_active=1\r\n\t\t\t\t\t\tINNER JOIN route routeFrom ON routeFrom.rut_from_city_id=route.rut_to_city_id\r\n\t\t\t\t\t\t\t\tAND route.rut_to_city_id=30372 AND routeFrom.rut_active = 1\r\n\t\t\t\t\t\t\t\tAND routeFrom.rut_estm_distance<70 AND route.rut_active = 1\r\n\t\t\t\t\t\tINNER JOIN route routeAlias ON routeAlias.rut_to_city_id=routeFrom.rut_to_city_id\r\n\t\t\t\t\t\t\tAND routeAlias.rut_from_city_id=routeTo.rut_from_city_id AND routeAlias.rut_active = 1"}]
2024/10/24 00:03:29 [profile] [profile.module.admin.controller.booking.getamountbyvehicle] [T: 14105.387] [M: 23907.63] [ET: 3.072/14080.282] [MU: 2.41/23907] 
	SQL: SELECT *, (rte_vendor_amount + extradistance * 9.5 ) AS totalCost, 
						ABS(quotedDistance-rateDistance) AS extraChargeableDistance
					FROM getNearestRoute_30804_30372_70 a
					INNER JOIN rate ON a.rut_id=rate.rte_route_id AND rte_status=1 
						AND rate.rte_vehicletype_id=:cabType AND rate.rte_vendor_amount <> 0
					WHERE  1
					ORDER  BY rank DESC, extraStartDistance, extraChargeableDistance ASC, totalcost ASC
					LIMIT  0, 1 
	 [params: {"cabType":"43"}]
2024/10/24 00:03:29 [profile] [profile.module.admin.controller.booking.getamountbyvehicle] [T: 14109.307] [M: 23922.71] [ET: 0.9/14084.187] [MU: 3.42/23921.84] 
	SQL: SELECT route.rut_id, route.rut_from_city_id start,route.rut_to_city_id end, NULL AS fromAlias, NULL AS toAlias, rut_name,route.rut_estm_distance as quotedDistance, route.rut_estm_distance as rateDistance,
                                0 AS extraDistance, 
								0 AS extraStartDistance,
								1 as rank,
                                0 as startTime, 0 as endTime, route.rut_estm_time,rate.*
                        FROM   route
						INNER JOIN rate ON rut_id = rate.rte_route_id AND rate.rte_status=1 AND rate.rte_vendor_amount>0 AND rate.rte_vehicletype_id=:cabType
                        WHERE  rut_active = 1 AND route.rut_from_city_id =:fromCity AND route.rut_to_city_id =:toCity 
	 [params: {"cabType":"14","fromCity":"30804","toCity":"30372"}]
2024/10/24 00:03:29 [profile] [profile.module.admin.controller.booking.getamountbyvehicle] [T: 14111.419] [M: 23941.12] [ET: 0.573/14086.33] [MU: 5.56/23940.24] 
	SQL: SELECT route.rut_id, route.rut_from_city_id start,route.rut_to_city_id end, NULL AS fromAlias, NULL AS toAlias, rut_name,route.rut_estm_distance as quotedDistance, route.rut_estm_distance as rateDistance,
                                0 AS extraDistance, 
								0 AS extraStartDistance,
								1 as rank,
                                0 as startTime, 0 as endTime, route.rut_estm_time,rate.*
                        FROM   route
						INNER JOIN rate ON rut_id = rate.rte_route_id AND rate.rte_status=1 AND rate.rte_vendor_amount>0 AND rate.rte_vehicletype_id=:cabType
                        WHERE  rut_active = 1 AND route.rut_from_city_id =:fromCity AND route.rut_to_city_id =:toCity 
	 [params: {"cabType":"1","fromCity":"30804","toCity":"30372"}]
2024/10/24 00:03:29 [profile] [profile.module.admin.controller.booking.getamountbyvehicle] [T: 14112.269] [M: 23948.38] [ET: 0.572/14087.16] [MU: 0.9/23948.13] 
	SQL: SELECT rut_id FROM `route` WHERE rut_from_city_id =:fromCty AND rut_to_city_id=:toCty AND rut_active = 1 
	 [params: {"fromCty":"30804","toCty":"30372"}]
2024/10/24 00:03:29 [profile] [profile.module.admin.controller.booking.getamountbyvehicle] [T: 14113.854] [M: 23958.98] [ET: 0.739/14088.741] [MU: 3.33/23958.54] 
	SQL: SELECT stt_id, GROUP_CONCAT(DISTINCT zct_zon_id) zones, stt_zone AS region
				FROM   cities
				INNER JOIN states ON cty_state_id = stt_id AND stt_active = '1'
				LEFT JOIN zone_cities ON cty_id = zct_cty_id AND zct_active = 1
				LEFT JOIN zones ON zon_id=zct_zon_id AND zon_active=1
				WHERE  cty_id =:city AND cty_active = 1 
	 [params: {"city":"30804"}]
2024/10/24 00:03:29 [profile] [profile.module.admin.controller.booking.getamountbyvehicle] [T: 14116.365] [M: 23969.52] [ET: 2.348/14091.272] [MU: 3.53/23968.65] 
	SQL: SELECT service_class_rule.*,
					CASE 
						WHEN scr_area_type=1 THEN 10
						WHEN scr_area_type=2 THEN 5
						WHEN scr_area_type=3 THEN 20
						WHEN scr_area_type=4 THEN 3
						WHEN scr_area_type=5 THEN 25
						ELSE 1
					END AS rank FROM service_class_rule
				INNER JOIN svc_class_vhc_cat scv ON scv.scv_id = scr_scv_id
				WHERE ((scr_area_type = 3 AND scr_area_id IN (:gp63)) OR (scr_area_type = 5 AND scr_area_id IN (:gp61)) OR (scr_area_type = 2 AND scr_area_id IN (:gp64)) OR (scr_area_type = 4 AND scr_area_id IN (:gp65)) OR (scr_area_type = 1 AND scr_area_id IN (:gp62)) OR scr_area_type IS NULL) 
					AND scv.scv_id=:scv_id AND scr_active=1
				ORDER BY rank DESC
						 
	 [params: {":gp61":"4181",":gp62":"31",":gp63":"4181",":gp64":"105",":gp65":"1","scv_id":"14"}]
2024/10/24 00:03:29 [profile] [profile.module.admin.controller.booking.getamountbyvehicle] [T: 14117.48] [M: 23970.09] [ET: 0.645/14092.38] [MU: 0.9/23969.84] 
	SQL: SELECT rut_id FROM `route` WHERE rut_from_city_id =:fromCty AND rut_to_city_id=:toCty AND rut_active = 1 
	 [params: {"fromCty":"30804","toCty":"30372"}]
2024/10/24 00:03:29 [profile] [profile.module.admin.controller.booking.getamountbyvehicle] [T: 14118.656] [M: 23980.32] [ET: 0.538/14093.568] [MU: 2.97/23979.88] 
	SQL: SELECT stt_id, GROUP_CONCAT(DISTINCT zct_zon_id) zones, stt_zone AS region
				FROM   cities
				INNER JOIN states ON cty_state_id = stt_id AND stt_active = '1'
				LEFT JOIN zone_cities ON cty_id = zct_cty_id AND zct_active = 1
				LEFT JOIN zones ON zon_id=zct_zon_id AND zon_active=1
				WHERE  cty_id =:city AND cty_active = 1 
	 [params: {"city":"30804"}]
2024/10/24 00:03:29 [profile] [profile.module.admin.controller.booking.getamountbyvehicle] [T: 14121.282] [M: 23990.87] [ET: 2.47/14096.169] [MU: 3.53/23989.99] 
	SQL: SELECT service_class_rule.*,
					CASE 
						WHEN scr_area_type=1 THEN 10
						WHEN scr_area_type=2 THEN 5
						WHEN scr_area_type=3 THEN 20
						WHEN scr_area_type=4 THEN 3
						WHEN scr_area_type=5 THEN 25
						ELSE 1
					END AS rank FROM service_class_rule
				INNER JOIN svc_class_vhc_cat scv ON scv.scv_id = scr_scv_id
				WHERE ((scr_area_type = 3 AND scr_area_id IN (:gp68)) OR (scr_area_type = 5 AND scr_area_id IN (:gp66)) OR (scr_area_type = 2 AND scr_area_id IN (:gp69)) OR (scr_area_type = 4 AND scr_area_id IN (:gp70)) OR (scr_area_type = 1 AND scr_area_id IN (:gp67)) OR scr_area_type IS NULL) 
					AND scv.scv_id=:scv_id AND scr_active=1
				ORDER BY rank DESC
						 
	 [params: {":gp66":"4181",":gp67":"31",":gp68":"4181",":gp69":"105",":gp70":"1","scv_id":"43"}]
2024/10/24 00:03:29 [profile] [profile.module.admin.controller.booking.getamountbyvehicle] [T: 14122.333] [M: 23989.46] [ET: 0.702/14097.211] [MU: 0.89/23989.21] 
	SQL: SELECT rut_id FROM `route` WHERE rut_from_city_id =:fromCty AND rut_to_city_id=:toCty AND rut_active = 1 
	 [params: {"fromCty":"30804","toCty":"30372"}]
2024/10/24 00:03:29 [profile] [profile.module.admin.controller.booking.getamountbyvehicle] [T: 14124.091] [M: 24001.8] [ET: 0.616/14098.975] [MU: 2.97/24001.37] 
	SQL: SELECT stt_id, GROUP_CONCAT(DISTINCT zct_zon_id) zones, stt_zone AS region
				FROM   cities
				INNER JOIN states ON cty_state_id = stt_id AND stt_active = '1'
				LEFT JOIN zone_cities ON cty_id = zct_cty_id AND zct_active = 1
				LEFT JOIN zones ON zon_id=zct_zon_id AND zon_active=1
				WHERE  cty_id =:city AND cty_active = 1 
	 [params: {"city":"30804"}]
2024/10/24 00:03:29 [profile] [profile.module.admin.controller.booking.getamountbyvehicle] [T: 14124.983] [M: 24030.73] [ET: 0.709/14099.864] [MU: 22.41/24029.98] 
	SQL: SELECT area_price_rule.*,
					CASE area_price_rule.apr_area_type
					WHEN 1 THEN 10
					WHEN 2 THEN 5
					WHEN 3 THEN 20   
					ELSE 1
					END AS rank
				FROM area_price_rule 
				WHERE apr_active=1 AND ((apr_area_type = 3 AND apr_area_id IN (:gp73)) OR (apr_area_type = 5 AND apr_area_id IN (:gp71)) OR (apr_area_type = 2 AND apr_area_id IN (:gp74)) OR (apr_area_type = 4 AND apr_area_id IN (:gp75)) OR (apr_area_type = 1 AND apr_area_id IN (:gp72))) AND apr_cab_type=:cab ORDER BY rank DESC 
	 [params: {":gp71":"4181",":gp72":"31",":gp73":"30804",":gp74":"105",":gp75":"1","cab":"43"}]
2024/10/24 00:03:29 [profile] [profile.module.admin.controller.booking.getamountbyvehicle] [T: 14127.129] [M: 24017.99] [ET: 0.666/14102.042] [MU: 3.34/24017.55] 
	SQL: SELECT stt_id, GROUP_CONCAT(DISTINCT zct_zon_id) zones, stt_zone AS region
				FROM   cities
				INNER JOIN states ON cty_state_id = stt_id AND stt_active = '1'
				LEFT JOIN zone_cities ON cty_id = zct_cty_id AND zct_active = 1
				LEFT JOIN zones ON zon_id=zct_zon_id AND zon_active=1
				WHERE  cty_id =:city AND cty_active = 1 
	 [params: {"city":"30804"}]
2024/10/24 00:03:29 [profile] [profile.module.admin.controller.booking.getamountbyvehicle] [T: 14129.882] [M: 24028.54] [ET: 2.595/14104.763] [MU: 3.53/24027.66] 
	SQL: SELECT service_class_rule.*,
					CASE 
						WHEN scr_area_type=1 THEN 10
						WHEN scr_area_type=2 THEN 5
						WHEN scr_area_type=3 THEN 20
						WHEN scr_area_type=4 THEN 3
						WHEN scr_area_type=5 THEN 25
						ELSE 1
					END AS rank FROM service_class_rule
				INNER JOIN svc_class_vhc_cat scv ON scv.scv_id = scr_scv_id
				WHERE ((scr_area_type = 3 AND scr_area_id IN (:gp78)) OR (scr_area_type = 5 AND scr_area_id IN (:gp76)) OR (scr_area_type = 2 AND scr_area_id IN (:gp79)) OR (scr_area_type = 4 AND scr_area_id IN (:gp80)) OR (scr_area_type = 1 AND scr_area_id IN (:gp77)) OR scr_area_type IS NULL) 
					AND scv.scv_id=:scv_id AND scr_active=1
				ORDER BY rank DESC
						 
	 [params: {":gp76":"4181",":gp77":"31",":gp78":"4181",":gp79":"105",":gp80":"1","scv_id":"43"}]
2024/10/24 00:03:29 [profile] [profile.module.admin.controller.booking.getamountbyvehicle] [T: 14131.061] [M: 24033.29] [ET: 0.686/14105.932] [MU: 3.85/24032.41] 
	SQL: SELECT *
				FROM 
                   (
							SELECT cities_stats.cts_cty_id AS vnd_city, cities_stats.cts_vnd_cnt AS cnt, 0 AS distance
							FROM cities_stats
							WHERE     cities_stats.cts_cty_id = :city	AND cities_stats.cts_vnd_cnt >= 2

							UNION
							SELECT cities_stats.cts_cty_id AS vnd_city, cities_stats.cts_vnd_cnt AS cnt, IFNULL(rut_actual_distance, rut_estm_distance) AS distance
							FROM route
							INNER JOIN cities_stats  ON  cities_stats.cts_cty_id = route.rut_from_city_id AND cities_stats.cts_vnd_cnt >= 2 AND IFNULL(rut_actual_distance, rut_estm_distance) < 40
							WHERE rut_to_city_id = :city
							GROUP BY cities_stats.cts_cty_id   
                    ) a
				ORDER BY DISTANCE ASC 
	 [params: {":city":"30804"}]
2024/10/24 00:03:29 [profile] [profile.module.admin.controller.booking.getamountbyvehicle] [T: 14131.759] [M: 24041.1] [ET: 0.555/14106.651] [MU: 4.21/24040.23] 
	SQL: SELECT *
				FROM 
                   (
							SELECT cities_stats.cts_cty_id AS vnd_city, cities_stats.cts_vnd_cnt AS cnt, 0 AS distance
							FROM cities_stats
							WHERE     cities_stats.cts_cty_id = :city	AND cities_stats.cts_vnd_cnt >= 2

							UNION
							SELECT cities_stats.cts_cty_id AS vnd_city, cities_stats.cts_vnd_cnt AS cnt, IFNULL(rut_actual_distance, rut_estm_distance) AS distance
							FROM route
							INNER JOIN cities_stats  ON  cities_stats.cts_cty_id = route.rut_from_city_id AND cities_stats.cts_vnd_cnt >= 2 AND IFNULL(rut_actual_distance, rut_estm_distance) < 40
							WHERE rut_to_city_id = :city
							GROUP BY cities_stats.cts_cty_id   
                    ) a
				ORDER BY DISTANCE ASC 
	 [params: {":city":"30372"}]
2024/10/24 00:03:29 [profile] [profile.module.admin.controller.booking.getamountbyvehicle] [T: 14132.176] [M: 24045.24] [ET: 0.306/14107.094] [MU: 2.98/24045.13] 
	BookingRoute::calculateDistance
2024/10/24 00:03:29 [profile] [profile.module.admin.controller.booking.getamountbyvehicle] [T: 14135.094] [M: 24051.62] [ET: 2.702/14109.974] [MU: 2.4/24051.24] 
	SQL: SELECT *
				FROM   partner_rate prt 
				JOIN route rut ON prt.prt_route_id = rut.rut_id AND rut.rut_active = 1
				AND  rut.rut_from_city_id  = 30804 
				AND  rut.rut_to_city_id  = 30372 
				 WHERE prt_vehicletype_id = 43
				AND prt_partner_id = 1249
				AND prt_status = 1
				 
	 [params: []]
2024/10/24 00:03:29 [profile] [profile.module.admin.controller.booking.getamountbyvehicle] [T: 14136.174] [M: 24056.84] 
+++++++++++++++++++++++++++++++++++++++++++++++++++++++++++profile models.RouteRates.calculateDriverAllowance START++++++++++++++++++++++++++++++++++++++++++++++++++
	URL: [POST]/aaohome/booking/getamountbyvehicle
	User IP: 192.168.255.12
	Referrer: http://localhost:84/aaohome/booking/create
	POST: {"fromCity":"30804","toCity":"30372","cabType":"1","tripDistance":"","tripDuration":"","multiCityData":"","bookingType":"1","pickupAddress":"","pickupDate":"31\/10\/2024","pickupTime":"04:00 AM","isGozonow":"0","minTripDistance":"0","sccId":"0","tripUser":"1","YII_CSRF_TOKEN":"N3VxRE1WeG9UeHk5UWFBUFpPT216eWVyY0xWTVpoTkcUoJ2aBoup1fU2M5E4ePVZVcUNlKiYZZysUqEklNiKWw==","isAirportPickup":"1"}
	RawBody: fromCity=30804&toCity=30372&cabType=1&tripDistance=&tripDuration=&multiCityData=&bookingType=1&pickupAddress=&pickupDate=31%2F10%2F2024&pickupTime=04%3A00+AM&isGozonow=0&minTripDistance=0&sccId=0&tripUser=1&YII_CSRF_TOKEN=N3VxRE1WeG9UeHk5UWFBUFpPT216eWVyY0xWTVpoTkcUoJ2aBoup1fU2M5E4ePVZVcUNlKiYZZysUqEklNiKWw%3D%3D&isAirportPickup=1
	[UserID: 30] [UserType: 4]
2024/10/24 00:03:29 [profile] [profile.module.admin.controller.booking.getamountbyvehicle] [T: 14137.135] [M: 24076.41] [ET: 1.587/14112.026] [MU: 20.77/24076.3] 
	models.RouteRates.calculateDriverAllowance
2024/10/24 00:03:29 [profile] [profile.module.admin.controller.booking.getamountbyvehicle] [T: 14137.198] [M: 24078.09] 
============================================================Profile models.RouteRates.calculateDriverAllowance DONE==================================================
2024/10/24 00:03:29 [profile] [profile.module.admin.controller.booking.getamountbyvehicle] [T: 14138.418] [M: 24091.55] [ET: 1.017/14113.3] [MU: 2.99/24089.05] 
	SQL: SELECT * FROM (
                                SELECT *, FLOOR(IF((cpm_value_type=1),(cpm_value+15157),(IF((cpm_value_type=2),(15157+(15157*(cpm_value/100))),cpm_value))))amount,
                                    ((SELECT GROUP_CONCAT(z2.zct_zon_id) as srcZones FROM zone_cities z2
                                        WHERE z2.zct_active=1 AND zct_cty_id=30804 GROUP BY z2.zct_cty_id)) as srcZones,
                                    (SELECT GROUP_CONCAT(z2.zct_zon_id) as srcZones FROM zone_cities z2
                                        WHERE z2.zct_active=1 AND zct_cty_id=30372 GROUP BY z2.zct_cty_id) as dstZones,
                                    (
                                    IF(cpm_agent_id IS NOT NULL, 1,0) +
                                    IF(cpm_source_city IS NOT NULL,54,0) +
                                    IF(cpm_destination_city IS NOT NULL,54,0) +
                                    IF(cpm_source_zone IS NOT NULL,18,0) +
                                    IF(cpm_destination_zone IS NOT NULL,18,0) +
                                    IF(cpm_source_state IS NOT NULL,6,0) +
                                    IF(cpm_destination_state IS NOT NULL,6,0) +
                                    IF(cpm_trip_type IS NOT NULL,1,0) +
                                    IF(cpm_vehicle_type IS NOT NULL,1,0)
                               ) as rank
                                FROM `channel_partner_markup`
                                WHERE cpm_active=1) a
                            WHERE
                            (
                                (cpm_source_city IS NULL OR cpm_source_city=30804) AND
                                (cpm_destination_city IS NULL OR cpm_destination_city=30372) AND
                                (cpm_source_zone IS NULL OR cpm_source_zone IN (srcZones)) AND
                                (cpm_destination_zone IS NULL OR cpm_destination_zone IN (dstZones))
                            )
                            AND cpm_agent_id = 1249
                            AND ('2024-10-31 04:00:00' BETWEEN cpm_from_date AND cpm_to_date)  AND (cpm_vehicle_type=43 OR cpm_vehicle_type IS NULL)  AND (cpm_trip_type=1 OR cpm_trip_type IS NULL)
                        ORDER BY rank DESC, amount DESC  LIMIT 1 
	 [params: []]
2024/10/24 00:03:29 [profile] [profile.module.admin.controller.booking.getamountbyvehicle] [T: 14140.146] [M: 24133.77] [ET: 4.713/14115.058] [MU: 78.59/24133.62] 
	RouteRates::calculate for CAB 43 2024-10-31 04:00:00 - Trip Type: 1 971778885
2024/10/24 00:03:29 [profile] [profile.module.admin.controller.booking.getamountbyvehicle] [T: 14140.42] [M: 24113.39] [ET: 454.599/14115.331] [MU: 294.16/24113.23] 
	Quote::calculateOneWay  for CAB 43 Date: 2024-10-31 04:00:00
2024/10/24 00:03:29 [profile] [profile.module.admin.controller.booking.getamountbyvehicle] [T: 14140.784] [M: 24109.86] [ET: 0.27/14115.68] [MU: 0.9/24109.61] 
	SQL: SELECT svc.scv_scc_id FROM svc_class_vhc_cat svc
					-- INNER JOIN service_class scc ON svc.scv_scc_id=scc_id
					WHERE scv_id=:cabId 
	 [params: {"cabId":"43"}]
2024/10/24 00:03:29 [profile] [profile.module.admin.controller.booking.getamountbyvehicle] [T: 14140.913] [M: 24111.11] [ET: 486.273/14115.812] [MU: 334.58/24111.02] 
	Quote For CabType: 43
2024/10/24 00:03:29 [profile] [profile.module.admin.controller.booking.getamountbyvehicle] [T: 14142.764] [M: 24121.09] [ET: 0.813/14117.646] [MU: 2.97/24120.65] 
	SQL: SELECT stt_id, GROUP_CONCAT(DISTINCT zct_zon_id) zones, stt_zone AS region
				FROM   cities
				INNER JOIN states ON cty_state_id = stt_id AND stt_active = '1'
				LEFT JOIN zone_cities ON cty_id = zct_cty_id AND zct_active = 1
				LEFT JOIN zones ON zon_id=zct_zon_id AND zon_active=1
				WHERE  cty_id =:city AND cty_active = 1 
	 [params: {"city":"30804"}]
2024/10/24 00:03:29 [profile] [profile.module.admin.controller.booking.getamountbyvehicle] [T: 14143.688] [M: 24126.91] [ET: 0.765/14118.572] [MU: 3.34/24126.47] 
	SQL: SELECT stt_id, GROUP_CONCAT(DISTINCT zct_zon_id) zones, stt_zone AS region
				FROM   cities
				INNER JOIN states ON cty_state_id = stt_id AND stt_active = '1'
				LEFT JOIN zone_cities ON cty_id = zct_cty_id AND zct_active = 1
				LEFT JOIN zones ON zon_id=zct_zon_id AND zon_active=1
				WHERE  cty_id =:city AND cty_active = 1 
	 [params: {"city":"30372"}]
2024/10/24 00:03:29 [profile] [profile.module.admin.controller.booking.getamountbyvehicle] [T: 14144.465] [M: 24129.84] [ET: 0.63/14119.334] [MU: 0.9/24129.59] 
	SQL: SELECT rut_id FROM `route` WHERE rut_from_city_id =:fromCty AND rut_to_city_id=:toCty AND rut_active = 1 
	 [params: {"fromCty":"30804","toCty":"30372"}]
2024/10/24 00:03:29 [profile] [profile.module.admin.controller.booking.getamountbyvehicle] [T: 14145.298] [M: 24162.2] [ET: 0.653/14120.182] [MU: 24.22/24160.7] 
	SQL: SELECT scv_id, CASE
				WHEN scr_area_type=1 AND scr_area_id IN (31) THEN 10
				WHEN scr_area_type=1 AND scr_area_id IN (0) THEN 9
				WHEN scr_area_type=2 AND scr_area_id IN (105) THEN 5
				WHEN scr_area_type=2 AND scr_area_id IN (86) THEN 4
				WHEN scr_area_type=3 AND scr_area_id IN (30804) THEN 20
				WHEN scr_area_type=3 AND scr_area_id IN (30372) THEN 19
				WHEN scr_area_type=4 AND scr_area_id IN (1) THEN 3
				WHEN scr_area_type=4 AND scr_area_id IN (2) THEN 2
				WHEN scr_area_type=5 THEN 25
				ELSE 1
				END AS rank, 
			scc_id, scr_is_allowed 
		FROM service_class_rule 
		INNER JOIN svc_class_vhc_cat ON scv_id = scr_scv_id AND scv_active = 1
		INNER JOIN service_class ON scv_scc_id = scc_id
		WHERE   ((scr_area_type = 1 AND scr_area_id IN (:gp81)) 
			OR (scr_area_type = 2 AND scr_area_id IN (:gp84,:gp85)) 
			OR (scr_area_type = 3 AND scr_area_id IN (:gp82,:gp83)) 
			OR (scr_area_type = 4 AND scr_area_id IN (:gp86,:gp87))
			OR (scr_area_type = 5 AND scr_area_id IN (4181))
			OR scr_area_type IS NULL)
			AND (scr_trip_type = :tripType OR scr_trip_type IS NULL) 
			AND scr_active = 1 AND scv_id IN (72)
		ORDER BY rank DESC
		 
	 [params: {":gp81":"31",":gp82":"30804",":gp83":"30372",":gp84":"105",":gp85":"86",":gp86":"1",":gp87":"2","tripType":"1"}]
2024/10/24 00:03:29 [profile] [profile.module.admin.controller.booking.getamountbyvehicle] [T: 14146.223] [M: 24142.38] [ET: 0.272/14121.111] [MU: 0.84/24142.19] 
	SQL: SELECT cts_category FROM cities_stats WHERE cts_cty_id = :cityId 
	 [params: {"cityId":"30804"}]
2024/10/24 00:03:29 [profile] [profile.module.admin.controller.booking.getamountbyvehicle] [T: 14146.733] [M: 24145.22] [ET: 0.372/14121.624] [MU: 0.93/24144.91] 
	SQL: SELECT GROUP_CONCAT(adn_id) as ids FROM addon_service_class_rule INNER JOIN addons ON ascr_adn_id = adn_id AND adn_active=1 AND ascr_active = 1 WHERE ascr_cty_category=:cat AND ascr_scc_id=:class 
	 [params: {"cat":2,"class":"6"}]
2024/10/24 00:03:29 [profile] [profile.module.admin.controller.booking.getamountbyvehicle] [T: 14151.192] [M: 24162.91] [ET: 2.934/14126.062] [MU: 3.53/24162.04] 
	SQL: SELECT route.rut_id, route.rut_from_city_id start,route.rut_to_city_id end, NULL AS fromAlias, NULL AS toAlias, rut_name,route.rut_estm_distance as quotedDistance, route.rut_estm_distance as rateDistance,
                                0 AS extraDistance, 
								0 AS extraStartDistance,
								1 as rank,
                                0 as startTime, 0 as endTime, route.rut_estm_time,rate.*
                        FROM   route
						INNER JOIN rate ON rut_id = rate.rte_route_id AND rate.rte_status=1 AND rate.rte_vendor_amount>0 AND rate.rte_vehicletype_id=:cabType
                        WHERE  rut_active = 1 AND route.rut_from_city_id =:fromCity AND route.rut_to_city_id =:toCity 
	 [params: {"cabType":"72","fromCity":"30804","toCity":"30372"}]
2024/10/24 00:03:29 [profile] [profile.module.admin.controller.booking.getamountbyvehicle] [T: 14152.33] [M: 24166.16] [ET: 0.767/14127.223] [MU: 0.87/24165.95] 
	SQL: SELECT rut_id FROM `route` WHERE rut_from_city_id =:fromCty AND rut_to_city_id=:toCty AND rut_active = 1 
	 [params: {"fromCty":"30804","toCty":0}]
2024/10/24 00:03:29 [profile] [profile.module.admin.controller.booking.getamountbyvehicle] [T: 14153.409] [M: 24173.45] [ET: 0.809/14128.3] [MU: 2.97/24173.01] 
	SQL: SELECT stt_id, GROUP_CONCAT(DISTINCT zct_zon_id) zones, stt_zone AS region
				FROM   cities
				INNER JOIN states ON cty_state_id = stt_id AND stt_active = '1'
				LEFT JOIN zone_cities ON cty_id = zct_cty_id AND zct_active = 1
				LEFT JOIN zones ON zon_id=zct_zon_id AND zon_active=1
				WHERE  cty_id =:city AND cty_active = 1 
	 [params: {"city":"30804"}]
2024/10/24 00:03:29 [profile] [profile.module.admin.controller.booking.getamountbyvehicle] [T: 14154.341] [M: 24201.62] [ET: 0.74/14129.225] [MU: 22.04/24200.99] 
	SQL: SELECT area_price_rule.*,
					CASE area_price_rule.apr_area_type
					WHEN 1 THEN 10
					WHEN 2 THEN 5
					WHEN 3 THEN 20   
					ELSE 1
					END AS rank
				FROM area_price_rule 
				WHERE apr_active=1 AND ((apr_area_type = 3 AND apr_area_id IN (:gp89)) OR (apr_area_type = 2 AND apr_area_id IN (:gp90)) OR (apr_area_type = 4 AND apr_area_id IN (:gp91)) OR (apr_area_type = 1 AND apr_area_id IN (:gp88))) AND apr_cab_type=:cab ORDER BY rank DESC 
	 [params: {":gp88":"31",":gp89":"30804",":gp90":"105",":gp91":"1","cab":"72"}]
2024/10/24 00:03:29 [profile] [profile.module.admin.controller.booking.getamountbyvehicle] [T: 14155.892] [M: 24188.34] [ET: 0.69/14130.778] [MU: 3.33/24187.9] 
	SQL: SELECT stt_id, GROUP_CONCAT(DISTINCT zct_zon_id) zones, stt_zone AS region
				FROM   cities
				INNER JOIN states ON cty_state_id = stt_id AND stt_active = '1'
				LEFT JOIN zone_cities ON cty_id = zct_cty_id AND zct_active = 1
				LEFT JOIN zones ON zon_id=zct_zon_id AND zon_active=1
				WHERE  cty_id =:city AND cty_active = 1 
	 [params: {"city":"30804"}]
2024/10/24 00:03:29 [profile] [profile.module.admin.controller.booking.getamountbyvehicle] [T: 14159.088] [M: 24198.49] [ET: 3.016/14133.976] [MU: 3.41/24197.62] 
	SQL: SELECT service_class_rule.*,
					CASE 
						WHEN scr_area_type=1 THEN 10
						WHEN scr_area_type=2 THEN 5
						WHEN scr_area_type=3 THEN 20
						WHEN scr_area_type=4 THEN 3
						WHEN scr_area_type=5 THEN 25
						ELSE 1
					END AS rank FROM service_class_rule
				INNER JOIN svc_class_vhc_cat scv ON scv.scv_id = scr_scv_id
				WHERE ((scr_area_type = 3 AND scr_area_id IN (:gp93)) OR (scr_area_type = 2 AND scr_area_id IN (:gp94)) OR (scr_area_type = 4 AND scr_area_id IN (:gp95)) OR (scr_area_type = 1 AND scr_area_id IN (:gp92)) OR scr_area_type IS NULL) 
					AND scv.scv_id=:scv_id AND scr_active=1
				ORDER BY rank DESC
						 
	 [params: {":gp92":"31",":gp93":"30804",":gp94":"105",":gp95":"1","scv_id":"72"}]
2024/10/24 00:03:29 [profile] [profile.module.admin.controller.booking.getamountbyvehicle] [T: 14162.703] [M: 24226.35] [ET: 2.626/14137.565] [MU: 0.74/24218.35] 
	SQL: CALL prcCreateTempTable(:tableName, :sql) 
	 [params: {"tableName":"nearest_route_30804_30372","sql":"(INDEX indx_nearest_rt_rutid (rut_id)) \r\n\t\t\tSELECT routeAlias.rut_id, routeAlias.rut_from_city_id start, routeAlias.rut_to_city_id end, routeFrom.rut_name as fromAlias, \r\n\t\t\t\tNULL AS toAlias, routeAlias.rut_name, route.rut_estm_distance as quotedDistance, routeAlias.rut_estm_distance as rateDistance, \r\n\t\t\t\t\t(IFNULL(route.rut_actual_distance, route.rut_estm_distance) + IFNULL(routeFrom.rut_actual_distance, routeFrom.rut_estm_distance) \r\n\t\t\t\t\t\t- IFNULL(routeAlias.rut_actual_distance, routeAlias.rut_estm_distance)) AS extraDistance, \r\n\t\t\t\tIFNULL(routeFrom.rut_actual_distance, routeFrom.rut_estm_distance) AS extraStartDistance, \r\n\t\t\t\t0 as rank, routeFrom.rut_estm_time as startTime, 0 as endTime, route.rut_estm_time, \r\n\t\t\t\t(IFNULL(routeFrom.rut_actual_distance, routeFrom.rut_estm_distance) + IFNULL(routeAlias.rut_actual_distance, routeAlias.rut_estm_distance)) as extraTravelDistance\r\n\t\t\tFROM route\r\n\t\t\tINNER JOIN route routeFrom ON routeFrom.rut_to_city_id = route.rut_from_city_id AND route.rut_from_city_id=30804 \r\n\t\t\t\tAND route.rut_to_city_id=30372 AND routeFrom.rut_to_city_id=30804 AND routeFrom.rut_estm_distance < 50 \r\n\t\t\t\tAND routeFrom.rut_from_city_id<>routeFrom.rut_to_city_id AND route.rut_active=1 AND routeFrom.rut_active=1\r\n\t\t\tINNER JOIN route routeAlias ON (routeAlias.rut_from_city_id = routeFrom.rut_from_city_id) \r\n\t\t\t\t\t\tAND (routeAlias.rut_to_city_id=route.rut_to_city_id) AND routeAlias.rut_active = 1  AND routeAlias.rut_id IN (1337,1594,9446,9903,643960,2862879,3079674,4398055)\r\n\t\t\tUNION\r\n\t\t\tSELECT routeAlias.rut_id, routeAlias.rut_from_city_id start, routeAlias.rut_to_city_id end, NULL, routeTo.rut_name, routeAlias.rut_name, \r\n\t\t\t\troute.rut_estm_distance as quotedDistance, routeAlias.rut_estm_distance as rateDistance, \r\n\t\t\t\t\t(IFNULL(route.rut_actual_distance, route.rut_estm_distance) + IFNULL(routeTo.rut_actual_distance, routeTo.rut_estm_distance) \r\n\t\t\t\t\t\t\t- IFNULL(routeAlias.rut_actual_distance, routeAlias.rut_estm_distance)) AS extraDistance, \r\n\t\t\t\t0 AS extraStartDistance, 0, 0 as startTime, routeTo.rut_estm_time as endTime, route.rut_estm_time, \r\n\t\t\t\t(IFNULL(routeTo.rut_actual_distance, routeTo.rut_estm_distance) + IFNULL(routeAlias.rut_actual_distance, routeAlias.rut_estm_distance)) as extraTravelDistance\r\n\t\t\tFROM   route\r\n\t\t\tINNER JOIN route routeTo ON routeTo.rut_from_city_id = route.rut_to_city_id AND route.rut_from_city_id = 30804 AND route.rut_to_city_id=30372 \r\n\t\t\t\tAND routeTo.rut_from_city_id=30372\r\n\t\t\t\tAND route.rut_active = 1 AND routeTo.rut_active = 1 AND routeTo.rut_estm_distance < 50 AND routeTo.rut_from_city_id<>routeTo.rut_to_city_id\r\n\t\t\tINNER JOIN route routeAlias ON (routeAlias.rut_from_city_id = route.rut_from_city_id) \r\n\t\t\t   AND (routeAlias.rut_to_city_id = routeTo.rut_to_city_id) AND routeAlias.rut_active = 1  AND routeAlias.rut_id IN (1337,1594,9446,9903,643960,2862879,3079674,4398055)\r\n\t\t\tUNION\r\n\t\t\tSELECT routeAlias.rut_id, routeAlias.rut_from_city_id start, routeAlias.rut_to_city_id end, \r\n\t\t\t\trouteFrom.rut_name, routeTo.rut_name, routeAlias.rut_name, \r\n\t\t\t\troute.rut_estm_distance as quotedDistance, routeAlias.rut_estm_distance as rateDistance, \r\n\t\t\t\t\t(IFNULL(route.rut_actual_distance, route.rut_estm_distance) + IFNULL(routeFrom.rut_actual_distance, routeFrom.rut_estm_distance) \r\n\t\t\t\t\t+ IFNULL(routeTo.rut_actual_distance, routeTo.rut_estm_distance) - IFNULL(routeAlias.rut_actual_distance, routeAlias.rut_estm_distance)) \r\n\t\t\t\tAS extraDistance, IFNULL(routeFrom.rut_actual_distance, routeFrom.rut_estm_distance) AS extraStartDistance, 0, \r\n\t\t\t\trouteFrom.rut_estm_time as startTime, routeTo.rut_estm_time as endTime, route.rut_estm_time, \r\n\t\t\t\t(IFNULL(routeFrom.rut_actual_distance, routeFrom.rut_estm_distance) + IFNULL(routeTo.rut_actual_distance, routeTo.rut_estm_distance) + IFNULL(routeAlias.rut_actual_distance, routeAlias.rut_estm_distance)) as extraTravelDistance\r\n\t\t\tFROM   route\r\n\t\t\tINNER JOIN route routeFrom ON routeFrom.rut_to_city_id = route.rut_from_city_id AND route.rut_from_city_id=30804 \r\n\t\t\t\t\tAND route.rut_to_city_id=30372 AND routeFrom.rut_to_city_id=30804 AND routeFrom.rut_estm_distance < 50 AND routeFrom.rut_from_city_id <> routeFrom.rut_to_city_id\r\n\t\t\t\t\tAND route.rut_active=1 AND routeFrom.rut_active=1\r\n\t\t\tINNER JOIN route routeTo ON routeTo.rut_from_city_id = route.rut_to_city_id AND routeTo.rut_estm_distance < 50 \r\n\t\t\t\t\tAND routeTo.rut_from_city_id=30372 AND routeTo.rut_from_city_id<>routeTo.rut_to_city_id\r\n\t\t\tINNER JOIN route routeAlias ON (routeAlias.rut_from_city_id = routeFrom.rut_from_city_id) \r\n\t\t\t\t\tAND (routeAlias.rut_to_city_id=routeTo.rut_to_city_id) AND routeAlias.rut_active = 1 AND routeAlias.rut_from_city_id=30804  AND routeAlias.rut_id IN (1337,1594,9446,9903,643960,2862879,3079674,4398055)"}]
2024/10/24 00:03:29 [profile] [profile.module.admin.controller.booking.getamountbyvehicle] [T: 14167.209] [M: 24230.43] [ET: 4.347/14142.097] [MU: 2.16/24229.99] 
	SQL: SELECT *, (rte_vendor_amount + extraDistance * 9.5) as totalCost FROM (SELECT * FROM nearest_route_30804_30372) a
					INNER JOIN rate ON a.rut_id = rate.rte_route_id AND rte_status=1 AND rate.rte_vehicletype_id=:cabType AND rate.rte_vendor_amount <>0
					WHERE 1 ORDER BY rank DESC, totalCost ASC LIMIT 0,1 
	 [params: {"cabType":"72"}]
2024/10/24 00:03:29 [profile] [profile.module.admin.controller.booking.getamountbyvehicle] [T: 14167.915] [M: 24238.45] [ET: 0.588/14142.812] [MU: 0.75/24236.45] 
	SQL: CALL prcCreateTempTable(:tableName, :sql) 
	 [params: {"tableName":"getNearestRoute_30804_30372_70","sql":"(INDEX getNearestRoute_30804_30372_70_index_rut_id (rut_id))\r\n\t\t\t\t\t\tSELECT routeAlias.rut_id, routeAlias.rut_from_city_id AS start, routeAlias.rut_to_city_id AS end,\r\n\t\t\t\t\t\t\t\trouteFrom.rut_name AS fromAlias, NULL AS toAlias, routeAlias.rut_name, route.rut_estm_distance AS quotedDistance,\r\n\t\t\t\t\t\t\t\trouteAlias.rut_estm_distance AS rateDistance, \r\n\t\t\t\t\t\t\t\t(IFNULL(route.rut_actual_distance, route.rut_estm_distance) + IFNULL(routeFrom.rut_actual_distance, routeFrom.rut_estm_distance)\r\n\t\t\t\t\t\t\t\t\t - IFNULL(routeAlias.rut_actual_distance, routeAlias.rut_estm_distance)) AS extraDistance,\r\n\t\t\t\t\t\t\t\tIFNULL(routeFrom.rut_actual_distance, routeFrom.rut_estm_distance) AS extraStartDistance,\r\n\t\t\t\t\t\t\t\t0 AS rank, routeFrom.rut_estm_time AS startTime, 0 AS endTime, route.rut_estm_time, \r\n\t\t\t\t\t\t\t\t(IFNULL(routeFrom.rut_actual_distance, routeFrom.rut_estm_distance) + IFNULL(routeAlias.rut_actual_distance, routeAlias.rut_estm_distance)) AS extraTravelDistance\r\n\t\t\t\t\t\tFROM   route\r\n\t\t\t\t\t\tINNER JOIN route routeTo ON routeTo.rut_to_city_id=route.rut_from_city_id\r\n\t\t\t\t\t\t\t\tAND route.rut_from_city_id=30804 AND routeTo.rut_active=1\r\n\t\t\t\t\t\t\t\tAND routeTo.rut_estm_distance<70 AND route.rut_active=1\r\n\t\t\t\t\t\tINNER JOIN route routeFrom ON routeFrom.rut_from_city_id=route.rut_to_city_id\r\n\t\t\t\t\t\t\t\tAND route.rut_to_city_id=30372 AND routeFrom.rut_active = 1\r\n\t\t\t\t\t\t\t\tAND routeFrom.rut_estm_distance<70 AND route.rut_active = 1\r\n\t\t\t\t\t\tINNER JOIN route routeAlias ON routeAlias.rut_to_city_id=routeFrom.rut_to_city_id\r\n\t\t\t\t\t\t\tAND routeAlias.rut_from_city_id=routeTo.rut_from_city_id AND routeAlias.rut_active = 1"}]
2024/10/24 00:03:29 [profile] [profile.module.admin.controller.booking.getamountbyvehicle] [T: 14171.585] [M: 24243.72] [ET: 3.552/14146.482] [MU: 2.42/24243.09] 
	SQL: SELECT *, (rte_vendor_amount + extradistance * 9.5 ) AS totalCost, 
						ABS(quotedDistance-rateDistance) AS extraChargeableDistance
					FROM getNearestRoute_30804_30372_70 a
					INNER JOIN rate ON a.rut_id=rate.rte_route_id AND rte_status=1 
						AND rate.rte_vehicletype_id=:cabType AND rate.rte_vendor_amount <> 0
					WHERE  1
					ORDER  BY rank DESC, extraStartDistance, extraChargeableDistance ASC, totalcost ASC
					LIMIT  0, 1 
	 [params: {"cabType":"72"}]
2024/10/24 00:03:29 [profile] [profile.module.admin.controller.booking.getamountbyvehicle] [T: 14175.605] [M: 24260.59] [ET: 0.854/14150.505] [MU: 5.19/24259.71] 
	SQL: SELECT route.rut_id, route.rut_from_city_id start,route.rut_to_city_id end, NULL AS fromAlias, NULL AS toAlias, rut_name,route.rut_estm_distance as quotedDistance, route.rut_estm_distance as rateDistance,
                                0 AS extraDistance, 
								0 AS extraStartDistance,
								1 as rank,
                                0 as startTime, 0 as endTime, route.rut_estm_time,rate.*
                        FROM   route
						INNER JOIN rate ON rut_id = rate.rte_route_id AND rate.rte_status=1 AND rate.rte_vendor_amount>0 AND rate.rte_vehicletype_id=:cabType
                        WHERE  rut_active = 1 AND route.rut_from_city_id =:fromCity AND route.rut_to_city_id =:toCity 
	 [params: {"cabType":"1","fromCity":"30804","toCity":"30372"}]
2024/10/24 00:03:29 [profile] [profile.module.admin.controller.booking.getamountbyvehicle] [T: 14176.358] [M: 24267.85] [ET: 0.47/14151.254] [MU: 0.89/24267.6] 
	SQL: SELECT rut_id FROM `route` WHERE rut_from_city_id =:fromCty AND rut_to_city_id=:toCty AND rut_active = 1 
	 [params: {"fromCty":"30804","toCty":"30372"}]
2024/10/24 00:03:29 [profile] [profile.module.admin.controller.booking.getamountbyvehicle] [T: 14177.67] [M: 24278.45] [ET: 0.621/14152.564] [MU: 3.34/24278.01] 
	SQL: SELECT stt_id, GROUP_CONCAT(DISTINCT zct_zon_id) zones, stt_zone AS region
				FROM   cities
				INNER JOIN states ON cty_state_id = stt_id AND stt_active = '1'
				LEFT JOIN zone_cities ON cty_id = zct_cty_id AND zct_active = 1
				LEFT JOIN zones ON zon_id=zct_zon_id AND zon_active=1
				WHERE  cty_id =:city AND cty_active = 1 
	 [params: {"city":"30804"}]
2024/10/24 00:03:29 [profile] [profile.module.admin.controller.booking.getamountbyvehicle] [T: 14179.944] [M: 24288.99] [ET: 2.091/14154.849] [MU: 3.53/24288.12] 
	SQL: SELECT service_class_rule.*,
					CASE 
						WHEN scr_area_type=1 THEN 10
						WHEN scr_area_type=2 THEN 5
						WHEN scr_area_type=3 THEN 20
						WHEN scr_area_type=4 THEN 3
						WHEN scr_area_type=5 THEN 25
						ELSE 1
					END AS rank FROM service_class_rule
				INNER JOIN svc_class_vhc_cat scv ON scv.scv_id = scr_scv_id
				WHERE ((scr_area_type = 3 AND scr_area_id IN (:gp98)) OR (scr_area_type = 5 AND scr_area_id IN (:gp96)) OR (scr_area_type = 2 AND scr_area_id IN (:gp99)) OR (scr_area_type = 4 AND scr_area_id IN (:gp100)) OR (scr_area_type = 1 AND scr_area_id IN (:gp97)) OR scr_area_type IS NULL) 
					AND scv.scv_id=:scv_id AND scr_active=1
				ORDER BY rank DESC
						 
	 [params: {":gp96":"4181",":gp97":"31",":gp98":"4181",":gp99":"105",":gp100":"1","scv_id":"72"}]
2024/10/24 00:03:29 [profile] [profile.module.admin.controller.booking.getamountbyvehicle] [T: 14180.826] [M: 24287.59] [ET: 0.554/14155.726] [MU: 0.9/24287.34] 
	SQL: SELECT rut_id FROM `route` WHERE rut_from_city_id =:fromCty AND rut_to_city_id=:toCty AND rut_active = 1 
	 [params: {"fromCty":"30804","toCty":"30372"}]
2024/10/24 00:03:29 [profile] [profile.module.admin.controller.booking.getamountbyvehicle] [T: 14182.339] [M: 24331.93] [ET: 0.68/14157.226] [MU: 2.96/24331.49] 
	SQL: SELECT stt_id, GROUP_CONCAT(DISTINCT zct_zon_id) zones, stt_zone AS region
				FROM   cities
				INNER JOIN states ON cty_state_id = stt_id AND stt_active = '1'
				LEFT JOIN zone_cities ON cty_id = zct_cty_id AND zct_active = 1
				LEFT JOIN zones ON zon_id=zct_zon_id AND zon_active=1
				WHERE  cty_id =:city AND cty_active = 1 
	 [params: {"city":"30804"}]
2024/10/24 00:03:29 [profile] [profile.module.admin.controller.booking.getamountbyvehicle] [T: 14183.38] [M: 24361.1] [ET: 0.862/14158.251] [MU: 22.53/24360.35] 
	SQL: SELECT area_price_rule.*,
					CASE area_price_rule.apr_area_type
					WHEN 1 THEN 10
					WHEN 2 THEN 5
					WHEN 3 THEN 20   
					ELSE 1
					END AS rank
				FROM area_price_rule 
				WHERE apr_active=1 AND ((apr_area_type = 3 AND apr_area_id IN (:gp103)) OR (apr_area_type = 5 AND apr_area_id IN (:gp101)) OR (apr_area_type = 2 AND apr_area_id IN (:gp104)) OR (apr_area_type = 4 AND apr_area_id IN (:gp105)) OR (apr_area_type = 1 AND apr_area_id IN (:gp102))) AND apr_cab_type=:cab ORDER BY rank DESC 
	 [params: {":gp101":"4181",":gp102":"31",":gp103":"30804",":gp104":"105",":gp105":"1","cab":"72"}]
2024/10/24 00:03:29 [profile] [profile.module.admin.controller.booking.getamountbyvehicle] [T: 14185.141] [M: 24348.12] [ET: 0.493/14160.055] [MU: 3.33/24347.68] 
	SQL: SELECT stt_id, GROUP_CONCAT(DISTINCT zct_zon_id) zones, stt_zone AS region
				FROM   cities
				INNER JOIN states ON cty_state_id = stt_id AND stt_active = '1'
				LEFT JOIN zone_cities ON cty_id = zct_cty_id AND zct_active = 1
				LEFT JOIN zones ON zon_id=zct_zon_id AND zon_active=1
				WHERE  cty_id =:city AND cty_active = 1 
	 [params: {"city":"30804"}]
2024/10/24 00:03:29 [profile] [profile.module.admin.controller.booking.getamountbyvehicle] [T: 14187.259] [M: 24358.66] [ET: 1.978/14162.165] [MU: 3.53/24357.79] 
	SQL: SELECT service_class_rule.*,
					CASE 
						WHEN scr_area_type=1 THEN 10
						WHEN scr_area_type=2 THEN 5
						WHEN scr_area_type=3 THEN 20
						WHEN scr_area_type=4 THEN 3
						WHEN scr_area_type=5 THEN 25
						ELSE 1
					END AS rank FROM service_class_rule
				INNER JOIN svc_class_vhc_cat scv ON scv.scv_id = scr_scv_id
				WHERE ((scr_area_type = 3 AND scr_area_id IN (:gp108)) OR (scr_area_type = 5 AND scr_area_id IN (:gp106)) OR (scr_area_type = 2 AND scr_area_id IN (:gp109)) OR (scr_area_type = 4 AND scr_area_id IN (:gp110)) OR (scr_area_type = 1 AND scr_area_id IN (:gp107)) OR scr_area_type IS NULL) 
					AND scv.scv_id=:scv_id AND scr_active=1
				ORDER BY rank DESC
						 
	 [params: {":gp106":"4181",":gp107":"31",":gp108":"4181",":gp109":"105",":gp110":"1","scv_id":"72"}]
2024/10/24 00:03:29 [profile] [profile.module.admin.controller.booking.getamountbyvehicle] [T: 14188.431] [M: 24363.41] [ET: 0.684/14163.318] [MU: 3.84/24362.54] 
	SQL: SELECT *
				FROM 
                   (
							SELECT cities_stats.cts_cty_id AS vnd_city, cities_stats.cts_vnd_cnt AS cnt, 0 AS distance
							FROM cities_stats
							WHERE     cities_stats.cts_cty_id = :city	AND cities_stats.cts_vnd_cnt >= 2

							UNION
							SELECT cities_stats.cts_cty_id AS vnd_city, cities_stats.cts_vnd_cnt AS cnt, IFNULL(rut_actual_distance, rut_estm_distance) AS distance
							FROM route
							INNER JOIN cities_stats  ON  cities_stats.cts_cty_id = route.rut_from_city_id AND cities_stats.cts_vnd_cnt >= 2 AND IFNULL(rut_actual_distance, rut_estm_distance) < 40
							WHERE rut_to_city_id = :city
							GROUP BY cities_stats.cts_cty_id   
                    ) a
				ORDER BY DISTANCE ASC 
	 [params: {":city":"30804"}]
2024/10/24 00:03:29 [profile] [profile.module.admin.controller.booking.getamountbyvehicle] [T: 14189.089] [M: 24371.23] [ET: 0.513/14163.98] [MU: 4.21/24370.35] 
	SQL: SELECT *
				FROM 
                   (
							SELECT cities_stats.cts_cty_id AS vnd_city, cities_stats.cts_vnd_cnt AS cnt, 0 AS distance
							FROM cities_stats
							WHERE     cities_stats.cts_cty_id = :city	AND cities_stats.cts_vnd_cnt >= 2

							UNION
							SELECT cities_stats.cts_cty_id AS vnd_city, cities_stats.cts_vnd_cnt AS cnt, IFNULL(rut_actual_distance, rut_estm_distance) AS distance
							FROM route
							INNER JOIN cities_stats  ON  cities_stats.cts_cty_id = route.rut_from_city_id AND cities_stats.cts_vnd_cnt >= 2 AND IFNULL(rut_actual_distance, rut_estm_distance) < 40
							WHERE rut_to_city_id = :city
							GROUP BY cities_stats.cts_cty_id   
                    ) a
				ORDER BY DISTANCE ASC 
	 [params: {":city":"30372"}]
2024/10/24 00:03:29 [profile] [profile.module.admin.controller.booking.getamountbyvehicle] [T: 14189.566] [M: 24375.37] [ET: 0.359/14164.468] [MU: 2.98/24375.26] 
	BookingRoute::calculateDistance
2024/10/24 00:03:29 [profile] [profile.module.admin.controller.booking.getamountbyvehicle] [T: 14192.703] [M: 24381.74] [ET: 2.875/14167.595] [MU: 2.41/24381.37] 
	SQL: SELECT *
				FROM   partner_rate prt 
				JOIN route rut ON prt.prt_route_id = rut.rut_id AND rut.rut_active = 1
				AND  rut.rut_from_city_id  = 30804 
				AND  rut.rut_to_city_id  = 30372 
				 WHERE prt_vehicletype_id = 72
				AND prt_partner_id = 1249
				AND prt_status = 1
				 
	 [params: []]
2024/10/24 00:03:29 [profile] [profile.module.admin.controller.booking.getamountbyvehicle] [T: 14193.709] [M: 24386.97] 
+++++++++++++++++++++++++++++++++++++++++++++++++++++++++++profile models.RouteRates.calculateDriverAllowance START++++++++++++++++++++++++++++++++++++++++++++++++++
	URL: [POST]/aaohome/booking/getamountbyvehicle
	User IP: 192.168.255.12
	Referrer: http://localhost:84/aaohome/booking/create
	POST: {"fromCity":"30804","toCity":"30372","cabType":"1","tripDistance":"","tripDuration":"","multiCityData":"","bookingType":"1","pickupAddress":"","pickupDate":"31\/10\/2024","pickupTime":"04:00 AM","isGozonow":"0","minTripDistance":"0","sccId":"0","tripUser":"1","YII_CSRF_TOKEN":"N3VxRE1WeG9UeHk5UWFBUFpPT216eWVyY0xWTVpoTkcUoJ2aBoup1fU2M5E4ePVZVcUNlKiYZZysUqEklNiKWw==","isAirportPickup":"1"}
	RawBody: fromCity=30804&toCity=30372&cabType=1&tripDistance=&tripDuration=&multiCityData=&bookingType=1&pickupAddress=&pickupDate=31%2F10%2F2024&pickupTime=04%3A00+AM&isGozonow=0&minTripDistance=0&sccId=0&tripUser=1&YII_CSRF_TOKEN=N3VxRE1WeG9UeHk5UWFBUFpPT216eWVyY0xWTVpoTkcUoJ2aBoup1fU2M5E4ePVZVcUNlKiYZZysUqEklNiKWw%3D%3D&isAirportPickup=1
	[UserID: 30] [UserType: 4]
2024/10/24 00:03:29 [profile] [profile.module.admin.controller.booking.getamountbyvehicle] [T: 14194.426] [M: 24406.53] [ET: 1.342/14169.337] [MU: 20.76/24406.42] 
	models.RouteRates.calculateDriverAllowance
2024/10/24 00:03:29 [profile] [profile.module.admin.controller.booking.getamountbyvehicle] [T: 14194.468] [M: 24408.21] 
============================================================Profile models.RouteRates.calculateDriverAllowance DONE==================================================
2024/10/24 00:03:29 [profile] [profile.module.admin.controller.booking.getamountbyvehicle] [T: 14195.491] [M: 24421.67] [ET: 0.865/14170.376] [MU: 2.99/24419.17] 
	SQL: SELECT * FROM (
                                SELECT *, FLOOR(IF((cpm_value_type=1),(cpm_value+15157),(IF((cpm_value_type=2),(15157+(15157*(cpm_value/100))),cpm_value))))amount,
                                    ((SELECT GROUP_CONCAT(z2.zct_zon_id) as srcZones FROM zone_cities z2
                                        WHERE z2.zct_active=1 AND zct_cty_id=30804 GROUP BY z2.zct_cty_id)) as srcZones,
                                    (SELECT GROUP_CONCAT(z2.zct_zon_id) as srcZones FROM zone_cities z2
                                        WHERE z2.zct_active=1 AND zct_cty_id=30372 GROUP BY z2.zct_cty_id) as dstZones,
                                    (
                                    IF(cpm_agent_id IS NOT NULL, 1,0) +
                                    IF(cpm_source_city IS NOT NULL,54,0) +
                                    IF(cpm_destination_city IS NOT NULL,54,0) +
                                    IF(cpm_source_zone IS NOT NULL,18,0) +
                                    IF(cpm_destination_zone IS NOT NULL,18,0) +
                                    IF(cpm_source_state IS NOT NULL,6,0) +
                                    IF(cpm_destination_state IS NOT NULL,6,0) +
                                    IF(cpm_trip_type IS NOT NULL,1,0) +
                                    IF(cpm_vehicle_type IS NOT NULL,1,0)
                               ) as rank
                                FROM `channel_partner_markup`
                                WHERE cpm_active=1) a
                            WHERE
                            (
                                (cpm_source_city IS NULL OR cpm_source_city=30804) AND
                                (cpm_destination_city IS NULL OR cpm_destination_city=30372) AND
                                (cpm_source_zone IS NULL OR cpm_source_zone IN (srcZones)) AND
                                (cpm_destination_zone IS NULL OR cpm_destination_zone IN (dstZones))
                            )
                            AND cpm_agent_id = 1249
                            AND ('2024-10-31 04:00:00' BETWEEN cpm_from_date AND cpm_to_date)  AND (cpm_vehicle_type=72 OR cpm_vehicle_type IS NULL)  AND (cpm_trip_type=1 OR cpm_trip_type IS NULL)
                        ORDER BY rank DESC, amount DESC  LIMIT 1 
	 [params: []]
2024/10/24 00:03:29 [profile] [profile.module.admin.controller.booking.getamountbyvehicle] [T: 14196.924] [M: 24463.9] [ET: 3.923/14171.839] [MU: 78.59/24463.74] 
	RouteRates::calculate for CAB 72 2024-10-31 04:00:00 - Trip Type: 1 125459940
2024/10/24 00:03:29 [profile] [profile.module.admin.controller.booking.getamountbyvehicle] [T: 14197.182] [M: 24443.52] [ET: 49.194/14172.093] [MU: 288.56/24443.36] 
	Quote::calculateOneWay  for CAB 72 Date: 2024-10-31 04:00:00
2024/10/24 00:03:29 [profile] [profile.module.admin.controller.booking.getamountbyvehicle] [T: 14197.48] [M: 24440.12] [ET: 0.208/14172.38] [MU: 0.9/24439.87] 
	SQL: SELECT svc.scv_scc_id FROM svc_class_vhc_cat svc
					-- INNER JOIN service_class scc ON svc.scv_scc_id=scc_id
					WHERE scv_id=:cabId 
	 [params: {"cabId":"72"}]
2024/10/24 00:03:29 [profile] [profile.module.admin.controller.booking.getamountbyvehicle] [T: 14197.584] [M: 24441.37] [ET: 56.589/14172.484] [MU: 328.96/24441.27] 
	Quote For CabType: 72
2024/10/24 00:03:29 [profile] [profile.module.admin.controller.booking.getamountbyvehicle] [T: 14199.251] [M: 24483.39] 
+++++++++++++++++++++++++++++++++++++++++++++++++++++++++++profile models.QuotesDataCreated.setData START++++++++++++++++++++++++++++++++++++++++++++++++++
	URL: [POST]/aaohome/booking/getamountbyvehicle
	User IP: 192.168.255.12
	Referrer: http://localhost:84/aaohome/booking/create
	POST: {"fromCity":"30804","toCity":"30372","cabType":"1","tripDistance":"","tripDuration":"","multiCityData":"","bookingType":"1","pickupAddress":"","pickupDate":"31\/10\/2024","pickupTime":"04:00 AM","isGozonow":"0","minTripDistance":"0","sccId":"0","tripUser":"1","YII_CSRF_TOKEN":"N3VxRE1WeG9UeHk5UWFBUFpPT216eWVyY0xWTVpoTkcUoJ2aBoup1fU2M5E4ePVZVcUNlKiYZZysUqEklNiKWw==","isAirportPickup":"1"}
	RawBody: fromCity=30804&toCity=30372&cabType=1&tripDistance=&tripDuration=&multiCityData=&bookingType=1&pickupAddress=&pickupDate=31%2F10%2F2024&pickupTime=04%3A00+AM&isGozonow=0&minTripDistance=0&sccId=0&tripUser=1&YII_CSRF_TOKEN=N3VxRE1WeG9UeHk5UWFBUFpPT216eWVyY0xWTVpoTkcUoJ2aBoup1fU2M5E4ePVZVcUNlKiYZZysUqEklNiKWw%3D%3D&isAirportPickup=1
	[UserID: 30] [UserType: 4]
2024/10/24 00:03:29 [profile] [profile.module.admin.controller.booking.getamountbyvehicle] [T: 14233.667] [M: 24564.75] [ET: 16.599/14208.517] [MU: 15.61/24564.64] 
	QuotesDataPickup::setData for CAB Array
2024/10/24 00:03:29 [profile] [profile.module.admin.controller.booking.getamountbyvehicle] [T: 14233.84] [M: 24560.33] [ET: 35.072/14208.729] [MU: 78.14/24560.22] 
	models.QuotesDataCreated.setData
2024/10/24 00:03:29 [profile] [profile.module.admin.controller.booking.getamountbyvehicle] [T: 14233.905] [M: 24562.01] 
============================================================Profile models.QuotesDataCreated.setData DONE==================================================
2024/10/24 00:03:29 [profile] [profile.module.admin.controller.booking.getamountbyvehicle] [T: 14234.128] [M: 24558.41] [ET: 13910.304/14209] [MU: 5749.68/24558.31] 
	models.Quote.getQuote
2024/10/24 00:03:29 [profile] [profile.module.admin.controller.booking.getamountbyvehicle] [T: 14234.347] [M: 24561.9] 
============================================================Profile models.Quote.getQuote DONE==================================================
2024/10/24 00:03:29 [profile] [profile.module.admin.controller.booking.getamountbyvehicle] [T: 14255.823] [M: 24955.85] [ET: 10.218/14230.721] [MU: 1.03/24955.48] 
	SQL: SELECT GROUP_CONCAT(zones.zon_id) as zones FROM cities c1
					INNER JOIN zone_cities ON zone_cities.zct_cty_id = c1.cty_id AND zct_active=1
					INNER JOIN zones ON zone_cities.zct_zon_id = zones.zon_id AND zon_active=1
					WHERE c1.cty_id = 30372 
	 [params: []]
2024/10/24 00:03:29 [profile] [profile.module.admin.controller.booking.getamountbyvehicle] [T: 14260.507] [M: 24961.15] [ET: 2.871/14235.385] [MU: 1.98/24960.77] 
	SQL: SELECT dzs_zone_type FROM dynamic_zone_surge WHERE dzs_fromzoneid IN (:gp111) AND dzs_tozoneid IN (:gp112,:gp113) AND dzs_scv_id=:cab AND dzs_booking_type=:tripType  ORDER BY  dzs_zone_type ASC 
	 [params: {":gp112":"191",":gp113":"1056",":gp111":"31","cab":1,"tripType":"1"}]
2024/10/24 00:03:29 [profile] [profile.module.admin.controller.booking.getamountbyvehicle] [T: 14266.482] [M: 24964.05] [ET: 5.365/14241.379] [MU: 1.24/24963.42] 
	SQL: SELECT prc_cancel_rule_id FROM `partner_cancel_rule` 
			WHERE (prc_zone_category = :zoneType OR prc_zone_category IS NULL)
		AND (prc_scc_id = :sccId OR prc_scc_id IS NULL)
		AND (prc_partner_id = :partnerId OR prc_partner_id IS NULL) 
		AND (prc_bkg_type = :tripType OR prc_bkg_type IS NULL) 
		 AND (prc_is_gozonow IS NULL) 
		AND prc_active=1  
		ORDER BY prc_partner_id DESC, prc_bkg_type DESC  
	 [params: {"zoneType":1,"sccId":"1","partnerId":null,"tripType":"1"}]
2024/10/24 00:03:29 [profile] [profile.module.admin.controller.booking.getamountbyvehicle] [T: 14269.066] [M: 25022.32] [ET: 0.431/14243.973] [MU: 2.97/25021.88] 
	SQL: SELECT stt_id, GROUP_CONCAT(DISTINCT zct_zon_id) zones, stt_zone AS region
				FROM   cities
				INNER JOIN states ON cty_state_id = stt_id AND stt_active = '1'
				LEFT JOIN zone_cities ON cty_id = zct_cty_id AND zct_active = 1
				LEFT JOIN zones ON zon_id=zct_zon_id AND zon_active=1
				WHERE  cty_id =:city AND cty_active = 1 
	 [params: {"city":"30804"}]
2024/10/24 00:03:29 [profile] [profile.module.admin.controller.booking.getamountbyvehicle] [T: 14271.81] [M: 25028.91] [ET: 2.026/14246.679] [MU: 2.34/25028.53] 
	SQL: SELECT dzs_zone_type FROM dynamic_zone_surge WHERE dzs_fromzoneid IN (:gp114) AND dzs_tozoneid IN (:gp115,:gp116) AND dzs_scv_id=:cab AND dzs_booking_type=:tripType  ORDER BY  dzs_zone_type ASC 
	 [params: {":gp115":"191",":gp116":"1056",":gp114":"31","cab":1,"tripType":"1"}]
2024/10/24 00:03:29 [profile] [profile.module.admin.controller.booking.getamountbyvehicle] [T: 14277.195] [M: 25058.95] [ET: 5.176/14252.063] [MU: 25.27/25057.7] 
	SQL: SELECT addon_cancellation_policy.*,
								CASE
											WHEN acp_area_type=1 AND acp_area_id IN (31) THEN 5
											WHEN acp_area_type=2 AND acp_area_id IN (105) THEN 15
											WHEN acp_area_type=3 AND acp_area_id IN (30804) THEN 20
											WHEN acp_area_type=4 AND acp_area_id IN (1) THEN 1
											WHEN acp_area_type=5 AND acp_area_id IN (-1) THEN 10
											ELSE 0
											END AS rank FROM addon_cancellation_policy
						WHERE (
								(acp_area_type = 1 AND acp_area_id IN (:gp117))
								OR (acp_area_type = 2 AND acp_area_id IN (:gp119))
								OR (acp_area_type = 3 AND acp_area_id IN (:gp118))
								OR (acp_area_type = 4 AND acp_area_id IN (:gp120))
								OR (acp_area_type = 5 AND acp_area_id IN (-1))
								OR acp_area_type IS NULL)
							AND acp_cr_from = :defCanRuleId AND acp_active=1 AND acp_is_allowed = 1
						ORDER BY rank DESC 
	 [params: {":gp117":"31",":gp118":"30804",":gp119":"105",":gp120":"1","defCanRuleId":"4"}]
2024/10/24 00:03:29 [profile] [profile.module.admin.controller.booking.getamountbyvehicle] [T: 14280.264] [M: 25055.88] [ET: 0.587/14255.167] [MU: 2.81/25055.7] 
	SQL: SELECT acp_cr_to,acp_margin_data FROM `addon_cancellation_policy` WHERE `acp_id` = :id 
	 [params: {"id":"8"}]
2024/10/24 00:03:29 [profile] [profile.module.admin.controller.booking.getamountbyvehicle] [T: 14302.295] [M: 25095.9] [ET: 0.416/14277.179] [MU: 1.42/25095.71] 
	SQL: SELECT acp_cr_to,acp_margin_data FROM `addon_cancellation_policy` WHERE `acp_id` = :id 
	 [params: {"id":"9"}]
2024/10/24 00:03:29 [profile] [profile.module.admin.controller.booking.getamountbyvehicle] [T: 14306.293] [M: 25176.03] [ET: 0.625/14281.186] [MU: 3.34/25175.59] 
	SQL: SELECT stt_id, GROUP_CONCAT(DISTINCT zct_zon_id) zones, stt_zone AS region
				FROM   cities
				INNER JOIN states ON cty_state_id = stt_id AND stt_active = '1'
				LEFT JOIN zone_cities ON cty_id = zct_cty_id AND zct_active = 1
				LEFT JOIN zones ON zon_id=zct_zon_id AND zon_active=1
				WHERE  cty_id =:city AND cty_active = 1 
	 [params: {"city":"30804"}]
2024/10/24 00:03:29 [profile] [profile.module.admin.controller.booking.getamountbyvehicle] [T: 14309.404] [M: 25182.49] [ET: 2.25/14284.281] [MU: 2.34/25182.12] 
	SQL: SELECT dzs_zone_type FROM dynamic_zone_surge WHERE dzs_fromzoneid IN (:gp121) AND dzs_tozoneid IN (:gp122,:gp123) AND dzs_scv_id=:cab AND dzs_booking_type=:tripType  ORDER BY  dzs_zone_type ASC 
	 [params: {":gp122":"191",":gp123":"1056",":gp121":"31","cab":1,"tripType":"1"}]
2024/10/24 00:03:29 [profile] [profile.module.admin.controller.booking.getamountbyvehicle] [T: 14314.27] [M: 25209.57] [ET: 4.679/14289.156] [MU: 22.67/25208.57] 
	SQL: SELECT addon_cab_models.*,
								CASE
											WHEN acm_area_type=1 AND acm_area_id IN (31) THEN 5
											WHEN acm_area_type=2 AND acm_area_id IN (105) THEN 15
											WHEN acm_area_type=3 AND acm_area_id IN (30804) THEN 20
											WHEN acm_area_type=4 AND acm_area_id IN (1) THEN 1
											WHEN acm_area_type=5 AND acm_area_id IN (-1) THEN 10
											ELSE 0
											END AS rank FROM addon_cab_models
						WHERE (
								(acm_area_type = 1 AND acm_area_id IN (:gp124))
								OR (acm_area_type = 2 AND acm_area_id IN (:gp126))
								OR (acm_area_type = 3 AND acm_area_id IN (:gp125))
								OR (acm_area_type = 4 AND acm_area_id IN (:gp127))
								OR (acm_area_type = 5 AND acm_area_id IN (-1))
								OR acm_area_type IS NULL)
							AND acm_scv_id_from = :svcId AND acm_active=1
						ORDER BY rank DESC 
	 [params: {":gp124":"31",":gp125":"30804",":gp126":"105",":gp127":"1","svcId":1}]
2024/10/24 00:03:29 [profile] [profile.module.admin.controller.booking.getamountbyvehicle] [T: 14339.138] [M: 25562.57] [ET: 15.996/14314.038] [MU: 26.85/25561.32] 
	SQL:  SELECT scv_id,scc_id, vct_id, scc_cancel_rule, scc_label,scc_rank, scv_label, scv_code, scc_model_year, 
								CONCAT(vct_label, ' (', scc_label , ')') label,
									vct_label,vct_rank, vct_desc, CONCAT(vct_label, ' ', vct_desc) vhcName, 
									vct_capacity, IF(vct_image IS NULL, 'images/cabs/no-image.png', vct_image) as vct_image, vct_big_bag_capacity, vct_small_bag_capacity, vcsc_small_bag, FLOOR(vcsc_small_bag/2) AS big_bag,
									scc_is_cng, scc_is_petrol_diesel, scc_id, scc_desc, IF( vct_id IN(5, 6), '1', '0' ) AS is_assured, scv_vct_id,scv_parent_id,scv_vct_id,scv_model,scv_scc_id
						FROM svc_class_vhc_cat
						INNER JOIN service_class ON scc_id = scv_scc_id
						INNER JOIN vehicle_category ON vct_id = scv_vct_id
						INNER JOIN vehicle_cat_svc_class on vcsc_ssc_id = scv_scc_id AND vcsc_vct_id = scv_vct_id
						WHERE scv_active = 1 
							AND scc_active = 1 
						AND vct_active = 1
		 AND scv_vct_id = 1 
	 [params: []]
2024/10/24 00:03:29 [profile] [profile.module.admin.controller.booking.getamountbyvehicle] [T: 14346.758] [M: 25530.63] [ET: 14256.249/14321.655] [MU: 15482.06/25530.5] 
	module.admin.controller.booking.getamountbyvehicle
2024/10/24 00:03:29 [profile] [profile.module.admin.controller.booking.getamountbyvehicle] [T: 14346.817] [M: 25531.27] 
*******************************************************module.admin.controller.booking.getamountbyvehicle ACTION DONE****************************************************************
2024/10/24 00:03:37 [profile] [profile.module.admin.controller.booking.getamountbyvehicle] [T: 107.133] [M: 10054.71] 
------------------------------------------------------module.admin.controller.booking.getamountbyvehicle ACTION START------------------------------------------------------
	URL: [POST]/aaohome/booking/getamountbyvehicle
	User IP: 192.168.255.12
	Referrer: http://localhost:84/aaohome/booking/create
	POST: {"fromCity":"30804","toCity":"30372","cabType":"1","tripDistance":"917","tripDuration":"930","multiCityData":"[{\"pickup_city\":\"30804\",\"drop_city\":\"30372\",\"pickup_address\":\"\",\"drop_address\":null,\"date\":\"2024-10-31 04:00:00\",\"distance\":\"917\",\"duration\":\"930\"}]","bookingType":"1","pickupAddress":"","dropupAddress":"","routeDataArr":[{"locLatVal":"","locLonVal":"","brtLocationVal":""},{"locLatVal":"","locLonVal":"","brtLocationVal":""}],"pickupDate":"31\/10\/2024","pickupTime":"04:00 AM","isGozonow":"0","minTripDistance":"0","tripUser":"1","YII_CSRF_TOKEN":"N3VxRE1WeG9UeHk5UWFBUFpPT216eWVyY0xWTVpoTkcUoJ2aBoup1fU2M5E4ePVZVcUNlKiYZZysUqEklNiKWw==","isAirportPickup":"1"}
	RawBody: fromCity=30804&toCity=30372&cabType=1&tripDistance=917&tripDuration=930&multiCityData=%5B%7B%22pickup_city%22%3A%2230804%22%2C%22drop_city%22%3A%2230372%22%2C%22pickup_address%22%3A%22%22%2C%22drop_address%22%3Anull%2C%22date%22%3A%222024-10-31+04%3A00%3A00%22%2C%22distance%22%3A%22917%22%2C%22duration%22%3A%22930%22%7D%5D&bookingType=1&pickupAddress=&dropupAddress=&routeDataArr%5B0%5D%5BlocLatVal%5D=&routeDataArr%5B0%5D%5BlocLonVal%5D=&routeDataArr%5B0%5D%5BbrtLocationVal%5D=&routeDataArr%5B1%5D%5BlocLatVal%5D=&routeDataArr%5B1%5D%5BlocLonVal%5D=&routeDataArr%5B1%5D%5BbrtLocationVal%5D=&pickupDate=31%2F10%2F2024&pickupTime=04%3A00+AM&isGozonow=0&minTripDistance=0&tripUser=1&YII_CSRF_TOKEN=N3VxRE1WeG9UeHk5UWFBUFpPT216eWVyY0xWTVpoTkcUoJ2aBoup1fU2M5E4ePVZVcUNlKiYZZysUqEklNiKWw%3D%3D&isAirportPickup=1
	[UserID: 30] [UserType: 4]
2024/10/24 00:03:37 [profile] [profile.module.admin.controller.booking.getamountbyvehicle] [T: 140.471] [M: 11290.91] setLocationRequest start
2024/10/24 00:03:37 [profile] [profile.module.admin.controller.booking.getamountbyvehicle] [T: 235.184] [M: 11291.42] setLocationRequest ends
2024/10/24 00:03:38 [profile] [profile.module.admin.controller.booking.getamountbyvehicle] [T: 308.672] [M: 18116.8] [ET: 0.29/277.904] [MU: 0.84/18116.62] 
	SQL: SELECT COUNT(1) as cnt FROM cities WHERE cty_active=1 AND cty_service_active=1 AND cty_id=30804 
	 [params: []]
2024/10/24 00:03:38 [profile] [profile.module.admin.controller.booking.getamountbyvehicle] [T: 308.934] [M: 18118.1] [ET: 0.186/278.169] [MU: 0.84/18117.91] 
	SQL: SELECT COUNT(1) as cnt FROM cities WHERE cty_active=1 AND cty_service_active=1 AND cty_id=30372 
	 [params: []]
2024/10/24 00:03:38 [profile] [profile.module.admin.controller.booking.getamountbyvehicle] [T: 327.155] [M: 18604.98] [ET: 18.124/296.343] [MU: 486.78/18604.88] 
	BookingRoute::calculateDistance
2024/10/24 00:03:38 [profile] [profile.module.admin.controller.booking.getamountbyvehicle] [T: 328.07] [M: 18602.4] [ET: 0.509/297.267] [MU: 5.12/18602.29] 
	BookingRoute::calculateDistance
2024/10/24 00:03:38 [profile] [profile.module.admin.controller.booking.getamountbyvehicle] [T: 328.304] [M: 18598.45] [ET: 55.18/297.434] [MU: 5974.33/18598.35] 
	validateRoutes
2024/10/24 00:03:38 [profile] [profile.module.admin.controller.booking.getamountbyvehicle] [T: 332.653] [M: 18831.56] [ET: 0.896/301.859] [MU: 27.08/18831.34] 
	SQL: SELECT scv_id FROM svc_class_vhc_cat WHERE scv_active = 1 AND scv_scc_id IN (1,2,4,6) ORDER BY scv_vct_id ASC,scv_scc_id ASC 
	 [params: []]
2024/10/24 00:03:38 [profile] [profile.module.admin.controller.booking.getamountbyvehicle] [T: 335.619] [M: 18820.39] 
+++++++++++++++++++++++++++++++++++++++++++++++++++++++++++profile models.Quote.getQuote START++++++++++++++++++++++++++++++++++++++++++++++++++
	URL: [POST]/aaohome/booking/getamountbyvehicle
	User IP: 192.168.255.12
	Referrer: http://localhost:84/aaohome/booking/create
	POST: {"fromCity":"30804","toCity":"30372","cabType":"1","tripDistance":"917","tripDuration":"930","multiCityData":"[{\"pickup_city\":\"30804\",\"drop_city\":\"30372\",\"pickup_address\":\"\",\"drop_address\":null,\"date\":\"2024-10-31 04:00:00\",\"distance\":\"917\",\"duration\":\"930\"}]","bookingType":"1","pickupAddress":"","dropupAddress":"","routeDataArr":[{"locLatVal":"","locLonVal":"","brtLocationVal":""},{"locLatVal":"","locLonVal":"","brtLocationVal":""}],"pickupDate":"31\/10\/2024","pickupTime":"04:00 AM","isGozonow":"0","minTripDistance":"0","tripUser":"1","YII_CSRF_TOKEN":"N3VxRE1WeG9UeHk5UWFBUFpPT216eWVyY0xWTVpoTkcUoJ2aBoup1fU2M5E4ePVZVcUNlKiYZZysUqEklNiKWw==","isAirportPickup":"1"}
	RawBody: fromCity=30804&toCity=30372&cabType=1&tripDistance=917&tripDuration=930&multiCityData=%5B%7B%22pickup_city%22%3A%2230804%22%2C%22drop_city%22%3A%2230372%22%2C%22pickup_address%22%3A%22%22%2C%22drop_address%22%3Anull%2C%22date%22%3A%222024-10-31+04%3A00%3A00%22%2C%22distance%22%3A%22917%22%2C%22duration%22%3A%22930%22%7D%5D&bookingType=1&pickupAddress=&dropupAddress=&routeDataArr%5B0%5D%5BlocLatVal%5D=&routeDataArr%5B0%5D%5BlocLonVal%5D=&routeDataArr%5B0%5D%5BbrtLocationVal%5D=&routeDataArr%5B1%5D%5BlocLatVal%5D=&routeDataArr%5B1%5D%5BlocLonVal%5D=&routeDataArr%5B1%5D%5BbrtLocationVal%5D=&pickupDate=31%2F10%2F2024&pickupTime=04%3A00+AM&isGozonow=0&minTripDistance=0&tripUser=1&YII_CSRF_TOKEN=N3VxRE1WeG9UeHk5UWFBUFpPT216eWVyY0xWTVpoTkcUoJ2aBoup1fU2M5E4ePVZVcUNlKiYZZysUqEklNiKWw%3D%3D&isAirportPickup=1
	[UserID: 30] [UserType: 4]
2024/10/24 00:03:38 [profile] [profile.module.admin.controller.booking.getamountbyvehicle] [T: 338.575] [M: 18949.77] [ET: 0.48/307.798] [MU: 8.84/18949.34] 
	SQL: SELECT stt_id, GROUP_CONCAT(DISTINCT zct_zon_id) zones, stt_zone AS region
				FROM   cities
				INNER JOIN states ON cty_state_id = stt_id AND stt_active = '1'
				LEFT JOIN zone_cities ON cty_id = zct_cty_id AND zct_active = 1
				LEFT JOIN zones ON zon_id=zct_zon_id AND zon_active=1
				WHERE  cty_id =:city AND cty_active = 1 
	 [params: {"city":"30804"}]
2024/10/24 00:03:38 [profile] [profile.module.admin.controller.booking.getamountbyvehicle] [T: 339.053] [M: 18954.73] [ET: 0.397/308.279] [MU: 3.34/18954.29] 
	SQL: SELECT stt_id, GROUP_CONCAT(DISTINCT zct_zon_id) zones, stt_zone AS region
				FROM   cities
				INNER JOIN states ON cty_state_id = stt_id AND stt_active = '1'
				LEFT JOIN zone_cities ON cty_id = zct_cty_id AND zct_active = 1
				LEFT JOIN zones ON zon_id=zct_zon_id AND zon_active=1
				WHERE  cty_id =:city AND cty_active = 1 
	 [params: {"city":"30372"}]
2024/10/24 00:03:38 [profile] [profile.module.admin.controller.booking.getamountbyvehicle] [T: 339.643] [M: 18956.77] [ET: 0.505/308.865] [MU: 0.9/18956.55] 
	SQL: SELECT rut_id FROM `route` WHERE rut_from_city_id =:fromCty AND rut_to_city_id=:toCty AND rut_active = 1 
	 [params: {"fromCty":"30804","toCty":"30372"}]
2024/10/24 00:03:38 [profile] [profile.module.admin.controller.booking.getamountbyvehicle] [T: 340.7] [M: 19007.92] [ET: 0.93/309.912] [MU: 43.6/19006.42] 
	SQL: SELECT scv_id, CASE
				WHEN scr_area_type=1 AND scr_area_id IN (31) THEN 10
				WHEN scr_area_type=1 AND scr_area_id IN (0) THEN 9
				WHEN scr_area_type=2 AND scr_area_id IN (105) THEN 5
				WHEN scr_area_type=2 AND scr_area_id IN (86) THEN 4
				WHEN scr_area_type=3 AND scr_area_id IN (30804) THEN 20
				WHEN scr_area_type=3 AND scr_area_id IN (30372) THEN 19
				WHEN scr_area_type=4 AND scr_area_id IN (1) THEN 3
				WHEN scr_area_type=4 AND scr_area_id IN (2) THEN 2
				WHEN scr_area_type=5 THEN 25
				ELSE 1
				END AS rank, 
			scc_id, scr_is_allowed 
		FROM service_class_rule 
		INNER JOIN svc_class_vhc_cat ON scv_id = scr_scv_id AND scv_active = 1
		INNER JOIN service_class ON scv_scc_id = scc_id
		WHERE   ((scr_area_type = 1 AND scr_area_id IN (:gp0)) 
			OR (scr_area_type = 2 AND scr_area_id IN (:gp3,:gp4)) 
			OR (scr_area_type = 3 AND scr_area_id IN (:gp1,:gp2)) 
			OR (scr_area_type = 4 AND scr_area_id IN (:gp5,:gp6))
			OR (scr_area_type = 5 AND scr_area_id IN (4181))
			OR scr_area_type IS NULL)
			AND (scr_trip_type = :tripType OR scr_trip_type IS NULL) 
			AND scr_active = 1 AND scv_id IN (1)
		ORDER BY rank DESC
		 
	 [params: {":gp0":"31",":gp1":"30804",":gp2":"30372",":gp3":"105",":gp4":"86",":gp5":"1",":gp6":"2","tripType":"1"}]
2024/10/24 00:03:38 [profile] [profile.module.admin.controller.booking.getamountbyvehicle] [T: 356.317] [M: 19058.28] [ET: 0.597/325.506] [MU: 0.84/19058.09] 
	SQL: SELECT cts_category FROM cities_stats WHERE cts_cty_id = :cityId 
	 [params: {"cityId":"30804"}]
2024/10/24 00:03:38 [profile] [profile.module.admin.controller.booking.getamountbyvehicle] [T: 357.053] [M: 19060.57] [ET: 0.578/326.246] [MU: 0.96/19060.26] 
	SQL: SELECT GROUP_CONCAT(adn_id) as ids FROM addon_service_class_rule INNER JOIN addons ON ascr_adn_id = adn_id AND adn_active=1 AND ascr_active = 1 WHERE ascr_cty_category=:cat AND ascr_scc_id=:class 
	 [params: {"cat":2,"class":"1"}]
2024/10/24 00:03:38 [profile] [profile.module.admin.controller.booking.getamountbyvehicle] [T: 379.054] [M: 19513.11] [ET: 0.69/348.257] [MU: 5.85/19512.23] 
	SQL: SELECT route.rut_id, route.rut_from_city_id start,route.rut_to_city_id end, NULL AS fromAlias, NULL AS toAlias, rut_name,route.rut_estm_distance as quotedDistance, route.rut_estm_distance as rateDistance,
                                0 AS extraDistance, 
								0 AS extraStartDistance,
								1 as rank,
                                0 as startTime, 0 as endTime, route.rut_estm_time,rate.*
                        FROM   route
						INNER JOIN rate ON rut_id = rate.rte_route_id AND rate.rte_status=1 AND rate.rte_vendor_amount>0 AND rate.rte_vehicletype_id=:cabType
                        WHERE  rut_active = 1 AND route.rut_from_city_id =:fromCity AND route.rut_to_city_id =:toCity 
	 [params: {"cabType":"1","fromCity":"30804","toCity":"30372"}]
2024/10/24 00:03:38 [profile] [profile.module.admin.controller.booking.getamountbyvehicle] [T: 382.217] [M: 19680.1] [ET: 0.622/351.421] [MU: 0.89/19679.85] 
	SQL: SELECT rut_id FROM `route` WHERE rut_from_city_id =:fromCty AND rut_to_city_id=:toCty AND rut_active = 1 
	 [params: {"fromCty":"30804","toCty":"30372"}]
2024/10/24 00:03:38 [profile] [profile.module.admin.controller.booking.getamountbyvehicle] [T: 385.52] [M: 19807.66] [ET: 0.584/354.736] [MU: 3.34/19807.23] 
	SQL: SELECT stt_id, GROUP_CONCAT(DISTINCT zct_zon_id) zones, stt_zone AS region
				FROM   cities
				INNER JOIN states ON cty_state_id = stt_id AND stt_active = '1'
				LEFT JOIN zone_cities ON cty_id = zct_cty_id AND zct_active = 1
				LEFT JOIN zones ON zon_id=zct_zon_id AND zon_active=1
				WHERE  cty_id =:city AND cty_active = 1 
	 [params: {"city":"30804"}]
2024/10/24 00:03:38 [profile] [profile.module.admin.controller.booking.getamountbyvehicle] [T: 386.411] [M: 19839.52] [ET: 0.715/355.639] [MU: 25.35/19838.77] 
	SQL: SELECT area_price_rule.*,
					CASE area_price_rule.apr_area_type
					WHEN 1 THEN 10
					WHEN 2 THEN 5
					WHEN 3 THEN 20   
					ELSE 1
					END AS rank
				FROM area_price_rule 
				WHERE apr_active=1 AND ((apr_area_type = 3 AND apr_area_id IN (:gp9)) OR (apr_area_type = 5 AND apr_area_id IN (:gp7)) OR (apr_area_type = 2 AND apr_area_id IN (:gp10)) OR (apr_area_type = 4 AND apr_area_id IN (:gp11)) OR (apr_area_type = 1 AND apr_area_id IN (:gp8))) AND apr_cab_type=:cab ORDER BY rank DESC 
	 [params: {":gp7":"4181",":gp8":"31",":gp9":"30804",":gp10":"105",":gp11":"1","cab":"1"}]
2024/10/24 00:03:38 [profile] [profile.module.admin.controller.booking.getamountbyvehicle] [T: 413.426] [M: 21388.32] [ET: 0.679/382.622] [MU: 4.21/21387.45] 
	SQL: SELECT *
				FROM 
                   (
							SELECT cities_stats.cts_cty_id AS vnd_city, cities_stats.cts_vnd_cnt AS cnt, 0 AS distance
							FROM cities_stats
							WHERE     cities_stats.cts_cty_id = :city	AND cities_stats.cts_vnd_cnt >= 2

							UNION
							SELECT cities_stats.cts_cty_id AS vnd_city, cities_stats.cts_vnd_cnt AS cnt, IFNULL(rut_actual_distance, rut_estm_distance) AS distance
							FROM route
							INNER JOIN cities_stats  ON  cities_stats.cts_cty_id = route.rut_from_city_id AND cities_stats.cts_vnd_cnt >= 2 AND IFNULL(rut_actual_distance, rut_estm_distance) < 40
							WHERE rut_to_city_id = :city
							GROUP BY cities_stats.cts_cty_id   
                    ) a
				ORDER BY DISTANCE ASC 
	 [params: {":city":"30804"}]
2024/10/24 00:03:38 [profile] [profile.module.admin.controller.booking.getamountbyvehicle] [T: 429.309] [M: 21436.5] [ET: 0.907/398.496] [MU: 4.21/21435.63] 
	SQL: SELECT *
				FROM 
                   (
							SELECT cities_stats.cts_cty_id AS vnd_city, cities_stats.cts_vnd_cnt AS cnt, 0 AS distance
							FROM cities_stats
							WHERE     cities_stats.cts_cty_id = :city	AND cities_stats.cts_vnd_cnt >= 2

							UNION
							SELECT cities_stats.cts_cty_id AS vnd_city, cities_stats.cts_vnd_cnt AS cnt, IFNULL(rut_actual_distance, rut_estm_distance) AS distance
							FROM route
							INNER JOIN cities_stats  ON  cities_stats.cts_cty_id = route.rut_from_city_id AND cities_stats.cts_vnd_cnt >= 2 AND IFNULL(rut_actual_distance, rut_estm_distance) < 40
							WHERE rut_to_city_id = :city
							GROUP BY cities_stats.cts_cty_id   
                    ) a
				ORDER BY DISTANCE ASC 
	 [params: {":city":"30372"}]
2024/10/24 00:03:38 [profile] [profile.module.admin.controller.booking.getamountbyvehicle] [T: 433.113] [M: 21453.48] [ET: 0.912/401.915] [MU: 7.13/21453.37] 
	BookingRoute::calculateDistance
2024/10/24 00:03:38 [profile] [profile.module.admin.controller.booking.getamountbyvehicle] [T: 436.41] [M: 21491.22] [ET: 0.961/405.601] [MU: 2.66/21490.84] 
	SQL: SELECT *
				FROM   partner_rate prt 
				JOIN route rut ON prt.prt_route_id = rut.rut_id AND rut.rut_active = 1
				AND  rut.rut_from_city_id  = 30804 
				AND  rut.rut_to_city_id  = 30372 
				 WHERE prt_vehicletype_id = 1
				AND prt_partner_id = 1249
				AND prt_status = 1
				 
	 [params: []]
2024/10/24 00:03:38 [profile] [profile.module.admin.controller.booking.getamountbyvehicle] [T: 437.533] [M: 21497.2] 
+++++++++++++++++++++++++++++++++++++++++++++++++++++++++++profile models.RouteRates.calculateDriverAllowance START++++++++++++++++++++++++++++++++++++++++++++++++++
	URL: [POST]/aaohome/booking/getamountbyvehicle
	User IP: 192.168.255.12
	Referrer: http://localhost:84/aaohome/booking/create
	POST: {"fromCity":"30804","toCity":"30372","cabType":"1","tripDistance":"917","tripDuration":"930","multiCityData":"[{\"pickup_city\":\"30804\",\"drop_city\":\"30372\",\"pickup_address\":\"\",\"drop_address\":null,\"date\":\"2024-10-31 04:00:00\",\"distance\":\"917\",\"duration\":\"930\"}]","bookingType":"1","pickupAddress":"","dropupAddress":"","routeDataArr":[{"locLatVal":"","locLonVal":"","brtLocationVal":""},{"locLatVal":"","locLonVal":"","brtLocationVal":""}],"pickupDate":"31\/10\/2024","pickupTime":"04:00 AM","isGozonow":"0","minTripDistance":"0","tripUser":"1","YII_CSRF_TOKEN":"N3VxRE1WeG9UeHk5UWFBUFpPT216eWVyY0xWTVpoTkcUoJ2aBoup1fU2M5E4ePVZVcUNlKiYZZysUqEklNiKWw==","isAirportPickup":"1"}
	RawBody: fromCity=30804&toCity=30372&cabType=1&tripDistance=917&tripDuration=930&multiCityData=%5B%7B%22pickup_city%22%3A%2230804%22%2C%22drop_city%22%3A%2230372%22%2C%22pickup_address%22%3A%22%22%2C%22drop_address%22%3Anull%2C%22date%22%3A%222024-10-31+04%3A00%3A00%22%2C%22distance%22%3A%22917%22%2C%22duration%22%3A%22930%22%7D%5D&bookingType=1&pickupAddress=&dropupAddress=&routeDataArr%5B0%5D%5BlocLatVal%5D=&routeDataArr%5B0%5D%5BlocLonVal%5D=&routeDataArr%5B0%5D%5BbrtLocationVal%5D=&routeDataArr%5B1%5D%5BlocLatVal%5D=&routeDataArr%5B1%5D%5BlocLonVal%5D=&routeDataArr%5B1%5D%5BbrtLocationVal%5D=&pickupDate=31%2F10%2F2024&pickupTime=04%3A00+AM&isGozonow=0&minTripDistance=0&tripUser=1&YII_CSRF_TOKEN=N3VxRE1WeG9UeHk5UWFBUFpPT216eWVyY0xWTVpoTkcUoJ2aBoup1fU2M5E4ePVZVcUNlKiYZZysUqEklNiKWw%3D%3D&isAirportPickup=1
	[UserID: 30] [UserType: 4]
2024/10/24 00:03:38 [profile] [profile.module.admin.controller.booking.getamountbyvehicle] [T: 438.11] [M: 21519.01] [ET: 1.221/407.341] [MU: 23.76/21518.9] 
	models.RouteRates.calculateDriverAllowance
2024/10/24 00:03:38 [profile] [profile.module.admin.controller.booking.getamountbyvehicle] [T: 438.145] [M: 21520.69] 
============================================================Profile models.RouteRates.calculateDriverAllowance DONE==================================================
2024/10/24 00:03:38 [profile] [profile.module.admin.controller.booking.getamountbyvehicle] [T: 440.66] [M: 21603.65] [ET: 1.25/409.879] [MU: 3.19/21601.15] 
	SQL: SELECT * FROM (
                                SELECT *, FLOOR(IF((cpm_value_type=1),(cpm_value+15157),(IF((cpm_value_type=2),(15157+(15157*(cpm_value/100))),cpm_value))))amount,
                                    ((SELECT GROUP_CONCAT(z2.zct_zon_id) as srcZones FROM zone_cities z2
                                        WHERE z2.zct_active=1 AND zct_cty_id=30804 GROUP BY z2.zct_cty_id)) as srcZones,
                                    (SELECT GROUP_CONCAT(z2.zct_zon_id) as srcZones FROM zone_cities z2
                                        WHERE z2.zct_active=1 AND zct_cty_id=30372 GROUP BY z2.zct_cty_id) as dstZones,
                                    (
                                    IF(cpm_agent_id IS NOT NULL, 1,0) +
                                    IF(cpm_source_city IS NOT NULL,54,0) +
                                    IF(cpm_destination_city IS NOT NULL,54,0) +
                                    IF(cpm_source_zone IS NOT NULL,18,0) +
                                    IF(cpm_destination_zone IS NOT NULL,18,0) +
                                    IF(cpm_source_state IS NOT NULL,6,0) +
                                    IF(cpm_destination_state IS NOT NULL,6,0) +
                                    IF(cpm_trip_type IS NOT NULL,1,0) +
                                    IF(cpm_vehicle_type IS NOT NULL,1,0)
                               ) as rank
                                FROM `channel_partner_markup`
                                WHERE cpm_active=1) a
                            WHERE
                            (
                                (cpm_source_city IS NULL OR cpm_source_city=30804) AND
                                (cpm_destination_city IS NULL OR cpm_destination_city=30372) AND
                                (cpm_source_zone IS NULL OR cpm_source_zone IN (srcZones)) AND
                                (cpm_destination_zone IS NULL OR cpm_destination_zone IN (dstZones))
                            )
                            AND cpm_agent_id = 1249
                            AND ('2024-10-31 04:00:00' BETWEEN cpm_from_date AND cpm_to_date)  AND (cpm_vehicle_type=1 OR cpm_vehicle_type IS NULL)  AND (cpm_trip_type=1 OR cpm_trip_type IS NULL)
                        ORDER BY rank DESC, amount DESC  LIMIT 1 
	 [params: []]
2024/10/24 00:03:38 [profile] [profile.module.admin.controller.booking.getamountbyvehicle] [T: 474.081] [M: 22957.09] [ET: 37.308/443.303] [MU: 1462.31/22956.94] 
	RouteRates::calculate for CAB 1 2024-10-31 04:00:00 - Trip Type: 1 378182702
2024/10/24 00:03:38 [profile] [profile.module.admin.controller.booking.getamountbyvehicle] [T: 474.369] [M: 22936] [ET: 96.3/443.593] [MU: 3433.2/22935.88] 
	Quote::calculateOneWay  for CAB 1 Date: 2024-10-31 04:00:00
2024/10/24 00:03:38 [profile] [profile.module.admin.controller.booking.getamountbyvehicle] [T: 474.738] [M: 22931.82] [ET: 0.269/443.952] [MU: 0.9/22931.57] 
	SQL: SELECT svc.scv_scc_id FROM svc_class_vhc_cat svc
					-- INNER JOIN service_class scc ON svc.scv_scc_id=scc_id
					WHERE scv_id=:cabId 
	 [params: {"cabId":"1"}]
2024/10/24 00:03:38 [profile] [profile.module.admin.controller.booking.getamountbyvehicle] [T: 474.883] [M: 22932.42] [ET: 139.069/444.084] [MU: 4108.79/22932.33] 
	Quote For CabType: 1
2024/10/24 00:03:38 [profile] [profile.module.admin.controller.booking.getamountbyvehicle] [T: 476.248] [M: 22946.19] [ET: 0.545/445.471] [MU: 3.33/22945.75] 
	SQL: SELECT stt_id, GROUP_CONCAT(DISTINCT zct_zon_id) zones, stt_zone AS region
				FROM   cities
				INNER JOIN states ON cty_state_id = stt_id AND stt_active = '1'
				LEFT JOIN zone_cities ON cty_id = zct_cty_id AND zct_active = 1
				LEFT JOIN zones ON zon_id=zct_zon_id AND zon_active=1
				WHERE  cty_id =:city AND cty_active = 1 
	 [params: {"city":"30804"}]
2024/10/24 00:03:38 [profile] [profile.module.admin.controller.booking.getamountbyvehicle] [T: 476.728] [M: 22951.14] [ET: 0.399/445.956] [MU: 3.35/22950.7] 
	SQL: SELECT stt_id, GROUP_CONCAT(DISTINCT zct_zon_id) zones, stt_zone AS region
				FROM   cities
				INNER JOIN states ON cty_state_id = stt_id AND stt_active = '1'
				LEFT JOIN zone_cities ON cty_id = zct_cty_id AND zct_active = 1
				LEFT JOIN zones ON zon_id=zct_zon_id AND zon_active=1
				WHERE  cty_id =:city AND cty_active = 1 
	 [params: {"city":"30372"}]
2024/10/24 00:03:38 [profile] [profile.module.admin.controller.booking.getamountbyvehicle] [T: 477.376] [M: 22953.21] [ET: 0.556/446.583] [MU: 0.89/22952.96] 
	SQL: SELECT rut_id FROM `route` WHERE rut_from_city_id =:fromCty AND rut_to_city_id=:toCty AND rut_active = 1 
	 [params: {"fromCty":"30804","toCty":"30372"}]
2024/10/24 00:03:38 [profile] [profile.module.admin.controller.booking.getamountbyvehicle] [T: 478.028] [M: 22984.95] [ET: 0.525/447.24] [MU: 24.22/22983.45] 
	SQL: SELECT scv_id, CASE
				WHEN scr_area_type=1 AND scr_area_id IN (31) THEN 10
				WHEN scr_area_type=1 AND scr_area_id IN (0) THEN 9
				WHEN scr_area_type=2 AND scr_area_id IN (105) THEN 5
				WHEN scr_area_type=2 AND scr_area_id IN (86) THEN 4
				WHEN scr_area_type=3 AND scr_area_id IN (30804) THEN 20
				WHEN scr_area_type=3 AND scr_area_id IN (30372) THEN 19
				WHEN scr_area_type=4 AND scr_area_id IN (1) THEN 3
				WHEN scr_area_type=4 AND scr_area_id IN (2) THEN 2
				WHEN scr_area_type=5 THEN 25
				ELSE 1
				END AS rank, 
			scc_id, scr_is_allowed 
		FROM service_class_rule 
		INNER JOIN svc_class_vhc_cat ON scv_id = scr_scv_id AND scv_active = 1
		INNER JOIN service_class ON scv_scc_id = scc_id
		WHERE   ((scr_area_type = 1 AND scr_area_id IN (:gp12)) 
			OR (scr_area_type = 2 AND scr_area_id IN (:gp15,:gp16)) 
			OR (scr_area_type = 3 AND scr_area_id IN (:gp13,:gp14)) 
			OR (scr_area_type = 4 AND scr_area_id IN (:gp17,:gp18))
			OR (scr_area_type = 5 AND scr_area_id IN (4181))
			OR scr_area_type IS NULL)
			AND (scr_trip_type = :tripType OR scr_trip_type IS NULL) 
			AND scr_active = 1 AND scv_id IN (14)
		ORDER BY rank DESC
		 
	 [params: {":gp12":"31",":gp13":"30804",":gp14":"30372",":gp15":"105",":gp16":"86",":gp17":"1",":gp18":"2","tripType":"1"}]
2024/10/24 00:03:38 [profile] [profile.module.admin.controller.booking.getamountbyvehicle] [T: 478.739] [M: 22963.26] [ET: 0.198/447.959] [MU: 0.83/22963.07] 
	SQL: SELECT cts_category FROM cities_stats WHERE cts_cty_id = :cityId 
	 [params: {"cityId":"30804"}]
2024/10/24 00:03:38 [profile] [profile.module.admin.controller.booking.getamountbyvehicle] [T: 479.086] [M: 22973.55] [ET: 0.259/448.305] [MU: 0.96/22973.23] 
	SQL: SELECT GROUP_CONCAT(adn_id) as ids FROM addon_service_class_rule INNER JOIN addons ON ascr_adn_id = adn_id AND adn_active=1 AND ascr_active = 1 WHERE ascr_cty_category=:cat AND ascr_scc_id=:class 
	 [params: {"cat":2,"class":"2"}]
2024/10/24 00:03:38 [profile] [profile.module.admin.controller.booking.getamountbyvehicle] [T: 480.624] [M: 22990.66] [ET: 0.51/449.849] [MU: 3.78/22989.79] 
	SQL: SELECT route.rut_id, route.rut_from_city_id start,route.rut_to_city_id end, NULL AS fromAlias, NULL AS toAlias, rut_name,route.rut_estm_distance as quotedDistance, route.rut_estm_distance as rateDistance,
                                0 AS extraDistance, 
								0 AS extraStartDistance,
								1 as rank,
                                0 as startTime, 0 as endTime, route.rut_estm_time,rate.*
                        FROM   route
						INNER JOIN rate ON rut_id = rate.rte_route_id AND rate.rte_status=1 AND rate.rte_vendor_amount>0 AND rate.rte_vehicletype_id=:cabType
                        WHERE  rut_active = 1 AND route.rut_from_city_id =:fromCity AND route.rut_to_city_id =:toCity 
	 [params: {"cabType":"14","fromCity":"30804","toCity":"30372"}]
2024/10/24 00:03:38 [profile] [profile.module.admin.controller.booking.getamountbyvehicle] [T: 482.159] [M: 23009.07] [ET: 0.44/451.388] [MU: 5.56/23008.2] 
	SQL: SELECT route.rut_id, route.rut_from_city_id start,route.rut_to_city_id end, NULL AS fromAlias, NULL AS toAlias, rut_name,route.rut_estm_distance as quotedDistance, route.rut_estm_distance as rateDistance,
                                0 AS extraDistance, 
								0 AS extraStartDistance,
								1 as rank,
                                0 as startTime, 0 as endTime, route.rut_estm_time,rate.*
                        FROM   route
						INNER JOIN rate ON rut_id = rate.rte_route_id AND rate.rte_status=1 AND rate.rte_vendor_amount>0 AND rate.rte_vehicletype_id=:cabType
                        WHERE  rut_active = 1 AND route.rut_from_city_id =:fromCity AND route.rut_to_city_id =:toCity 
	 [params: {"cabType":"1","fromCity":"30804","toCity":"30372"}]
2024/10/24 00:03:38 [profile] [profile.module.admin.controller.booking.getamountbyvehicle] [T: 482.836] [M: 23016.3] [ET: 0.439/452.068] [MU: 0.9/23016.09] 
	SQL: SELECT rut_id FROM `route` WHERE rut_from_city_id =:fromCty AND rut_to_city_id=:toCty AND rut_active = 1 
	 [params: {"fromCty":"30804","toCty":"30372"}]
2024/10/24 00:03:38 [profile] [profile.module.admin.controller.booking.getamountbyvehicle] [T: 484.187] [M: 23026.93] [ET: 0.844/453.402] [MU: 3.33/23026.49] 
	SQL: SELECT stt_id, GROUP_CONCAT(DISTINCT zct_zon_id) zones, stt_zone AS region
				FROM   cities
				INNER JOIN states ON cty_state_id = stt_id AND stt_active = '1'
				LEFT JOIN zone_cities ON cty_id = zct_cty_id AND zct_active = 1
				LEFT JOIN zones ON zon_id=zct_zon_id AND zon_active=1
				WHERE  cty_id =:city AND cty_active = 1 
	 [params: {"city":"30804"}]
2024/10/24 00:03:38 [profile] [profile.module.admin.controller.booking.getamountbyvehicle] [T: 487.236] [M: 23037.64] [ET: 2.891/456.46] [MU: 3.7/23036.77] 
	SQL: SELECT service_class_rule.*,
					CASE 
						WHEN scr_area_type=1 THEN 10
						WHEN scr_area_type=2 THEN 5
						WHEN scr_area_type=3 THEN 20
						WHEN scr_area_type=4 THEN 3
						WHEN scr_area_type=5 THEN 25
						ELSE 1
					END AS rank FROM service_class_rule
				INNER JOIN svc_class_vhc_cat scv ON scv.scv_id = scr_scv_id
				WHERE ((scr_area_type = 3 AND scr_area_id IN (:gp21)) OR (scr_area_type = 5 AND scr_area_id IN (:gp19)) OR (scr_area_type = 2 AND scr_area_id IN (:gp22)) OR (scr_area_type = 4 AND scr_area_id IN (:gp23)) OR (scr_area_type = 1 AND scr_area_id IN (:gp20)) OR scr_area_type IS NULL) 
					AND scv.scv_id=:scv_id AND scr_active=1
				ORDER BY rank DESC
						 
	 [params: {":gp19":"4181",":gp20":"31",":gp21":"4181",":gp22":"105",":gp23":"1","scv_id":"14"}]
2024/10/24 00:03:38 [profile] [profile.module.admin.controller.booking.getamountbyvehicle] [T: 488.352] [M: 23036.2] [ET: 0.673/457.571] [MU: 0.9/23035.98] 
	SQL: SELECT rut_id FROM `route` WHERE rut_from_city_id =:fromCty AND rut_to_city_id=:toCty AND rut_active = 1 
	 [params: {"fromCty":"30804","toCty":"30372"}]
2024/10/24 00:03:38 [profile] [profile.module.admin.controller.booking.getamountbyvehicle] [T: 489.76] [M: 23048.58] [ET: 0.597/458.967] [MU: 2.97/23048.14] 
	SQL: SELECT stt_id, GROUP_CONCAT(DISTINCT zct_zon_id) zones, stt_zone AS region
				FROM   cities
				INNER JOIN states ON cty_state_id = stt_id AND stt_active = '1'
				LEFT JOIN zone_cities ON cty_id = zct_cty_id AND zct_active = 1
				LEFT JOIN zones ON zon_id=zct_zon_id AND zon_active=1
				WHERE  cty_id =:city AND cty_active = 1 
	 [params: {"city":"30804"}]
2024/10/24 00:03:38 [profile] [profile.module.admin.controller.booking.getamountbyvehicle] [T: 490.716] [M: 23077.5] [ET: 0.789/459.94] [MU: 22.4/23076.75] 
	SQL: SELECT area_price_rule.*,
					CASE area_price_rule.apr_area_type
					WHEN 1 THEN 10
					WHEN 2 THEN 5
					WHEN 3 THEN 20   
					ELSE 1
					END AS rank
				FROM area_price_rule 
				WHERE apr_active=1 AND ((apr_area_type = 3 AND apr_area_id IN (:gp26)) OR (apr_area_type = 5 AND apr_area_id IN (:gp24)) OR (apr_area_type = 2 AND apr_area_id IN (:gp27)) OR (apr_area_type = 4 AND apr_area_id IN (:gp28)) OR (apr_area_type = 1 AND apr_area_id IN (:gp25))) AND apr_cab_type=:cab ORDER BY rank DESC 
	 [params: {":gp24":"4181",":gp25":"31",":gp26":"30804",":gp27":"105",":gp28":"1","cab":"14"}]
2024/10/24 00:03:38 [profile] [profile.module.admin.controller.booking.getamountbyvehicle] [T: 492.484] [M: 23064.77] [ET: 0.509/461.718] [MU: 3.34/23064.33] 
	SQL: SELECT stt_id, GROUP_CONCAT(DISTINCT zct_zon_id) zones, stt_zone AS region
				FROM   cities
				INNER JOIN states ON cty_state_id = stt_id AND stt_active = '1'
				LEFT JOIN zone_cities ON cty_id = zct_cty_id AND zct_active = 1
				LEFT JOIN zones ON zon_id=zct_zon_id AND zon_active=1
				WHERE  cty_id =:city AND cty_active = 1 
	 [params: {"city":"30804"}]
2024/10/24 00:03:38 [profile] [profile.module.admin.controller.booking.getamountbyvehicle] [T: 494.603] [M: 23075.31] [ET: 1.996/463.81] [MU: 3.53/23074.44] 
	SQL: SELECT service_class_rule.*,
					CASE 
						WHEN scr_area_type=1 THEN 10
						WHEN scr_area_type=2 THEN 5
						WHEN scr_area_type=3 THEN 20
						WHEN scr_area_type=4 THEN 3
						WHEN scr_area_type=5 THEN 25
						ELSE 1
					END AS rank FROM service_class_rule
				INNER JOIN svc_class_vhc_cat scv ON scv.scv_id = scr_scv_id
				WHERE ((scr_area_type = 3 AND scr_area_id IN (:gp31)) OR (scr_area_type = 5 AND scr_area_id IN (:gp29)) OR (scr_area_type = 2 AND scr_area_id IN (:gp32)) OR (scr_area_type = 4 AND scr_area_id IN (:gp33)) OR (scr_area_type = 1 AND scr_area_id IN (:gp30)) OR scr_area_type IS NULL) 
					AND scv.scv_id=:scv_id AND scr_active=1
				ORDER BY rank DESC
						 
	 [params: {":gp29":"4181",":gp30":"31",":gp31":"4181",":gp32":"105",":gp33":"1","scv_id":"14"}]
2024/10/24 00:03:38 [profile] [profile.module.admin.controller.booking.getamountbyvehicle] [T: 495.749] [M: 23080.06] [ET: 0.585/464.959] [MU: 3.84/23079.19] 
	SQL: SELECT *
				FROM 
                   (
							SELECT cities_stats.cts_cty_id AS vnd_city, cities_stats.cts_vnd_cnt AS cnt, 0 AS distance
							FROM cities_stats
							WHERE     cities_stats.cts_cty_id = :city	AND cities_stats.cts_vnd_cnt >= 2

							UNION
							SELECT cities_stats.cts_cty_id AS vnd_city, cities_stats.cts_vnd_cnt AS cnt, IFNULL(rut_actual_distance, rut_estm_distance) AS distance
							FROM route
							INNER JOIN cities_stats  ON  cities_stats.cts_cty_id = route.rut_from_city_id AND cities_stats.cts_vnd_cnt >= 2 AND IFNULL(rut_actual_distance, rut_estm_distance) < 40
							WHERE rut_to_city_id = :city
							GROUP BY cities_stats.cts_cty_id   
                    ) a
				ORDER BY DISTANCE ASC 
	 [params: {":city":"30804"}]
2024/10/24 00:03:38 [profile] [profile.module.admin.controller.booking.getamountbyvehicle] [T: 496.379] [M: 23087.88] [ET: 0.482/465.594] [MU: 4.21/23087] 
	SQL: SELECT *
				FROM 
                   (
							SELECT cities_stats.cts_cty_id AS vnd_city, cities_stats.cts_vnd_cnt AS cnt, 0 AS distance
							FROM cities_stats
							WHERE     cities_stats.cts_cty_id = :city	AND cities_stats.cts_vnd_cnt >= 2

							UNION
							SELECT cities_stats.cts_cty_id AS vnd_city, cities_stats.cts_vnd_cnt AS cnt, IFNULL(rut_actual_distance, rut_estm_distance) AS distance
							FROM route
							INNER JOIN cities_stats  ON  cities_stats.cts_cty_id = route.rut_from_city_id AND cities_stats.cts_vnd_cnt >= 2 AND IFNULL(rut_actual_distance, rut_estm_distance) < 40
							WHERE rut_to_city_id = :city
							GROUP BY cities_stats.cts_cty_id   
                    ) a
				ORDER BY DISTANCE ASC 
	 [params: {":city":"30372"}]
2024/10/24 00:03:38 [profile] [profile.module.admin.controller.booking.getamountbyvehicle] [T: 496.773] [M: 23096.14] [ET: 0.299/465.989] [MU: 7.1/23096.03] 
	BookingRoute::calculateDistance
2024/10/24 00:03:38 [profile] [profile.module.admin.controller.booking.getamountbyvehicle] [T: 497.466] [M: 23098.92] [ET: 0.478/466.683] [MU: 2.66/23098.55] 
	SQL: SELECT *
				FROM   partner_rate prt 
				JOIN route rut ON prt.prt_route_id = rut.rut_id AND rut.rut_active = 1
				AND  rut.rut_from_city_id  = 30804 
				AND  rut.rut_to_city_id  = 30372 
				 WHERE prt_vehicletype_id = 14
				AND prt_partner_id = 1249
				AND prt_status = 1
				 
	 [params: []]
2024/10/24 00:03:38 [profile] [profile.module.admin.controller.booking.getamountbyvehicle] [T: 498.151] [M: 23104.9] 
+++++++++++++++++++++++++++++++++++++++++++++++++++++++++++profile models.RouteRates.calculateDriverAllowance START++++++++++++++++++++++++++++++++++++++++++++++++++
	URL: [POST]/aaohome/booking/getamountbyvehicle
	User IP: 192.168.255.12
	Referrer: http://localhost:84/aaohome/booking/create
	POST: {"fromCity":"30804","toCity":"30372","cabType":"1","tripDistance":"917","tripDuration":"930","multiCityData":"[{\"pickup_city\":\"30804\",\"drop_city\":\"30372\",\"pickup_address\":\"\",\"drop_address\":null,\"date\":\"2024-10-31 04:00:00\",\"distance\":\"917\",\"duration\":\"930\"}]","bookingType":"1","pickupAddress":"","dropupAddress":"","routeDataArr":[{"locLatVal":"","locLonVal":"","brtLocationVal":""},{"locLatVal":"","locLonVal":"","brtLocationVal":""}],"pickupDate":"31\/10\/2024","pickupTime":"04:00 AM","isGozonow":"0","minTripDistance":"0","tripUser":"1","YII_CSRF_TOKEN":"N3VxRE1WeG9UeHk5UWFBUFpPT216eWVyY0xWTVpoTkcUoJ2aBoup1fU2M5E4ePVZVcUNlKiYZZysUqEklNiKWw==","isAirportPickup":"1"}
	RawBody: fromCity=30804&toCity=30372&cabType=1&tripDistance=917&tripDuration=930&multiCityData=%5B%7B%22pickup_city%22%3A%2230804%22%2C%22drop_city%22%3A%2230372%22%2C%22pickup_address%22%3A%22%22%2C%22drop_address%22%3Anull%2C%22date%22%3A%222024-10-31+04%3A00%3A00%22%2C%22distance%22%3A%22917%22%2C%22duration%22%3A%22930%22%7D%5D&bookingType=1&pickupAddress=&dropupAddress=&routeDataArr%5B0%5D%5BlocLatVal%5D=&routeDataArr%5B0%5D%5BlocLonVal%5D=&routeDataArr%5B0%5D%5BbrtLocationVal%5D=&routeDataArr%5B1%5D%5BlocLatVal%5D=&routeDataArr%5B1%5D%5BlocLonVal%5D=&routeDataArr%5B1%5D%5BbrtLocationVal%5D=&pickupDate=31%2F10%2F2024&pickupTime=04%3A00+AM&isGozonow=0&minTripDistance=0&tripUser=1&YII_CSRF_TOKEN=N3VxRE1WeG9UeHk5UWFBUFpPT216eWVyY0xWTVpoTkcUoJ2aBoup1fU2M5E4ePVZVcUNlKiYZZysUqEklNiKWw%3D%3D&isAirportPickup=1
	[UserID: 30] [UserType: 4]
2024/10/24 00:03:38 [profile] [profile.module.admin.controller.booking.getamountbyvehicle] [T: 498.736] [M: 23126.71] [ET: 1.02/467.967] [MU: 23.76/23126.6] 
	models.RouteRates.calculateDriverAllowance
2024/10/24 00:03:38 [profile] [profile.module.admin.controller.booking.getamountbyvehicle] [T: 498.782] [M: 23128.39] 
============================================================Profile models.RouteRates.calculateDriverAllowance DONE==================================================
2024/10/24 00:03:38 [profile] [profile.module.admin.controller.booking.getamountbyvehicle] [T: 500.923] [M: 23141.85] [ET: 1.927/470.107] [MU: 2.99/23139.35] 
	SQL: SELECT * FROM (
                                SELECT *, FLOOR(IF((cpm_value_type=1),(cpm_value+15157),(IF((cpm_value_type=2),(15157+(15157*(cpm_value/100))),cpm_value))))amount,
                                    ((SELECT GROUP_CONCAT(z2.zct_zon_id) as srcZones FROM zone_cities z2
                                        WHERE z2.zct_active=1 AND zct_cty_id=30804 GROUP BY z2.zct_cty_id)) as srcZones,
                                    (SELECT GROUP_CONCAT(z2.zct_zon_id) as srcZones FROM zone_cities z2
                                        WHERE z2.zct_active=1 AND zct_cty_id=30372 GROUP BY z2.zct_cty_id) as dstZones,
                                    (
                                    IF(cpm_agent_id IS NOT NULL, 1,0) +
                                    IF(cpm_source_city IS NOT NULL,54,0) +
                                    IF(cpm_destination_city IS NOT NULL,54,0) +
                                    IF(cpm_source_zone IS NOT NULL,18,0) +
                                    IF(cpm_destination_zone IS NOT NULL,18,0) +
                                    IF(cpm_source_state IS NOT NULL,6,0) +
                                    IF(cpm_destination_state IS NOT NULL,6,0) +
                                    IF(cpm_trip_type IS NOT NULL,1,0) +
                                    IF(cpm_vehicle_type IS NOT NULL,1,0)
                               ) as rank
                                FROM `channel_partner_markup`
                                WHERE cpm_active=1) a
                            WHERE
                            (
                                (cpm_source_city IS NULL OR cpm_source_city=30804) AND
                                (cpm_destination_city IS NULL OR cpm_destination_city=30372) AND
                                (cpm_source_zone IS NULL OR cpm_source_zone IN (srcZones)) AND
                                (cpm_destination_zone IS NULL OR cpm_destination_zone IN (dstZones))
                            )
                            AND cpm_agent_id = 1249
                            AND ('2024-10-31 04:00:00' BETWEEN cpm_from_date AND cpm_to_date)  AND (cpm_vehicle_type=14 OR cpm_vehicle_type IS NULL)  AND (cpm_trip_type=1 OR cpm_trip_type IS NULL)
                        ORDER BY rank DESC, amount DESC  LIMIT 1 
	 [params: []]
2024/10/24 00:03:38 [profile] [profile.module.admin.controller.booking.getamountbyvehicle] [T: 504.052] [M: 23184.08] [ET: 6.378/473.251] [MU: 81.59/23183.92] 
	RouteRates::calculate for CAB 14 2024-10-31 04:00:00 - Trip Type: 1 754609284
2024/10/24 00:03:38 [profile] [profile.module.admin.controller.booking.getamountbyvehicle] [T: 504.487] [M: 23163.7] [ET: 24.533/473.689] [MU: 181.24/23163.54] 
	Quote::calculateOneWay  for CAB 14 Date: 2024-10-31 04:00:00
2024/10/24 00:03:38 [profile] [profile.module.admin.controller.booking.getamountbyvehicle] [T: 505.003] [M: 23160.29] [ET: 0.365/474.2] [MU: 0.9/23160.04] 
	SQL: SELECT svc.scv_scc_id FROM svc_class_vhc_cat svc
					-- INNER JOIN service_class scc ON svc.scv_scc_id=scc_id
					WHERE scv_id=:cabId 
	 [params: {"cabId":"14"}]
2024/10/24 00:03:38 [profile] [profile.module.admin.controller.booking.getamountbyvehicle] [T: 505.162] [M: 23161.54] [ET: 30.167/474.363] [MU: 228.31/23161.45] 
	Quote For CabType: 14
2024/10/24 00:03:38 [profile] [profile.module.admin.controller.booking.getamountbyvehicle] [T: 506.87] [M: 23171.88] [ET: 0.625/476.094] [MU: 3.34/23171.45] 
	SQL: SELECT stt_id, GROUP_CONCAT(DISTINCT zct_zon_id) zones, stt_zone AS region
				FROM   cities
				INNER JOIN states ON cty_state_id = stt_id AND stt_active = '1'
				LEFT JOIN zone_cities ON cty_id = zct_cty_id AND zct_active = 1
				LEFT JOIN zones ON zon_id=zct_zon_id AND zon_active=1
				WHERE  cty_id =:city AND cty_active = 1 
	 [params: {"city":"30804"}]
2024/10/24 00:03:38 [profile] [profile.module.admin.controller.booking.getamountbyvehicle] [T: 507.557] [M: 23177.7] [ET: 0.545/476.744] [MU: 3.35/23177.27] 
	SQL: SELECT stt_id, GROUP_CONCAT(DISTINCT zct_zon_id) zones, stt_zone AS region
				FROM   cities
				INNER JOIN states ON cty_state_id = stt_id AND stt_active = '1'
				LEFT JOIN zone_cities ON cty_id = zct_cty_id AND zct_active = 1
				LEFT JOIN zones ON zon_id=zct_zon_id AND zon_active=1
				WHERE  cty_id =:city AND cty_active = 1 
	 [params: {"city":"30372"}]
2024/10/24 00:03:38 [profile] [profile.module.admin.controller.booking.getamountbyvehicle] [T: 508.183] [M: 23180.61] [ET: 0.518/477.407] [MU: 0.9/23180.39] 
	SQL: SELECT rut_id FROM `route` WHERE rut_from_city_id =:fromCty AND rut_to_city_id=:toCty AND rut_active = 1 
	 [params: {"fromCty":"30804","toCty":"30372"}]
2024/10/24 00:03:38 [profile] [profile.module.admin.controller.booking.getamountbyvehicle] [T: 508.965] [M: 23212.99] [ET: 0.623/478.158] [MU: 24.21/23211.49] 
	SQL: SELECT scv_id, CASE
				WHEN scr_area_type=1 AND scr_area_id IN (31) THEN 10
				WHEN scr_area_type=1 AND scr_area_id IN (0) THEN 9
				WHEN scr_area_type=2 AND scr_area_id IN (105) THEN 5
				WHEN scr_area_type=2 AND scr_area_id IN (86) THEN 4
				WHEN scr_area_type=3 AND scr_area_id IN (30804) THEN 20
				WHEN scr_area_type=3 AND scr_area_id IN (30372) THEN 19
				WHEN scr_area_type=4 AND scr_area_id IN (1) THEN 3
				WHEN scr_area_type=4 AND scr_area_id IN (2) THEN 2
				WHEN scr_area_type=5 THEN 25
				ELSE 1
				END AS rank, 
			scc_id, scr_is_allowed 
		FROM service_class_rule 
		INNER JOIN svc_class_vhc_cat ON scv_id = scr_scv_id AND scv_active = 1
		INNER JOIN service_class ON scv_scc_id = scc_id
		WHERE   ((scr_area_type = 1 AND scr_area_id IN (:gp34)) 
			OR (scr_area_type = 2 AND scr_area_id IN (:gp37,:gp38)) 
			OR (scr_area_type = 3 AND scr_area_id IN (:gp35,:gp36)) 
			OR (scr_area_type = 4 AND scr_area_id IN (:gp39,:gp40))
			OR (scr_area_type = 5 AND scr_area_id IN (4181))
			OR scr_area_type IS NULL)
			AND (scr_trip_type = :tripType OR scr_trip_type IS NULL) 
			AND scr_active = 1 AND scv_id IN (43)
		ORDER BY rank DESC
		 
	 [params: {":gp34":"31",":gp35":"30804",":gp36":"30372",":gp37":"105",":gp38":"86",":gp39":"1",":gp40":"2","tripType":"1"}]
2024/10/24 00:03:38 [profile] [profile.module.admin.controller.booking.getamountbyvehicle] [T: 509.812] [M: 23193.17] [ET: 0.22/479.03] [MU: 0.84/23192.98] 
	SQL: SELECT cts_category FROM cities_stats WHERE cts_cty_id = :cityId 
	 [params: {"cityId":"30804"}]
2024/10/24 00:03:38 [profile] [profile.module.admin.controller.booking.getamountbyvehicle] [T: 510.222] [M: 23196.05] [ET: 0.315/479.442] [MU: 0.96/23195.73] 
	SQL: SELECT GROUP_CONCAT(adn_id) as ids FROM addon_service_class_rule INNER JOIN addons ON ascr_adn_id = adn_id AND adn_active=1 AND ascr_active = 1 WHERE ascr_cty_category=:cat AND ascr_scc_id=:class 
	 [params: {"cat":2,"class":"4"}]
2024/10/24 00:03:38 [profile] [profile.module.admin.controller.booking.getamountbyvehicle] [T: 511.907] [M: 23214.13] [ET: 0.59/481.13] [MU: 3.78/23213.25] 
	SQL: SELECT route.rut_id, route.rut_from_city_id start,route.rut_to_city_id end, NULL AS fromAlias, NULL AS toAlias, rut_name,route.rut_estm_distance as quotedDistance, route.rut_estm_distance as rateDistance,
                                0 AS extraDistance, 
								0 AS extraStartDistance,
								1 as rank,
                                0 as startTime, 0 as endTime, route.rut_estm_time,rate.*
                        FROM   route
						INNER JOIN rate ON rut_id = rate.rte_route_id AND rate.rte_status=1 AND rate.rte_vendor_amount>0 AND rate.rte_vehicletype_id=:cabType
                        WHERE  rut_active = 1 AND route.rut_from_city_id =:fromCity AND route.rut_to_city_id =:toCity 
	 [params: {"cabType":"43","fromCity":"30804","toCity":"30372"}]
2024/10/24 00:03:38 [profile] [profile.module.admin.controller.booking.getamountbyvehicle] [T: 513.799] [M: 23246.75] [ET: 0.639/483.016] [MU: 3.78/23245.88] 
	SQL: SELECT route.rut_id, route.rut_from_city_id start,route.rut_to_city_id end, NULL AS fromAlias, NULL AS toAlias, rut_name,route.rut_estm_distance as quotedDistance, route.rut_estm_distance as rateDistance,
                                0 AS extraDistance, 
								0 AS extraStartDistance,
								1 as rank,
                                0 as startTime, 0 as endTime, route.rut_estm_time,rate.*
                        FROM   route
						INNER JOIN rate ON rut_id = rate.rte_route_id AND rate.rte_status=1 AND rate.rte_vendor_amount>0 AND rate.rte_vehicletype_id=:cabType
                        WHERE  rut_active = 1 AND route.rut_from_city_id =:fromCity AND route.rut_to_city_id =:toCity 
	 [params: {"cabType":"14","fromCity":"30804","toCity":"30372"}]
2024/10/24 00:03:38 [profile] [profile.module.admin.controller.booking.getamountbyvehicle] [T: 515.635] [M: 23265.16] [ET: 0.51/484.868] [MU: 5.56/23264.28] 
	SQL: SELECT route.rut_id, route.rut_from_city_id start,route.rut_to_city_id end, NULL AS fromAlias, NULL AS toAlias, rut_name,route.rut_estm_distance as quotedDistance, route.rut_estm_distance as rateDistance,
                                0 AS extraDistance, 
								0 AS extraStartDistance,
								1 as rank,
                                0 as startTime, 0 as endTime, route.rut_estm_time,rate.*
                        FROM   route
						INNER JOIN rate ON rut_id = rate.rte_route_id AND rate.rte_status=1 AND rate.rte_vendor_amount>0 AND rate.rte_vehicletype_id=:cabType
                        WHERE  rut_active = 1 AND route.rut_from_city_id =:fromCity AND route.rut_to_city_id =:toCity 
	 [params: {"cabType":"1","fromCity":"30804","toCity":"30372"}]
2024/10/24 00:03:38 [profile] [profile.module.admin.controller.booking.getamountbyvehicle] [T: 516.664] [M: 23272.42] [ET: 0.649/485.897] [MU: 0.89/23272.17] 
	SQL: SELECT rut_id FROM `route` WHERE rut_from_city_id =:fromCty AND rut_to_city_id=:toCty AND rut_active = 1 
	 [params: {"fromCty":"30804","toCty":"30372"}]
2024/10/24 00:03:38 [profile] [profile.module.admin.controller.booking.getamountbyvehicle] [T: 518.671] [M: 23283.02] [ET: 0.998/487.886] [MU: 3.34/23282.58] 
	SQL: SELECT stt_id, GROUP_CONCAT(DISTINCT zct_zon_id) zones, stt_zone AS region
				FROM   cities
				INNER JOIN states ON cty_state_id = stt_id AND stt_active = '1'
				LEFT JOIN zone_cities ON cty_id = zct_cty_id AND zct_active = 1
				LEFT JOIN zones ON zon_id=zct_zon_id AND zon_active=1
				WHERE  cty_id =:city AND cty_active = 1 
	 [params: {"city":"30804"}]
2024/10/24 00:03:38 [profile] [profile.module.admin.controller.booking.getamountbyvehicle] [T: 519.406] [M: 23293.81] [ET: 0.584/488.636] [MU: 3.78/23292.94] 
	SQL: SELECT service_class_rule.*,
					CASE 
						WHEN scr_area_type=1 THEN 10
						WHEN scr_area_type=2 THEN 5
						WHEN scr_area_type=3 THEN 20
						WHEN scr_area_type=4 THEN 3
						WHEN scr_area_type=5 THEN 25
						ELSE 1
					END AS rank FROM service_class_rule
				INNER JOIN svc_class_vhc_cat scv ON scv.scv_id = scr_scv_id
				WHERE ((scr_area_type = 3 AND scr_area_id IN (:gp43)) OR (scr_area_type = 5 AND scr_area_id IN (:gp41)) OR (scr_area_type = 2 AND scr_area_id IN (:gp44)) OR (scr_area_type = 4 AND scr_area_id IN (:gp45)) OR (scr_area_type = 1 AND scr_area_id IN (:gp42)) OR scr_area_type IS NULL) 
					AND scv.scv_id=:scv_id AND scr_active=1
				ORDER BY rank DESC
						 
	 [params: {":gp41":"4181",":gp42":"31",":gp43":"4181",":gp44":"105",":gp45":"1","scv_id":"14"}]
2024/10/24 00:03:38 [profile] [profile.module.admin.controller.booking.getamountbyvehicle] [T: 520.173] [M: 23294.35] [ET: 0.449/489.407] [MU: 0.9/23294.13] 
	SQL: SELECT rut_id FROM `route` WHERE rut_from_city_id =:fromCty AND rut_to_city_id=:toCty AND rut_active = 1 
	 [params: {"fromCty":"30804","toCty":"30372"}]
2024/10/24 00:03:38 [profile] [profile.module.admin.controller.booking.getamountbyvehicle] [T: 521.171] [M: 23304.98] [ET: 0.485/490.405] [MU: 3.33/23304.54] 
	SQL: SELECT stt_id, GROUP_CONCAT(DISTINCT zct_zon_id) zones, stt_zone AS region
				FROM   cities
				INNER JOIN states ON cty_state_id = stt_id AND stt_active = '1'
				LEFT JOIN zone_cities ON cty_id = zct_cty_id AND zct_active = 1
				LEFT JOIN zones ON zon_id=zct_zon_id AND zon_active=1
				WHERE  cty_id =:city AND cty_active = 1 
	 [params: {"city":"30804"}]
2024/10/24 00:03:38 [profile] [profile.module.admin.controller.booking.getamountbyvehicle] [T: 523.321] [M: 23315.52] [ET: 2.03/492.53] [MU: 3.53/23314.65] 
	SQL: SELECT service_class_rule.*,
					CASE 
						WHEN scr_area_type=1 THEN 10
						WHEN scr_area_type=2 THEN 5
						WHEN scr_area_type=3 THEN 20
						WHEN scr_area_type=4 THEN 3
						WHEN scr_area_type=5 THEN 25
						ELSE 1
					END AS rank FROM service_class_rule
				INNER JOIN svc_class_vhc_cat scv ON scv.scv_id = scr_scv_id
				WHERE ((scr_area_type = 3 AND scr_area_id IN (:gp48)) OR (scr_area_type = 5 AND scr_area_id IN (:gp46)) OR (scr_area_type = 2 AND scr_area_id IN (:gp49)) OR (scr_area_type = 4 AND scr_area_id IN (:gp50)) OR (scr_area_type = 1 AND scr_area_id IN (:gp47)) OR scr_area_type IS NULL) 
					AND scv.scv_id=:scv_id AND scr_active=1
				ORDER BY rank DESC
						 
	 [params: {":gp46":"4181",":gp47":"31",":gp48":"4181",":gp49":"105",":gp50":"1","scv_id":"43"}]
2024/10/24 00:03:38 [profile] [profile.module.admin.controller.booking.getamountbyvehicle] [T: 524.319] [M: 23314.09] [ET: 0.534/493.523] [MU: 0.9/23313.87] 
	SQL: SELECT rut_id FROM `route` WHERE rut_from_city_id =:fromCty AND rut_to_city_id=:toCty AND rut_active = 1 
	 [params: {"fromCty":"30804","toCty":"30372"}]
2024/10/24 00:03:38 [profile] [profile.module.admin.controller.booking.getamountbyvehicle] [T: 525.97] [M: 23326.46] [ET: 0.682/495.18] [MU: 2.97/23326.02] 
	SQL: SELECT stt_id, GROUP_CONCAT(DISTINCT zct_zon_id) zones, stt_zone AS region
				FROM   cities
				INNER JOIN states ON cty_state_id = stt_id AND stt_active = '1'
				LEFT JOIN zone_cities ON cty_id = zct_cty_id AND zct_active = 1
				LEFT JOIN zones ON zon_id=zct_zon_id AND zon_active=1
				WHERE  cty_id =:city AND cty_active = 1 
	 [params: {"city":"30804"}]
2024/10/24 00:03:38 [profile] [profile.module.admin.controller.booking.getamountbyvehicle] [T: 526.822] [M: 23355.38] [ET: 0.682/496.05] [MU: 22.41/23354.63] 
	SQL: SELECT area_price_rule.*,
					CASE area_price_rule.apr_area_type
					WHEN 1 THEN 10
					WHEN 2 THEN 5
					WHEN 3 THEN 20   
					ELSE 1
					END AS rank
				FROM area_price_rule 
				WHERE apr_active=1 AND ((apr_area_type = 3 AND apr_area_id IN (:gp53)) OR (apr_area_type = 5 AND apr_area_id IN (:gp51)) OR (apr_area_type = 2 AND apr_area_id IN (:gp54)) OR (apr_area_type = 4 AND apr_area_id IN (:gp55)) OR (apr_area_type = 1 AND apr_area_id IN (:gp52))) AND apr_cab_type=:cab ORDER BY rank DESC 
	 [params: {":gp51":"4181",":gp52":"31",":gp53":"30804",":gp54":"105",":gp55":"1","cab":"43"}]
2024/10/24 00:03:38 [profile] [profile.module.admin.controller.booking.getamountbyvehicle] [T: 528.318] [M: 23342.65] [ET: 0.478/497.553] [MU: 3.33/23342.21] 
	SQL: SELECT stt_id, GROUP_CONCAT(DISTINCT zct_zon_id) zones, stt_zone AS region
				FROM   cities
				INNER JOIN states ON cty_state_id = stt_id AND stt_active = '1'
				LEFT JOIN zone_cities ON cty_id = zct_cty_id AND zct_active = 1
				LEFT JOIN zones ON zon_id=zct_zon_id AND zon_active=1
				WHERE  cty_id =:city AND cty_active = 1 
	 [params: {"city":"30804"}]
2024/10/24 00:03:38 [profile] [profile.module.admin.controller.booking.getamountbyvehicle] [T: 530.463] [M: 23353.2] [ET: 2.036/499.682] [MU: 3.53/23352.32] 
	SQL: SELECT service_class_rule.*,
					CASE 
						WHEN scr_area_type=1 THEN 10
						WHEN scr_area_type=2 THEN 5
						WHEN scr_area_type=3 THEN 20
						WHEN scr_area_type=4 THEN 3
						WHEN scr_area_type=5 THEN 25
						ELSE 1
					END AS rank FROM service_class_rule
				INNER JOIN svc_class_vhc_cat scv ON scv.scv_id = scr_scv_id
				WHERE ((scr_area_type = 3 AND scr_area_id IN (:gp58)) OR (scr_area_type = 5 AND scr_area_id IN (:gp56)) OR (scr_area_type = 2 AND scr_area_id IN (:gp59)) OR (scr_area_type = 4 AND scr_area_id IN (:gp60)) OR (scr_area_type = 1 AND scr_area_id IN (:gp57)) OR scr_area_type IS NULL) 
					AND scv.scv_id=:scv_id AND scr_active=1
				ORDER BY rank DESC
						 
	 [params: {":gp56":"4181",":gp57":"31",":gp58":"4181",":gp59":"105",":gp60":"1","scv_id":"43"}]
2024/10/24 00:03:38 [profile] [profile.module.admin.controller.booking.getamountbyvehicle] [T: 531.396] [M: 23357.95] [ET: 0.538/500.611] [MU: 3.84/23357.07] 
	SQL: SELECT *
				FROM 
                   (
							SELECT cities_stats.cts_cty_id AS vnd_city, cities_stats.cts_vnd_cnt AS cnt, 0 AS distance
							FROM cities_stats
							WHERE     cities_stats.cts_cty_id = :city	AND cities_stats.cts_vnd_cnt >= 2

							UNION
							SELECT cities_stats.cts_cty_id AS vnd_city, cities_stats.cts_vnd_cnt AS cnt, IFNULL(rut_actual_distance, rut_estm_distance) AS distance
							FROM route
							INNER JOIN cities_stats  ON  cities_stats.cts_cty_id = route.rut_from_city_id AND cities_stats.cts_vnd_cnt >= 2 AND IFNULL(rut_actual_distance, rut_estm_distance) < 40
							WHERE rut_to_city_id = :city
							GROUP BY cities_stats.cts_cty_id   
                    ) a
				ORDER BY DISTANCE ASC 
	 [params: {":city":"30804"}]
2024/10/24 00:03:38 [profile] [profile.module.admin.controller.booking.getamountbyvehicle] [T: 531.977] [M: 23365.76] [ET: 0.457/501.176] [MU: 4.22/23364.88] 
	SQL: SELECT *
				FROM 
                   (
							SELECT cities_stats.cts_cty_id AS vnd_city, cities_stats.cts_vnd_cnt AS cnt, 0 AS distance
							FROM cities_stats
							WHERE     cities_stats.cts_cty_id = :city	AND cities_stats.cts_vnd_cnt >= 2

							UNION
							SELECT cities_stats.cts_cty_id AS vnd_city, cities_stats.cts_vnd_cnt AS cnt, IFNULL(rut_actual_distance, rut_estm_distance) AS distance
							FROM route
							INNER JOIN cities_stats  ON  cities_stats.cts_cty_id = route.rut_from_city_id AND cities_stats.cts_vnd_cnt >= 2 AND IFNULL(rut_actual_distance, rut_estm_distance) < 40
							WHERE rut_to_city_id = :city
							GROUP BY cities_stats.cts_cty_id   
                    ) a
				ORDER BY DISTANCE ASC 
	 [params: {":city":"30372"}]
2024/10/24 00:03:38 [profile] [profile.module.admin.controller.booking.getamountbyvehicle] [T: 532.373] [M: 23374.02] [ET: 0.302/501.603] [MU: 7.1/23373.91] 
	BookingRoute::calculateDistance
2024/10/24 00:03:38 [profile] [profile.module.admin.controller.booking.getamountbyvehicle] [T: 533.119] [M: 23376.8] [ET: 0.505/502.299] [MU: 2.65/23376.43] 
	SQL: SELECT *
				FROM   partner_rate prt 
				JOIN route rut ON prt.prt_route_id = rut.rut_id AND rut.rut_active = 1
				AND  rut.rut_from_city_id  = 30804 
				AND  rut.rut_to_city_id  = 30372 
				 WHERE prt_vehicletype_id = 43
				AND prt_partner_id = 1249
				AND prt_status = 1
				 
	 [params: []]
2024/10/24 00:03:38 [profile] [profile.module.admin.controller.booking.getamountbyvehicle] [T: 535.465] [M: 23382.78] 
+++++++++++++++++++++++++++++++++++++++++++++++++++++++++++profile models.RouteRates.calculateDriverAllowance START++++++++++++++++++++++++++++++++++++++++++++++++++
	URL: [POST]/aaohome/booking/getamountbyvehicle
	User IP: 192.168.255.12
	Referrer: http://localhost:84/aaohome/booking/create
	POST: {"fromCity":"30804","toCity":"30372","cabType":"1","tripDistance":"917","tripDuration":"930","multiCityData":"[{\"pickup_city\":\"30804\",\"drop_city\":\"30372\",\"pickup_address\":\"\",\"drop_address\":null,\"date\":\"2024-10-31 04:00:00\",\"distance\":\"917\",\"duration\":\"930\"}]","bookingType":"1","pickupAddress":"","dropupAddress":"","routeDataArr":[{"locLatVal":"","locLonVal":"","brtLocationVal":""},{"locLatVal":"","locLonVal":"","brtLocationVal":""}],"pickupDate":"31\/10\/2024","pickupTime":"04:00 AM","isGozonow":"0","minTripDistance":"0","tripUser":"1","YII_CSRF_TOKEN":"N3VxRE1WeG9UeHk5UWFBUFpPT216eWVyY0xWTVpoTkcUoJ2aBoup1fU2M5E4ePVZVcUNlKiYZZysUqEklNiKWw==","isAirportPickup":"1"}
	RawBody: fromCity=30804&toCity=30372&cabType=1&tripDistance=917&tripDuration=930&multiCityData=%5B%7B%22pickup_city%22%3A%2230804%22%2C%22drop_city%22%3A%2230372%22%2C%22pickup_address%22%3A%22%22%2C%22drop_address%22%3Anull%2C%22date%22%3A%222024-10-31+04%3A00%3A00%22%2C%22distance%22%3A%22917%22%2C%22duration%22%3A%22930%22%7D%5D&bookingType=1&pickupAddress=&dropupAddress=&routeDataArr%5B0%5D%5BlocLatVal%5D=&routeDataArr%5B0%5D%5BlocLonVal%5D=&routeDataArr%5B0%5D%5BbrtLocationVal%5D=&routeDataArr%5B1%5D%5BlocLatVal%5D=&routeDataArr%5B1%5D%5BlocLonVal%5D=&routeDataArr%5B1%5D%5BbrtLocationVal%5D=&pickupDate=31%2F10%2F2024&pickupTime=04%3A00+AM&isGozonow=0&minTripDistance=0&tripUser=1&YII_CSRF_TOKEN=N3VxRE1WeG9UeHk5UWFBUFpPT216eWVyY0xWTVpoTkcUoJ2aBoup1fU2M5E4ePVZVcUNlKiYZZysUqEklNiKWw%3D%3D&isAirportPickup=1
	[UserID: 30] [UserType: 4]
2024/10/24 00:03:38 [profile] [profile.module.admin.controller.booking.getamountbyvehicle] [T: 536.606] [M: 23404.59] [ET: 2.96/505.817] [MU: 23.77/23404.48] 
	models.RouteRates.calculateDriverAllowance
2024/10/24 00:03:38 [profile] [profile.module.admin.controller.booking.getamountbyvehicle] [T: 536.662] [M: 23406.27] 
============================================================Profile models.RouteRates.calculateDriverAllowance DONE==================================================
2024/10/24 00:03:38 [profile] [profile.module.admin.controller.booking.getamountbyvehicle] [T: 537.823] [M: 23419.73] [ET: 0.928/507.042] [MU: 3/23417.23] 
	SQL: SELECT * FROM (
                                SELECT *, FLOOR(IF((cpm_value_type=1),(cpm_value+15157),(IF((cpm_value_type=2),(15157+(15157*(cpm_value/100))),cpm_value))))amount,
                                    ((SELECT GROUP_CONCAT(z2.zct_zon_id) as srcZones FROM zone_cities z2
                                        WHERE z2.zct_active=1 AND zct_cty_id=30804 GROUP BY z2.zct_cty_id)) as srcZones,
                                    (SELECT GROUP_CONCAT(z2.zct_zon_id) as srcZones FROM zone_cities z2
                                        WHERE z2.zct_active=1 AND zct_cty_id=30372 GROUP BY z2.zct_cty_id) as dstZones,
                                    (
                                    IF(cpm_agent_id IS NOT NULL, 1,0) +
                                    IF(cpm_source_city IS NOT NULL,54,0) +
                                    IF(cpm_destination_city IS NOT NULL,54,0) +
                                    IF(cpm_source_zone IS NOT NULL,18,0) +
                                    IF(cpm_destination_zone IS NOT NULL,18,0) +
                                    IF(cpm_source_state IS NOT NULL,6,0) +
                                    IF(cpm_destination_state IS NOT NULL,6,0) +
                                    IF(cpm_trip_type IS NOT NULL,1,0) +
                                    IF(cpm_vehicle_type IS NOT NULL,1,0)
                               ) as rank
                                FROM `channel_partner_markup`
                                WHERE cpm_active=1) a
                            WHERE
                            (
                                (cpm_source_city IS NULL OR cpm_source_city=30804) AND
                                (cpm_destination_city IS NULL OR cpm_destination_city=30372) AND
                                (cpm_source_zone IS NULL OR cpm_source_zone IN (srcZones)) AND
                                (cpm_destination_zone IS NULL OR cpm_destination_zone IN (dstZones))
                            )
                            AND cpm_agent_id = 1249
                            AND ('2024-10-31 04:00:00' BETWEEN cpm_from_date AND cpm_to_date)  AND (cpm_vehicle_type=43 OR cpm_vehicle_type IS NULL)  AND (cpm_trip_type=1 OR cpm_trip_type IS NULL)
                        ORDER BY rank DESC, amount DESC  LIMIT 1 
	 [params: []]
2024/10/24 00:03:38 [profile] [profile.module.admin.controller.booking.getamountbyvehicle] [T: 539.948] [M: 23461.96] [ET: 6.557/509.143] [MU: 81.6/23461.8] 
	RouteRates::calculate for CAB 43 2024-10-31 04:00:00 - Trip Type: 1 729648901
2024/10/24 00:03:38 [profile] [profile.module.admin.controller.booking.getamountbyvehicle] [T: 540.426] [M: 23441.58] [ET: 29.272/509.626] [MU: 235.66/23441.42] 
	Quote::calculateOneWay  for CAB 43 Date: 2024-10-31 04:00:00
2024/10/24 00:03:38 [profile] [profile.module.admin.controller.booking.getamountbyvehicle] [T: 541.002] [M: 23437.95] [ET: 0.418/510.216] [MU: 0.9/23437.7] 
	SQL: SELECT svc.scv_scc_id FROM svc_class_vhc_cat svc
					-- INNER JOIN service_class scc ON svc.scv_scc_id=scc_id
					WHERE scv_id=:cabId 
	 [params: {"cabId":"43"}]
2024/10/24 00:03:38 [profile] [profile.module.admin.controller.booking.getamountbyvehicle] [T: 541.121] [M: 23439.2] [ET: 35.859/510.341] [MU: 276.36/23439.11] 
	Quote For CabType: 43
2024/10/24 00:03:38 [profile] [profile.module.admin.controller.booking.getamountbyvehicle] [T: 542.398] [M: 23449.55] [ET: 0.429/511.616] [MU: 3.33/23449.11] 
	SQL: SELECT stt_id, GROUP_CONCAT(DISTINCT zct_zon_id) zones, stt_zone AS region
				FROM   cities
				INNER JOIN states ON cty_state_id = stt_id AND stt_active = '1'
				LEFT JOIN zone_cities ON cty_id = zct_cty_id AND zct_active = 1
				LEFT JOIN zones ON zon_id=zct_zon_id AND zon_active=1
				WHERE  cty_id =:city AND cty_active = 1 
	 [params: {"city":"30804"}]
2024/10/24 00:03:38 [profile] [profile.module.admin.controller.booking.getamountbyvehicle] [T: 542.89] [M: 23455.37] [ET: 0.408/512.115] [MU: 3.34/23454.93] 
	SQL: SELECT stt_id, GROUP_CONCAT(DISTINCT zct_zon_id) zones, stt_zone AS region
				FROM   cities
				INNER JOIN states ON cty_state_id = stt_id AND stt_active = '1'
				LEFT JOIN zone_cities ON cty_id = zct_cty_id AND zct_active = 1
				LEFT JOIN zones ON zon_id=zct_zon_id AND zon_active=1
				WHERE  cty_id =:city AND cty_active = 1 
	 [params: {"city":"30372"}]
2024/10/24 00:03:38 [profile] [profile.module.admin.controller.booking.getamountbyvehicle] [T: 543.617] [M: 23458.27] [ET: 0.638/512.836] [MU: 0.9/23458.05] 
	SQL: SELECT rut_id FROM `route` WHERE rut_from_city_id =:fromCty AND rut_to_city_id=:toCty AND rut_active = 1 
	 [params: {"fromCty":"30804","toCty":"30372"}]
2024/10/24 00:03:38 [profile] [profile.module.admin.controller.booking.getamountbyvehicle] [T: 544.344] [M: 23490.66] [ET: 0.581/513.555] [MU: 24.22/23489.16] 
	SQL: SELECT scv_id, CASE
				WHEN scr_area_type=1 AND scr_area_id IN (31) THEN 10
				WHEN scr_area_type=1 AND scr_area_id IN (0) THEN 9
				WHEN scr_area_type=2 AND scr_area_id IN (105) THEN 5
				WHEN scr_area_type=2 AND scr_area_id IN (86) THEN 4
				WHEN scr_area_type=3 AND scr_area_id IN (30804) THEN 20
				WHEN scr_area_type=3 AND scr_area_id IN (30372) THEN 19
				WHEN scr_area_type=4 AND scr_area_id IN (1) THEN 3
				WHEN scr_area_type=4 AND scr_area_id IN (2) THEN 2
				WHEN scr_area_type=5 THEN 25
				ELSE 1
				END AS rank, 
			scc_id, scr_is_allowed 
		FROM service_class_rule 
		INNER JOIN svc_class_vhc_cat ON scv_id = scr_scv_id AND scv_active = 1
		INNER JOIN service_class ON scv_scc_id = scc_id
		WHERE   ((scr_area_type = 1 AND scr_area_id IN (:gp61)) 
			OR (scr_area_type = 2 AND scr_area_id IN (:gp64,:gp65)) 
			OR (scr_area_type = 3 AND scr_area_id IN (:gp62,:gp63)) 
			OR (scr_area_type = 4 AND scr_area_id IN (:gp66,:gp67))
			OR (scr_area_type = 5 AND scr_area_id IN (4181))
			OR scr_area_type IS NULL)
			AND (scr_trip_type = :tripType OR scr_trip_type IS NULL) 
			AND scr_active = 1 AND scv_id IN (72)
		ORDER BY rank DESC
		 
	 [params: {":gp61":"31",":gp62":"30804",":gp63":"30372",":gp64":"105",":gp65":"86",":gp66":"1",":gp67":"2","tripType":"1"}]
2024/10/24 00:03:38 [profile] [profile.module.admin.controller.booking.getamountbyvehicle] [T: 545.219] [M: 23470.84] [ET: 0.269/514.437] [MU: 0.83/23470.65] 
	SQL: SELECT cts_category FROM cities_stats WHERE cts_cty_id = :cityId 
	 [params: {"cityId":"30804"}]
2024/10/24 00:03:38 [profile] [profile.module.admin.controller.booking.getamountbyvehicle] [T: 545.591] [M: 23473.68] [ET: 0.27/514.804] [MU: 0.93/23473.37] 
	SQL: SELECT GROUP_CONCAT(adn_id) as ids FROM addon_service_class_rule INNER JOIN addons ON ascr_adn_id = adn_id AND adn_active=1 AND ascr_active = 1 WHERE ascr_cty_category=:cat AND ascr_scc_id=:class 
	 [params: {"cat":2,"class":"6"}]
2024/10/24 00:03:38 [profile] [profile.module.admin.controller.booking.getamountbyvehicle] [T: 547.588] [M: 23491.63] [ET: 0.569/516.81] [MU: 3.78/23490.75] 
	SQL: SELECT route.rut_id, route.rut_from_city_id start,route.rut_to_city_id end, NULL AS fromAlias, NULL AS toAlias, rut_name,route.rut_estm_distance as quotedDistance, route.rut_estm_distance as rateDistance,
                                0 AS extraDistance, 
								0 AS extraStartDistance,
								1 as rank,
                                0 as startTime, 0 as endTime, route.rut_estm_time,rate.*
                        FROM   route
						INNER JOIN rate ON rut_id = rate.rte_route_id AND rate.rte_status=1 AND rate.rte_vendor_amount>0 AND rate.rte_vehicletype_id=:cabType
                        WHERE  rut_active = 1 AND route.rut_from_city_id =:fromCity AND route.rut_to_city_id =:toCity 
	 [params: {"cabType":"72","fromCity":"30804","toCity":"30372"}]
2024/10/24 00:03:38 [profile] [profile.module.admin.controller.booking.getamountbyvehicle] [T: 549.242] [M: 23510.03] [ET: 0.517/518.474] [MU: 5.56/23509.16] 
	SQL: SELECT route.rut_id, route.rut_from_city_id start,route.rut_to_city_id end, NULL AS fromAlias, NULL AS toAlias, rut_name,route.rut_estm_distance as quotedDistance, route.rut_estm_distance as rateDistance,
                                0 AS extraDistance, 
								0 AS extraStartDistance,
								1 as rank,
                                0 as startTime, 0 as endTime, route.rut_estm_time,rate.*
                        FROM   route
						INNER JOIN rate ON rut_id = rate.rte_route_id AND rate.rte_status=1 AND rate.rte_vendor_amount>0 AND rate.rte_vehicletype_id=:cabType
                        WHERE  rut_active = 1 AND route.rut_from_city_id =:fromCity AND route.rut_to_city_id =:toCity 
	 [params: {"cabType":"1","fromCity":"30804","toCity":"30372"}]
2024/10/24 00:03:38 [profile] [profile.module.admin.controller.booking.getamountbyvehicle] [T: 549.893] [M: 23517.27] [ET: 0.416/519.128] [MU: 0.9/23517.05] 
	SQL: SELECT rut_id FROM `route` WHERE rut_from_city_id =:fromCty AND rut_to_city_id=:toCty AND rut_active = 1 
	 [params: {"fromCty":"30804","toCty":"30372"}]
2024/10/24 00:03:38 [profile] [profile.module.admin.controller.booking.getamountbyvehicle] [T: 551.296] [M: 23527.89] [ET: 0.541/520.528] [MU: 3.34/23527.45] 
	SQL: SELECT stt_id, GROUP_CONCAT(DISTINCT zct_zon_id) zones, stt_zone AS region
				FROM   cities
				INNER JOIN states ON cty_state_id = stt_id AND stt_active = '1'
				LEFT JOIN zone_cities ON cty_id = zct_cty_id AND zct_active = 1
				LEFT JOIN zones ON zon_id=zct_zon_id AND zon_active=1
				WHERE  cty_id =:city AND cty_active = 1 
	 [params: {"city":"30804"}]
2024/10/24 00:03:38 [profile] [profile.module.admin.controller.booking.getamountbyvehicle] [T: 553.254] [M: 23538.44] [ET: 1.844/522.475] [MU: 3.54/23537.56] 
	SQL: SELECT service_class_rule.*,
					CASE 
						WHEN scr_area_type=1 THEN 10
						WHEN scr_area_type=2 THEN 5
						WHEN scr_area_type=3 THEN 20
						WHEN scr_area_type=4 THEN 3
						WHEN scr_area_type=5 THEN 25
						ELSE 1
					END AS rank FROM service_class_rule
				INNER JOIN svc_class_vhc_cat scv ON scv.scv_id = scr_scv_id
				WHERE ((scr_area_type = 3 AND scr_area_id IN (:gp70)) OR (scr_area_type = 5 AND scr_area_id IN (:gp68)) OR (scr_area_type = 2 AND scr_area_id IN (:gp71)) OR (scr_area_type = 4 AND scr_area_id IN (:gp72)) OR (scr_area_type = 1 AND scr_area_id IN (:gp69)) OR scr_area_type IS NULL) 
					AND scv.scv_id=:scv_id AND scr_active=1
				ORDER BY rank DESC
						 
	 [params: {":gp68":"4181",":gp69":"31",":gp70":"4181",":gp71":"105",":gp72":"1","scv_id":"72"}]
2024/10/24 00:03:38 [profile] [profile.module.admin.controller.booking.getamountbyvehicle] [T: 554.148] [M: 23537.03] [ET: 0.504/523.355] [MU: 0.89/23536.78] 
	SQL: SELECT rut_id FROM `route` WHERE rut_from_city_id =:fromCty AND rut_to_city_id=:toCty AND rut_active = 1 
	 [params: {"fromCty":"30804","toCty":"30372"}]
2024/10/24 00:03:38 [profile] [profile.module.admin.controller.booking.getamountbyvehicle] [T: 555.466] [M: 23549.38] [ET: 0.536/524.699] [MU: 2.97/23548.94] 
	SQL: SELECT stt_id, GROUP_CONCAT(DISTINCT zct_zon_id) zones, stt_zone AS region
				FROM   cities
				INNER JOIN states ON cty_state_id = stt_id AND stt_active = '1'
				LEFT JOIN zone_cities ON cty_id = zct_cty_id AND zct_active = 1
				LEFT JOIN zones ON zon_id=zct_zon_id AND zon_active=1
				WHERE  cty_id =:city AND cty_active = 1 
	 [params: {"city":"30804"}]
2024/10/24 00:03:38 [profile] [profile.module.admin.controller.booking.getamountbyvehicle] [T: 556.316] [M: 23578.3] [ET: 0.697/525.526] [MU: 22.41/23577.55] 
	SQL: SELECT area_price_rule.*,
					CASE area_price_rule.apr_area_type
					WHEN 1 THEN 10
					WHEN 2 THEN 5
					WHEN 3 THEN 20   
					ELSE 1
					END AS rank
				FROM area_price_rule 
				WHERE apr_active=1 AND ((apr_area_type = 3 AND apr_area_id IN (:gp75)) OR (apr_area_type = 5 AND apr_area_id IN (:gp73)) OR (apr_area_type = 2 AND apr_area_id IN (:gp76)) OR (apr_area_type = 4 AND apr_area_id IN (:gp77)) OR (apr_area_type = 1 AND apr_area_id IN (:gp74))) AND apr_cab_type=:cab ORDER BY rank DESC 
	 [params: {":gp73":"4181",":gp74":"31",":gp75":"30804",":gp76":"105",":gp77":"1","cab":"72"}]
2024/10/24 00:03:38 [profile] [profile.module.admin.controller.booking.getamountbyvehicle] [T: 557.955] [M: 23565.56] [ET: 0.48/527.19] [MU: 3.34/23565.13] 
	SQL: SELECT stt_id, GROUP_CONCAT(DISTINCT zct_zon_id) zones, stt_zone AS region
				FROM   cities
				INNER JOIN states ON cty_state_id = stt_id AND stt_active = '1'
				LEFT JOIN zone_cities ON cty_id = zct_cty_id AND zct_active = 1
				LEFT JOIN zones ON zon_id=zct_zon_id AND zon_active=1
				WHERE  cty_id =:city AND cty_active = 1 
	 [params: {"city":"30804"}]
2024/10/24 00:03:38 [profile] [profile.module.admin.controller.booking.getamountbyvehicle] [T: 559.9] [M: 23576.11] [ET: 1.835/529.124] [MU: 3.53/23575.23] 
	SQL: SELECT service_class_rule.*,
					CASE 
						WHEN scr_area_type=1 THEN 10
						WHEN scr_area_type=2 THEN 5
						WHEN scr_area_type=3 THEN 20
						WHEN scr_area_type=4 THEN 3
						WHEN scr_area_type=5 THEN 25
						ELSE 1
					END AS rank FROM service_class_rule
				INNER JOIN svc_class_vhc_cat scv ON scv.scv_id = scr_scv_id
				WHERE ((scr_area_type = 3 AND scr_area_id IN (:gp80)) OR (scr_area_type = 5 AND scr_area_id IN (:gp78)) OR (scr_area_type = 2 AND scr_area_id IN (:gp81)) OR (scr_area_type = 4 AND scr_area_id IN (:gp82)) OR (scr_area_type = 1 AND scr_area_id IN (:gp79)) OR scr_area_type IS NULL) 
					AND scv.scv_id=:scv_id AND scr_active=1
				ORDER BY rank DESC
						 
	 [params: {":gp78":"4181",":gp79":"31",":gp80":"4181",":gp81":"105",":gp82":"1","scv_id":"72"}]
2024/10/24 00:03:38 [profile] [profile.module.admin.controller.booking.getamountbyvehicle] [T: 560.807] [M: 23580.86] [ET: 0.531/530.017] [MU: 3.85/23579.98] 
	SQL: SELECT *
				FROM 
                   (
							SELECT cities_stats.cts_cty_id AS vnd_city, cities_stats.cts_vnd_cnt AS cnt, 0 AS distance
							FROM cities_stats
							WHERE     cities_stats.cts_cty_id = :city	AND cities_stats.cts_vnd_cnt >= 2

							UNION
							SELECT cities_stats.cts_cty_id AS vnd_city, cities_stats.cts_vnd_cnt AS cnt, IFNULL(rut_actual_distance, rut_estm_distance) AS distance
							FROM route
							INNER JOIN cities_stats  ON  cities_stats.cts_cty_id = route.rut_from_city_id AND cities_stats.cts_vnd_cnt >= 2 AND IFNULL(rut_actual_distance, rut_estm_distance) < 40
							WHERE rut_to_city_id = :city
							GROUP BY cities_stats.cts_cty_id   
                    ) a
				ORDER BY DISTANCE ASC 
	 [params: {":city":"30804"}]
2024/10/24 00:03:38 [profile] [profile.module.admin.controller.booking.getamountbyvehicle] [T: 561.371] [M: 23588.67] [ET: 0.448/530.587] [MU: 4.21/23587.8] 
	SQL: SELECT *
				FROM 
                   (
							SELECT cities_stats.cts_cty_id AS vnd_city, cities_stats.cts_vnd_cnt AS cnt, 0 AS distance
							FROM cities_stats
							WHERE     cities_stats.cts_cty_id = :city	AND cities_stats.cts_vnd_cnt >= 2

							UNION
							SELECT cities_stats.cts_cty_id AS vnd_city, cities_stats.cts_vnd_cnt AS cnt, IFNULL(rut_actual_distance, rut_estm_distance) AS distance
							FROM route
							INNER JOIN cities_stats  ON  cities_stats.cts_cty_id = route.rut_from_city_id AND cities_stats.cts_vnd_cnt >= 2 AND IFNULL(rut_actual_distance, rut_estm_distance) < 40
							WHERE rut_to_city_id = :city
							GROUP BY cities_stats.cts_cty_id   
                    ) a
				ORDER BY DISTANCE ASC 
	 [params: {":city":"30372"}]
2024/10/24 00:03:38 [profile] [profile.module.admin.controller.booking.getamountbyvehicle] [T: 561.744] [M: 23596.94] [ET: 0.294/530.975] [MU: 7.1/23596.83] 
	BookingRoute::calculateDistance
2024/10/24 00:03:38 [profile] [profile.module.admin.controller.booking.getamountbyvehicle] [T: 562.343] [M: 23599.72] [ET: 0.392/531.563] [MU: 2.66/23599.34] 
	SQL: SELECT *
				FROM   partner_rate prt 
				JOIN route rut ON prt.prt_route_id = rut.rut_id AND rut.rut_active = 1
				AND  rut.rut_from_city_id  = 30804 
				AND  rut.rut_to_city_id  = 30372 
				 WHERE prt_vehicletype_id = 72
				AND prt_partner_id = 1249
				AND prt_status = 1
				 
	 [params: []]
2024/10/24 00:03:38 [profile] [profile.module.admin.controller.booking.getamountbyvehicle] [T: 563.018] [M: 23605.7] 
+++++++++++++++++++++++++++++++++++++++++++++++++++++++++++profile models.RouteRates.calculateDriverAllowance START++++++++++++++++++++++++++++++++++++++++++++++++++
	URL: [POST]/aaohome/booking/getamountbyvehicle
	User IP: 192.168.255.12
	Referrer: http://localhost:84/aaohome/booking/create
	POST: {"fromCity":"30804","toCity":"30372","cabType":"1","tripDistance":"917","tripDuration":"930","multiCityData":"[{\"pickup_city\":\"30804\",\"drop_city\":\"30372\",\"pickup_address\":\"\",\"drop_address\":null,\"date\":\"2024-10-31 04:00:00\",\"distance\":\"917\",\"duration\":\"930\"}]","bookingType":"1","pickupAddress":"","dropupAddress":"","routeDataArr":[{"locLatVal":"","locLonVal":"","brtLocationVal":""},{"locLatVal":"","locLonVal":"","brtLocationVal":""}],"pickupDate":"31\/10\/2024","pickupTime":"04:00 AM","isGozonow":"0","minTripDistance":"0","tripUser":"1","YII_CSRF_TOKEN":"N3VxRE1WeG9UeHk5UWFBUFpPT216eWVyY0xWTVpoTkcUoJ2aBoup1fU2M5E4ePVZVcUNlKiYZZysUqEklNiKWw==","isAirportPickup":"1"}
	RawBody: fromCity=30804&toCity=30372&cabType=1&tripDistance=917&tripDuration=930&multiCityData=%5B%7B%22pickup_city%22%3A%2230804%22%2C%22drop_city%22%3A%2230372%22%2C%22pickup_address%22%3A%22%22%2C%22drop_address%22%3Anull%2C%22date%22%3A%222024-10-31+04%3A00%3A00%22%2C%22distance%22%3A%22917%22%2C%22duration%22%3A%22930%22%7D%5D&bookingType=1&pickupAddress=&dropupAddress=&routeDataArr%5B0%5D%5BlocLatVal%5D=&routeDataArr%5B0%5D%5BlocLonVal%5D=&routeDataArr%5B0%5D%5BbrtLocationVal%5D=&routeDataArr%5B1%5D%5BlocLatVal%5D=&routeDataArr%5B1%5D%5BlocLonVal%5D=&routeDataArr%5B1%5D%5BbrtLocationVal%5D=&pickupDate=31%2F10%2F2024&pickupTime=04%3A00+AM&isGozonow=0&minTripDistance=0&tripUser=1&YII_CSRF_TOKEN=N3VxRE1WeG9UeHk5UWFBUFpPT216eWVyY0xWTVpoTkcUoJ2aBoup1fU2M5E4ePVZVcUNlKiYZZysUqEklNiKWw%3D%3D&isAirportPickup=1
	[UserID: 30] [UserType: 4]
2024/10/24 00:03:38 [profile] [profile.module.admin.controller.booking.getamountbyvehicle] [T: 563.548] [M: 23627.51] [ET: 0.957/532.779] [MU: 23.76/23627.4] 
	models.RouteRates.calculateDriverAllowance
2024/10/24 00:03:38 [profile] [profile.module.admin.controller.booking.getamountbyvehicle] [T: 563.581] [M: 23629.19] 
============================================================Profile models.RouteRates.calculateDriverAllowance DONE==================================================
2024/10/24 00:03:38 [profile] [profile.module.admin.controller.booking.getamountbyvehicle] [T: 564.57] [M: 23642.65] [ET: 0.857/533.796] [MU: 2.99/23640.15] 
	SQL: SELECT * FROM (
                                SELECT *, FLOOR(IF((cpm_value_type=1),(cpm_value+15157),(IF((cpm_value_type=2),(15157+(15157*(cpm_value/100))),cpm_value))))amount,
                                    ((SELECT GROUP_CONCAT(z2.zct_zon_id) as srcZones FROM zone_cities z2
                                        WHERE z2.zct_active=1 AND zct_cty_id=30804 GROUP BY z2.zct_cty_id)) as srcZones,
                                    (SELECT GROUP_CONCAT(z2.zct_zon_id) as srcZones FROM zone_cities z2
                                        WHERE z2.zct_active=1 AND zct_cty_id=30372 GROUP BY z2.zct_cty_id) as dstZones,
                                    (
                                    IF(cpm_agent_id IS NOT NULL, 1,0) +
                                    IF(cpm_source_city IS NOT NULL,54,0) +
                                    IF(cpm_destination_city IS NOT NULL,54,0) +
                                    IF(cpm_source_zone IS NOT NULL,18,0) +
                                    IF(cpm_destination_zone IS NOT NULL,18,0) +
                                    IF(cpm_source_state IS NOT NULL,6,0) +
                                    IF(cpm_destination_state IS NOT NULL,6,0) +
                                    IF(cpm_trip_type IS NOT NULL,1,0) +
                                    IF(cpm_vehicle_type IS NOT NULL,1,0)
                               ) as rank
                                FROM `channel_partner_markup`
                                WHERE cpm_active=1) a
                            WHERE
                            (
                                (cpm_source_city IS NULL OR cpm_source_city=30804) AND
                                (cpm_destination_city IS NULL OR cpm_destination_city=30372) AND
                                (cpm_source_zone IS NULL OR cpm_source_zone IN (srcZones)) AND
                                (cpm_destination_zone IS NULL OR cpm_destination_zone IN (dstZones))
                            )
                            AND cpm_agent_id = 1249
                            AND ('2024-10-31 04:00:00' BETWEEN cpm_from_date AND cpm_to_date)  AND (cpm_vehicle_type=72 OR cpm_vehicle_type IS NULL)  AND (cpm_trip_type=1 OR cpm_trip_type IS NULL)
                        ORDER BY rank DESC, amount DESC  LIMIT 1 
	 [params: []]
2024/10/24 00:03:38 [profile] [profile.module.admin.controller.booking.getamountbyvehicle] [T: 567.387] [M: 23684.88] [ET: 4.831/536.579] [MU: 81.59/23684.72] 
	RouteRates::calculate for CAB 72 2024-10-31 04:00:00 - Trip Type: 1 657093751
2024/10/24 00:03:38 [profile] [profile.module.admin.controller.booking.getamountbyvehicle] [T: 567.925] [M: 23664.49] [ET: 21.083/537.119] [MU: 181.08/23664.34] 
	Quote::calculateOneWay  for CAB 72 Date: 2024-10-31 04:00:00
2024/10/24 00:03:38 [profile] [profile.module.admin.controller.booking.getamountbyvehicle] [T: 568.73] [M: 23661] [ET: 0.599/537.904] [MU: 0.9/23660.75] 
	SQL: SELECT svc.scv_scc_id FROM svc_class_vhc_cat svc
					-- INNER JOIN service_class scc ON svc.scv_scc_id=scc_id
					WHERE scv_id=:cabId 
	 [params: {"cabId":"72"}]
2024/10/24 00:03:38 [profile] [profile.module.admin.controller.booking.getamountbyvehicle] [T: 568.882] [M: 23662.25] [ET: 27.676/538.097] [MU: 221.74/23662.16] 
	Quote For CabType: 72
2024/10/24 00:03:38 [profile] [profile.module.admin.controller.booking.getamountbyvehicle] [T: 570.392] [M: 23705.02] 
+++++++++++++++++++++++++++++++++++++++++++++++++++++++++++profile models.QuotesDataCreated.setData START++++++++++++++++++++++++++++++++++++++++++++++++++
	URL: [POST]/aaohome/booking/getamountbyvehicle
	User IP: 192.168.255.12
	Referrer: http://localhost:84/aaohome/booking/create
	POST: {"fromCity":"30804","toCity":"30372","cabType":"1","tripDistance":"917","tripDuration":"930","multiCityData":"[{\"pickup_city\":\"30804\",\"drop_city\":\"30372\",\"pickup_address\":\"\",\"drop_address\":null,\"date\":\"2024-10-31 04:00:00\",\"distance\":\"917\",\"duration\":\"930\"}]","bookingType":"1","pickupAddress":"","dropupAddress":"","routeDataArr":[{"locLatVal":"","locLonVal":"","brtLocationVal":""},{"locLatVal":"","locLonVal":"","brtLocationVal":""}],"pickupDate":"31\/10\/2024","pickupTime":"04:00 AM","isGozonow":"0","minTripDistance":"0","tripUser":"1","YII_CSRF_TOKEN":"N3VxRE1WeG9UeHk5UWFBUFpPT216eWVyY0xWTVpoTkcUoJ2aBoup1fU2M5E4ePVZVcUNlKiYZZysUqEklNiKWw==","isAirportPickup":"1"}
	RawBody: fromCity=30804&toCity=30372&cabType=1&tripDistance=917&tripDuration=930&multiCityData=%5B%7B%22pickup_city%22%3A%2230804%22%2C%22drop_city%22%3A%2230372%22%2C%22pickup_address%22%3A%22%22%2C%22drop_address%22%3Anull%2C%22date%22%3A%222024-10-31+04%3A00%3A00%22%2C%22distance%22%3A%22917%22%2C%22duration%22%3A%22930%22%7D%5D&bookingType=1&pickupAddress=&dropupAddress=&routeDataArr%5B0%5D%5BlocLatVal%5D=&routeDataArr%5B0%5D%5BlocLonVal%5D=&routeDataArr%5B0%5D%5BbrtLocationVal%5D=&routeDataArr%5B1%5D%5BlocLatVal%5D=&routeDataArr%5B1%5D%5BlocLonVal%5D=&routeDataArr%5B1%5D%5BbrtLocationVal%5D=&pickupDate=31%2F10%2F2024&pickupTime=04%3A00+AM&isGozonow=0&minTripDistance=0&tripUser=1&YII_CSRF_TOKEN=N3VxRE1WeG9UeHk5UWFBUFpPT216eWVyY0xWTVpoTkcUoJ2aBoup1fU2M5E4ePVZVcUNlKiYZZysUqEklNiKWw%3D%3D&isAirportPickup=1
	[UserID: 30] [UserType: 4]
2024/10/24 00:03:38 [profile] [profile.module.admin.controller.booking.getamountbyvehicle] [T: 602.813] [M: 23789.88] [ET: 15.715/572.004] [MU: 15.62/23789.77] 
	QuotesDataPickup::setData for CAB Array
2024/10/24 00:03:38 [profile] [profile.module.admin.controller.booking.getamountbyvehicle] [T: 602.988] [M: 23785.46] [ET: 33.079/572.191] [MU: 82.39/23785.35] 
	models.QuotesDataCreated.setData
2024/10/24 00:03:38 [profile] [profile.module.admin.controller.booking.getamountbyvehicle] [T: 603.065] [M: 23787.02] 
============================================================Profile models.QuotesDataCreated.setData DONE==================================================
2024/10/24 00:03:38 [profile] [profile.module.admin.controller.booking.getamountbyvehicle] [T: 603.292] [M: 23783.41] [ET: 268.727/572.489] [MU: 4962.99/23783.32] 
	models.Quote.getQuote
2024/10/24 00:03:38 [profile] [profile.module.admin.controller.booking.getamountbyvehicle] [T: 603.525] [M: 23786.91] 
============================================================Profile models.Quote.getQuote DONE==================================================
2024/10/24 00:03:38 [profile] [profile.module.admin.controller.booking.getamountbyvehicle] [T: 622.594] [M: 24469.8] [ET: 1.79/591.801] [MU: 2.34/24469.42] 
	SQL: SELECT dzs_zone_type FROM dynamic_zone_surge WHERE dzs_fromzoneid IN (:gp83) AND dzs_tozoneid IN (:gp84,:gp85) AND dzs_scv_id=:cab AND dzs_booking_type=:tripType  ORDER BY  dzs_zone_type ASC 
	 [params: {":gp84":"191",":gp85":"1056",":gp83":"31","cab":1,"tripType":"1"}]
2024/10/24 00:03:38 [profile] [profile.module.admin.controller.booking.getamountbyvehicle] [T: 627.716] [M: 24472.7] [ET: 4.548/596.927] [MU: 1.24/24472.07] 
	SQL: SELECT prc_cancel_rule_id FROM `partner_cancel_rule` 
			WHERE (prc_zone_category = :zoneType OR prc_zone_category IS NULL)
		AND (prc_scc_id = :sccId OR prc_scc_id IS NULL)
		AND (prc_partner_id = :partnerId OR prc_partner_id IS NULL) 
		AND (prc_bkg_type = :tripType OR prc_bkg_type IS NULL) 
		 AND (prc_is_gozonow IS NULL) 
		AND prc_active=1  
		ORDER BY prc_partner_id DESC, prc_bkg_type DESC  
	 [params: {"zoneType":1,"sccId":"1","partnerId":null,"tripType":"1"}]
2024/10/24 00:03:38 [profile] [profile.module.admin.controller.booking.getamountbyvehicle] [T: 637.276] [M: 24549.09] [ET: 6.762/606.458] [MU: 1.42/24548.9] 
	SQL: SELECT acp_cr_to,acp_margin_data FROM `addon_cancellation_policy` WHERE `acp_id` = :id 
	 [params: {"id":"8"}]
2024/10/24 00:03:38 [profile] [profile.module.admin.controller.booking.getamountbyvehicle] [T: 656.964] [M: 24588.4] [ET: 0.557/626.152] [MU: 1.42/24588.21] 
	SQL: SELECT acp_cr_to,acp_margin_data FROM `addon_cancellation_policy` WHERE `acp_id` = :id 
	 [params: {"id":"9"}]
2024/10/24 00:03:38 [profile] [profile.module.admin.controller.booking.getamountbyvehicle] [T: 675.899] [M: 25016.59] [ET: 11.352/645.102] [MU: 26.49/25015.34] 
	SQL:  SELECT scv_id,scc_id, vct_id, scc_cancel_rule, scc_label,scc_rank, scv_label, scv_code, scc_model_year, 
								CONCAT(vct_label, ' (', scc_label , ')') label,
									vct_label,vct_rank, vct_desc, CONCAT(vct_label, ' ', vct_desc) vhcName, 
									vct_capacity, IF(vct_image IS NULL, 'images/cabs/no-image.png', vct_image) as vct_image, vct_big_bag_capacity, vct_small_bag_capacity, vcsc_small_bag, FLOOR(vcsc_small_bag/2) AS big_bag,
									scc_is_cng, scc_is_petrol_diesel, scc_id, scc_desc, IF( vct_id IN(5, 6), '1', '0' ) AS is_assured, scv_vct_id,scv_parent_id,scv_vct_id,scv_model,scv_scc_id
						FROM svc_class_vhc_cat
						INNER JOIN service_class ON scc_id = scv_scc_id
						INNER JOIN vehicle_category ON vct_id = scv_vct_id
						INNER JOIN vehicle_cat_svc_class on vcsc_ssc_id = scv_scc_id AND vcsc_vct_id = scv_vct_id
						WHERE scv_active = 1 
							AND scc_active = 1 
						AND vct_active = 1
		 AND scv_vct_id = 1 
	 [params: []]
2024/10/24 00:03:38 [profile] [profile.module.admin.controller.booking.getamountbyvehicle] [T: 684.125] [M: 24984.7] [ET: 576.901/653.332] [MU: 14926.76/24984.58] 
	module.admin.controller.booking.getamountbyvehicle
2024/10/24 00:03:38 [profile] [profile.module.admin.controller.booking.getamountbyvehicle] [T: 684.189] [M: 24985.35] 
*******************************************************module.admin.controller.booking.getamountbyvehicle ACTION DONE****************************************************************
2024/10/24 00:03:40 [profile] [profile.module.admin.controller.booking.getamountbyvehicle] [T: 110.128] [M: 10054.8] 
------------------------------------------------------module.admin.controller.booking.getamountbyvehicle ACTION START------------------------------------------------------
	URL: [POST]/aaohome/booking/getamountbyvehicle
	User IP: 192.168.255.12
	Referrer: http://localhost:84/aaohome/booking/create
	POST: {"fromCity":"30804","toCity":"30372","cabType":"1","tripDistance":"917","tripDuration":"930","multiCityData":"[{\"pickup_city\":\"30804\",\"drop_city\":\"30372\",\"pickup_address\":\"\",\"drop_address\":null,\"date\":\"2024-10-31 04:00:00\",\"distance\":\"917\",\"duration\":\"930\"}]","bookingType":"1","pickupAddress":"","dropupAddress":"","routeDataArr":[{"locLatVal":"","locLonVal":"","brtLocationVal":""},{"locLatVal":"","locLonVal":"","brtLocationVal":""}],"pickupDate":"31\/10\/2024","pickupTime":"04:00 AM","isGozonow":"0","minTripDistance":"0","sccId":"1","tripUser":"1","YII_CSRF_TOKEN":"N3VxRE1WeG9UeHk5UWFBUFpPT216eWVyY0xWTVpoTkcUoJ2aBoup1fU2M5E4ePVZVcUNlKiYZZysUqEklNiKWw==","isAirportPickup":"1"}
	RawBody: fromCity=30804&toCity=30372&cabType=1&tripDistance=917&tripDuration=930&multiCityData=%5B%7B%22pickup_city%22%3A%2230804%22%2C%22drop_city%22%3A%2230372%22%2C%22pickup_address%22%3A%22%22%2C%22drop_address%22%3Anull%2C%22date%22%3A%222024-10-31+04%3A00%3A00%22%2C%22distance%22%3A%22917%22%2C%22duration%22%3A%22930%22%7D%5D&bookingType=1&pickupAddress=&dropupAddress=&routeDataArr%5B0%5D%5BlocLatVal%5D=&routeDataArr%5B0%5D%5BlocLonVal%5D=&routeDataArr%5B0%5D%5BbrtLocationVal%5D=&routeDataArr%5B1%5D%5BlocLatVal%5D=&routeDataArr%5B1%5D%5BlocLonVal%5D=&routeDataArr%5B1%5D%5BbrtLocationVal%5D=&pickupDate=31%2F10%2F2024&pickupTime=04%3A00+AM&isGozonow=0&minTripDistance=0&sccId=1&tripUser=1&YII_CSRF_TOKEN=N3VxRE1WeG9UeHk5UWFBUFpPT216eWVyY0xWTVpoTkcUoJ2aBoup1fU2M5E4ePVZVcUNlKiYZZysUqEklNiKWw%3D%3D&isAirportPickup=1
	[UserID: 30] [UserType: 4]
2024/10/24 00:03:40 [profile] [profile.module.admin.controller.booking.getamountbyvehicle] [T: 157.394] [M: 11291.01] setLocationRequest start
2024/10/24 00:03:41 [profile] [profile.module.admin.controller.booking.getamountbyvehicle] [T: 238.566] [M: 11291.52] setLocationRequest ends
2024/10/24 00:03:41 [profile] [profile.module.admin.controller.booking.getamountbyvehicle] [T: 311.396] [M: 18116.9] [ET: 0.507/280.335] [MU: 0.83/18116.71] 
	SQL: SELECT COUNT(1) as cnt FROM cities WHERE cty_active=1 AND cty_service_active=1 AND cty_id=30804 
	 [params: []]
2024/10/24 00:03:41 [profile] [profile.module.admin.controller.booking.getamountbyvehicle] [T: 312.049] [M: 18118.2] [ET: 0.524/280.981] [MU: 0.84/18118.01] 
	SQL: SELECT COUNT(1) as cnt FROM cities WHERE cty_active=1 AND cty_service_active=1 AND cty_id=30372 
	 [params: []]
2024/10/24 00:03:41 [profile] [profile.module.admin.controller.booking.getamountbyvehicle] [T: 337.228] [M: 18605.08] [ET: 25.047/306.137] [MU: 486.78/18604.97] 
	BookingRoute::calculateDistance
2024/10/24 00:03:41 [profile] [profile.module.admin.controller.booking.getamountbyvehicle] [T: 338.667] [M: 18602.49] [ET: 0.961/307.567] [MU: 5.12/18602.38] 
	BookingRoute::calculateDistance
2024/10/24 00:03:41 [profile] [profile.module.admin.controller.booking.getamountbyvehicle] [T: 338.806] [M: 18598.54] [ET: 63.898/307.731] [MU: 5974.34/18598.45] 
	validateRoutes
2024/10/24 00:03:41 [profile] [profile.module.admin.controller.booking.getamountbyvehicle] [T: 342.905] [M: 18831.66] [ET: 0.985/311.821] [MU: 27.08/18831.44] 
	SQL: SELECT scv_id FROM svc_class_vhc_cat WHERE scv_active = 1 AND scv_scc_id IN (1,2,4,6) ORDER BY scv_vct_id ASC,scv_scc_id ASC 
	 [params: []]
2024/10/24 00:03:41 [profile] [profile.module.admin.controller.booking.getamountbyvehicle] [T: 345.596] [M: 18819.98] 
+++++++++++++++++++++++++++++++++++++++++++++++++++++++++++profile models.Quote.getQuote START++++++++++++++++++++++++++++++++++++++++++++++++++
	URL: [POST]/aaohome/booking/getamountbyvehicle
	User IP: 192.168.255.12
	Referrer: http://localhost:84/aaohome/booking/create
	POST: {"fromCity":"30804","toCity":"30372","cabType":"1","tripDistance":"917","tripDuration":"930","multiCityData":"[{\"pickup_city\":\"30804\",\"drop_city\":\"30372\",\"pickup_address\":\"\",\"drop_address\":null,\"date\":\"2024-10-31 04:00:00\",\"distance\":\"917\",\"duration\":\"930\"}]","bookingType":"1","pickupAddress":"","dropupAddress":"","routeDataArr":[{"locLatVal":"","locLonVal":"","brtLocationVal":""},{"locLatVal":"","locLonVal":"","brtLocationVal":""}],"pickupDate":"31\/10\/2024","pickupTime":"04:00 AM","isGozonow":"0","minTripDistance":"0","sccId":"1","tripUser":"1","YII_CSRF_TOKEN":"N3VxRE1WeG9UeHk5UWFBUFpPT216eWVyY0xWTVpoTkcUoJ2aBoup1fU2M5E4ePVZVcUNlKiYZZysUqEklNiKWw==","isAirportPickup":"1"}
	RawBody: fromCity=30804&toCity=30372&cabType=1&tripDistance=917&tripDuration=930&multiCityData=%5B%7B%22pickup_city%22%3A%2230804%22%2C%22drop_city%22%3A%2230372%22%2C%22pickup_address%22%3A%22%22%2C%22drop_address%22%3Anull%2C%22date%22%3A%222024-10-31+04%3A00%3A00%22%2C%22distance%22%3A%22917%22%2C%22duration%22%3A%22930%22%7D%5D&bookingType=1&pickupAddress=&dropupAddress=&routeDataArr%5B0%5D%5BlocLatVal%5D=&routeDataArr%5B0%5D%5BlocLonVal%5D=&routeDataArr%5B0%5D%5BbrtLocationVal%5D=&routeDataArr%5B1%5D%5BlocLatVal%5D=&routeDataArr%5B1%5D%5BlocLonVal%5D=&routeDataArr%5B1%5D%5BbrtLocationVal%5D=&pickupDate=31%2F10%2F2024&pickupTime=04%3A00+AM&isGozonow=0&minTripDistance=0&sccId=1&tripUser=1&YII_CSRF_TOKEN=N3VxRE1WeG9UeHk5UWFBUFpPT216eWVyY0xWTVpoTkcUoJ2aBoup1fU2M5E4ePVZVcUNlKiYZZysUqEklNiKWw%3D%3D&isAirportPickup=1
	[UserID: 30] [UserType: 4]
2024/10/24 00:03:41 [profile] [profile.module.admin.controller.booking.getamountbyvehicle] [T: 349.561] [M: 18939.09] [ET: 0.938/318.468] [MU: 8.84/18938.66] 
	SQL: SELECT stt_id, GROUP_CONCAT(DISTINCT zct_zon_id) zones, stt_zone AS region
				FROM   cities
				INNER JOIN states ON cty_state_id = stt_id AND stt_active = '1'
				LEFT JOIN zone_cities ON cty_id = zct_cty_id AND zct_active = 1
				LEFT JOIN zones ON zon_id=zct_zon_id AND zon_active=1
				WHERE  cty_id =:city AND cty_active = 1 
	 [params: {"city":"30804"}]
2024/10/24 00:03:41 [profile] [profile.module.admin.controller.booking.getamountbyvehicle] [T: 350.564] [M: 18944.05] [ET: 0.857/319.476] [MU: 3.34/18943.61] 
	SQL: SELECT stt_id, GROUP_CONCAT(DISTINCT zct_zon_id) zones, stt_zone AS region
				FROM   cities
				INNER JOIN states ON cty_state_id = stt_id AND stt_active = '1'
				LEFT JOIN zone_cities ON cty_id = zct_cty_id AND zct_active = 1
				LEFT JOIN zones ON zon_id=zct_zon_id AND zon_active=1
				WHERE  cty_id =:city AND cty_active = 1 
	 [params: {"city":"30372"}]
2024/10/24 00:03:41 [profile] [profile.module.admin.controller.booking.getamountbyvehicle] [T: 351.989] [M: 18946.09] [ET: 1.226/320.897] [MU: 0.9/18945.87] 
	SQL: SELECT rut_id FROM `route` WHERE rut_from_city_id =:fromCty AND rut_to_city_id=:toCty AND rut_active = 1 
	 [params: {"fromCty":"30804","toCty":"30372"}]
2024/10/24 00:03:41 [profile] [profile.module.admin.controller.booking.getamountbyvehicle] [T: 353.644] [M: 18997.24] [ET: 1.445/322.549] [MU: 43.6/18995.74] 
	SQL: SELECT scv_id, CASE
				WHEN scr_area_type=1 AND scr_area_id IN (31) THEN 10
				WHEN scr_area_type=1 AND scr_area_id IN (0) THEN 9
				WHEN scr_area_type=2 AND scr_area_id IN (105) THEN 5
				WHEN scr_area_type=2 AND scr_area_id IN (86) THEN 4
				WHEN scr_area_type=3 AND scr_area_id IN (30804) THEN 20
				WHEN scr_area_type=3 AND scr_area_id IN (30372) THEN 19
				WHEN scr_area_type=4 AND scr_area_id IN (1) THEN 3
				WHEN scr_area_type=4 AND scr_area_id IN (2) THEN 2
				WHEN scr_area_type=5 THEN 25
				ELSE 1
				END AS rank, 
			scc_id, scr_is_allowed 
		FROM service_class_rule 
		INNER JOIN svc_class_vhc_cat ON scv_id = scr_scv_id AND scv_active = 1
		INNER JOIN service_class ON scv_scc_id = scc_id
		WHERE   ((scr_area_type = 1 AND scr_area_id IN (:gp0)) 
			OR (scr_area_type = 2 AND scr_area_id IN (:gp3,:gp4)) 
			OR (scr_area_type = 3 AND scr_area_id IN (:gp1,:gp2)) 
			OR (scr_area_type = 4 AND scr_area_id IN (:gp5,:gp6))
			OR (scr_area_type = 5 AND scr_area_id IN (4181))
			OR scr_area_type IS NULL)
			AND (scr_trip_type = :tripType OR scr_trip_type IS NULL) 
			AND scr_active = 1 AND scv_id IN (1)
		ORDER BY rank DESC
		 
	 [params: {":gp0":"31",":gp1":"30804",":gp2":"30372",":gp3":"105",":gp4":"86",":gp5":"1",":gp6":"2","tripType":"1"}]
2024/10/24 00:03:41 [profile] [profile.module.admin.controller.booking.getamountbyvehicle] [T: 355.192] [M: 18988.36] [ET: 0.596/324.14] [MU: 3.33/18987.92] 
	SQL: SELECT stt_id, GROUP_CONCAT(DISTINCT zct_zon_id) zones, stt_zone AS region
				FROM   cities
				INNER JOIN states ON cty_state_id = stt_id AND stt_active = '1'
				LEFT JOIN zone_cities ON cty_id = zct_cty_id AND zct_active = 1
				LEFT JOIN zones ON zon_id=zct_zon_id AND zon_active=1
				WHERE  cty_id =:city AND cty_active = 1 
	 [params: {"city":"30804"}]
2024/10/24 00:03:41 [profile] [profile.module.admin.controller.booking.getamountbyvehicle] [T: 355.898] [M: 18993.31] [ET: 0.591/324.849] [MU: 3.35/18992.88] 
	SQL: SELECT stt_id, GROUP_CONCAT(DISTINCT zct_zon_id) zones, stt_zone AS region
				FROM   cities
				INNER JOIN states ON cty_state_id = stt_id AND stt_active = '1'
				LEFT JOIN zone_cities ON cty_id = zct_cty_id AND zct_active = 1
				LEFT JOIN zones ON zon_id=zct_zon_id AND zon_active=1
				WHERE  cty_id =:city AND cty_active = 1 
	 [params: {"city":"30372"}]
2024/10/24 00:03:41 [profile] [profile.module.admin.controller.booking.getamountbyvehicle] [T: 356.49] [M: 18995.35] [ET: 0.504/325.438] [MU: 0.9/18995.13] 
	SQL: SELECT rut_id FROM `route` WHERE rut_from_city_id =:fromCty AND rut_to_city_id=:toCty AND rut_active = 1 
	 [params: {"fromCty":"30804","toCty":"30372"}]
2024/10/24 00:03:41 [profile] [profile.module.admin.controller.booking.getamountbyvehicle] [T: 357.378] [M: 19027.12] [ET: 0.692/326.279] [MU: 24.22/19025.62] 
	SQL: SELECT scv_id, CASE
				WHEN scr_area_type=1 AND scr_area_id IN (31) THEN 10
				WHEN scr_area_type=1 AND scr_area_id IN (0) THEN 9
				WHEN scr_area_type=2 AND scr_area_id IN (105) THEN 5
				WHEN scr_area_type=2 AND scr_area_id IN (86) THEN 4
				WHEN scr_area_type=3 AND scr_area_id IN (30804) THEN 20
				WHEN scr_area_type=3 AND scr_area_id IN (30372) THEN 19
				WHEN scr_area_type=4 AND scr_area_id IN (1) THEN 3
				WHEN scr_area_type=4 AND scr_area_id IN (2) THEN 2
				WHEN scr_area_type=5 THEN 25
				ELSE 1
				END AS rank, 
			scc_id, scr_is_allowed 
		FROM service_class_rule 
		INNER JOIN svc_class_vhc_cat ON scv_id = scr_scv_id AND scv_active = 1
		INNER JOIN service_class ON scv_scc_id = scc_id
		WHERE   ((scr_area_type = 1 AND scr_area_id IN (:gp7)) 
			OR (scr_area_type = 2 AND scr_area_id IN (:gp10,:gp11)) 
			OR (scr_area_type = 3 AND scr_area_id IN (:gp8,:gp9)) 
			OR (scr_area_type = 4 AND scr_area_id IN (:gp12,:gp13))
			OR (scr_area_type = 5 AND scr_area_id IN (4181))
			OR scr_area_type IS NULL)
			AND (scr_trip_type = :tripType OR scr_trip_type IS NULL) 
			AND scr_active = 1 AND scv_id IN (1)
		ORDER BY rank DESC
		 
	 [params: {":gp7":"31",":gp8":"30804",":gp9":"30372",":gp10":"105",":gp11":"86",":gp12":"1",":gp13":"2","tripType":"1"}]
2024/10/24 00:03:41 [profile] [profile.module.admin.controller.booking.getamountbyvehicle] [T: 373.002] [M: 19077.48] [ET: 0.493/341.919] [MU: 0.83/19077.29] 
	SQL: SELECT cts_category FROM cities_stats WHERE cts_cty_id = :cityId 
	 [params: {"cityId":"30804"}]
2024/10/24 00:03:41 [profile] [profile.module.admin.controller.booking.getamountbyvehicle] [T: 373.687] [M: 19079.77] [ET: 0.514/342.596] [MU: 0.97/19079.45] 
	SQL: SELECT GROUP_CONCAT(adn_id) as ids FROM addon_service_class_rule INNER JOIN addons ON ascr_adn_id = adn_id AND adn_active=1 AND ascr_active = 1 WHERE ascr_cty_category=:cat AND ascr_scc_id=:class 
	 [params: {"cat":2,"class":"1"}]
2024/10/24 00:03:41 [profile] [profile.module.admin.controller.booking.getamountbyvehicle] [T: 394.72] [M: 19532.3] [ET: 0.9/363.646] [MU: 5.84/19531.43] 
	SQL: SELECT route.rut_id, route.rut_from_city_id start,route.rut_to_city_id end, NULL AS fromAlias, NULL AS toAlias, rut_name,route.rut_estm_distance as quotedDistance, route.rut_estm_distance as rateDistance,
                                0 AS extraDistance, 
								0 AS extraStartDistance,
								1 as rank,
                                0 as startTime, 0 as endTime, route.rut_estm_time,rate.*
                        FROM   route
						INNER JOIN rate ON rut_id = rate.rte_route_id AND rate.rte_status=1 AND rate.rte_vendor_amount>0 AND rate.rte_vehicletype_id=:cabType
                        WHERE  rut_active = 1 AND route.rut_from_city_id =:fromCity AND route.rut_to_city_id =:toCity 
	 [params: {"cabType":"1","fromCity":"30804","toCity":"30372"}]
2024/10/24 00:03:41 [profile] [profile.module.admin.controller.booking.getamountbyvehicle] [T: 398.883] [M: 19699.27] [ET: 0.918/367.805] [MU: 0.9/19699.05] 
	SQL: SELECT rut_id FROM `route` WHERE rut_from_city_id =:fromCty AND rut_to_city_id=:toCty AND rut_active = 1 
	 [params: {"fromCty":"30804","toCty":"30372"}]
2024/10/24 00:03:41 [profile] [profile.module.admin.controller.booking.getamountbyvehicle] [T: 402.363] [M: 19830.86] [ET: 0.569/371.321] [MU: 3.33/19830.42] 
	SQL: SELECT stt_id, GROUP_CONCAT(DISTINCT zct_zon_id) zones, stt_zone AS region
				FROM   cities
				INNER JOIN states ON cty_state_id = stt_id AND stt_active = '1'
				LEFT JOIN zone_cities ON cty_id = zct_cty_id AND zct_active = 1
				LEFT JOIN zones ON zon_id=zct_zon_id AND zon_active=1
				WHERE  cty_id =:city AND cty_active = 1 
	 [params: {"city":"30804"}]
2024/10/24 00:03:41 [profile] [profile.module.admin.controller.booking.getamountbyvehicle] [T: 403.116] [M: 19862.72] [ET: 0.613/372.072] [MU: 25.34/19861.97] 
	SQL: SELECT area_price_rule.*,
					CASE area_price_rule.apr_area_type
					WHEN 1 THEN 10
					WHEN 2 THEN 5
					WHEN 3 THEN 20   
					ELSE 1
					END AS rank
				FROM area_price_rule 
				WHERE apr_active=1 AND ((apr_area_type = 3 AND apr_area_id IN (:gp16)) OR (apr_area_type = 5 AND apr_area_id IN (:gp14)) OR (apr_area_type = 2 AND apr_area_id IN (:gp17)) OR (apr_area_type = 4 AND apr_area_id IN (:gp18)) OR (apr_area_type = 1 AND apr_area_id IN (:gp15))) AND apr_cab_type=:cab ORDER BY rank DESC 
	 [params: {":gp14":"4181",":gp15":"31",":gp16":"30804",":gp17":"105",":gp18":"1","cab":"1"}]
2024/10/24 00:03:41 [profile] [profile.module.admin.controller.booking.getamountbyvehicle] [T: 430.551] [M: 21407.52] [ET: 0.634/399.482] [MU: 4.21/21406.64] 
	SQL: SELECT *
				FROM 
                   (
							SELECT cities_stats.cts_cty_id AS vnd_city, cities_stats.cts_vnd_cnt AS cnt, 0 AS distance
							FROM cities_stats
							WHERE     cities_stats.cts_cty_id = :city	AND cities_stats.cts_vnd_cnt >= 2

							UNION
							SELECT cities_stats.cts_cty_id AS vnd_city, cities_stats.cts_vnd_cnt AS cnt, IFNULL(rut_actual_distance, rut_estm_distance) AS distance
							FROM route
							INNER JOIN cities_stats  ON  cities_stats.cts_cty_id = route.rut_from_city_id AND cities_stats.cts_vnd_cnt >= 2 AND IFNULL(rut_actual_distance, rut_estm_distance) < 40
							WHERE rut_to_city_id = :city
							GROUP BY cities_stats.cts_cty_id   
                    ) a
				ORDER BY DISTANCE ASC 
	 [params: {":city":"30804"}]
2024/10/24 00:03:41 [profile] [profile.module.admin.controller.booking.getamountbyvehicle] [T: 446.36] [M: 21455.7] [ET: 0.945/415.256] [MU: 4.21/21454.82] 
	SQL: SELECT *
				FROM 
                   (
							SELECT cities_stats.cts_cty_id AS vnd_city, cities_stats.cts_vnd_cnt AS cnt, 0 AS distance
							FROM cities_stats
							WHERE     cities_stats.cts_cty_id = :city	AND cities_stats.cts_vnd_cnt >= 2

							UNION
							SELECT cities_stats.cts_cty_id AS vnd_city, cities_stats.cts_vnd_cnt AS cnt, IFNULL(rut_actual_distance, rut_estm_distance) AS distance
							FROM route
							INNER JOIN cities_stats  ON  cities_stats.cts_cty_id = route.rut_from_city_id AND cities_stats.cts_vnd_cnt >= 2 AND IFNULL(rut_actual_distance, rut_estm_distance) < 40
							WHERE rut_to_city_id = :city
							GROUP BY cities_stats.cts_cty_id   
                    ) a
				ORDER BY DISTANCE ASC 
	 [params: {":city":"30372"}]
2024/10/24 00:03:41 [profile] [profile.module.admin.controller.booking.getamountbyvehicle] [T: 448.863] [M: 21472.67] [ET: 0.628/417.78] [MU: 7.13/21472.56] 
	BookingRoute::calculateDistance
2024/10/24 00:03:41 [profile] [profile.module.admin.controller.booking.getamountbyvehicle] [T: 451.55] [M: 21510.41] [ET: 1.064/420.461] [MU: 2.65/21510.04] 
	SQL: SELECT *
				FROM   partner_rate prt 
				JOIN route rut ON prt.prt_route_id = rut.rut_id AND rut.rut_active = 1
				AND  rut.rut_from_city_id  = 30804 
				AND  rut.rut_to_city_id  = 30372 
				 WHERE prt_vehicletype_id = 1
				AND prt_partner_id = 1249
				AND prt_status = 1
				 
	 [params: []]
2024/10/24 00:03:41 [profile] [profile.module.admin.controller.booking.getamountbyvehicle] [T: 452.72] [M: 21516.39] 
+++++++++++++++++++++++++++++++++++++++++++++++++++++++++++profile models.RouteRates.calculateDriverAllowance START++++++++++++++++++++++++++++++++++++++++++++++++++
	URL: [POST]/aaohome/booking/getamountbyvehicle
	User IP: 192.168.255.12
	Referrer: http://localhost:84/aaohome/booking/create
	POST: {"fromCity":"30804","toCity":"30372","cabType":"1","tripDistance":"917","tripDuration":"930","multiCityData":"[{\"pickup_city\":\"30804\",\"drop_city\":\"30372\",\"pickup_address\":\"\",\"drop_address\":null,\"date\":\"2024-10-31 04:00:00\",\"distance\":\"917\",\"duration\":\"930\"}]","bookingType":"1","pickupAddress":"","dropupAddress":"","routeDataArr":[{"locLatVal":"","locLonVal":"","brtLocationVal":""},{"locLatVal":"","locLonVal":"","brtLocationVal":""}],"pickupDate":"31\/10\/2024","pickupTime":"04:00 AM","isGozonow":"0","minTripDistance":"0","sccId":"1","tripUser":"1","YII_CSRF_TOKEN":"N3VxRE1WeG9UeHk5UWFBUFpPT216eWVyY0xWTVpoTkcUoJ2aBoup1fU2M5E4ePVZVcUNlKiYZZysUqEklNiKWw==","isAirportPickup":"1"}
	RawBody: fromCity=30804&toCity=30372&cabType=1&tripDistance=917&tripDuration=930&multiCityData=%5B%7B%22pickup_city%22%3A%2230804%22%2C%22drop_city%22%3A%2230372%22%2C%22pickup_address%22%3A%22%22%2C%22drop_address%22%3Anull%2C%22date%22%3A%222024-10-31+04%3A00%3A00%22%2C%22distance%22%3A%22917%22%2C%22duration%22%3A%22930%22%7D%5D&bookingType=1&pickupAddress=&dropupAddress=&routeDataArr%5B0%5D%5BlocLatVal%5D=&routeDataArr%5B0%5D%5BlocLonVal%5D=&routeDataArr%5B0%5D%5BbrtLocationVal%5D=&routeDataArr%5B1%5D%5BlocLatVal%5D=&routeDataArr%5B1%5D%5BlocLonVal%5D=&routeDataArr%5B1%5D%5BbrtLocationVal%5D=&pickupDate=31%2F10%2F2024&pickupTime=04%3A00+AM&isGozonow=0&minTripDistance=0&sccId=1&tripUser=1&YII_CSRF_TOKEN=N3VxRE1WeG9UeHk5UWFBUFpPT216eWVyY0xWTVpoTkcUoJ2aBoup1fU2M5E4ePVZVcUNlKiYZZysUqEklNiKWw%3D%3D&isAirportPickup=1
	[UserID: 30] [UserType: 4]
2024/10/24 00:03:41 [profile] [profile.module.admin.controller.booking.getamountbyvehicle] [T: 453.708] [M: 21538.2] [ET: 1.69/422.641] [MU: 23.77/21538.09] 
	models.RouteRates.calculateDriverAllowance
2024/10/24 00:03:41 [profile] [profile.module.admin.controller.booking.getamountbyvehicle] [T: 453.769] [M: 21539.88] 
============================================================Profile models.RouteRates.calculateDriverAllowance DONE==================================================
2024/10/24 00:03:41 [profile] [profile.module.admin.controller.booking.getamountbyvehicle] [T: 456.504] [M: 21622.84] [ET: 0.983/425.435] [MU: 3.2/21620.34] 
	SQL: SELECT * FROM (
                                SELECT *, FLOOR(IF((cpm_value_type=1),(cpm_value+15157),(IF((cpm_value_type=2),(15157+(15157*(cpm_value/100))),cpm_value))))amount,
                                    ((SELECT GROUP_CONCAT(z2.zct_zon_id) as srcZones FROM zone_cities z2
                                        WHERE z2.zct_active=1 AND zct_cty_id=30804 GROUP BY z2.zct_cty_id)) as srcZones,
                                    (SELECT GROUP_CONCAT(z2.zct_zon_id) as srcZones FROM zone_cities z2
                                        WHERE z2.zct_active=1 AND zct_cty_id=30372 GROUP BY z2.zct_cty_id) as dstZones,
                                    (
                                    IF(cpm_agent_id IS NOT NULL, 1,0) +
                                    IF(cpm_source_city IS NOT NULL,54,0) +
                                    IF(cpm_destination_city IS NOT NULL,54,0) +
                                    IF(cpm_source_zone IS NOT NULL,18,0) +
                                    IF(cpm_destination_zone IS NOT NULL,18,0) +
                                    IF(cpm_source_state IS NOT NULL,6,0) +
                                    IF(cpm_destination_state IS NOT NULL,6,0) +
                                    IF(cpm_trip_type IS NOT NULL,1,0) +
                                    IF(cpm_vehicle_type IS NOT NULL,1,0)
                               ) as rank
                                FROM `channel_partner_markup`
                                WHERE cpm_active=1) a
                            WHERE
                            (
                                (cpm_source_city IS NULL OR cpm_source_city=30804) AND
                                (cpm_destination_city IS NULL OR cpm_destination_city=30372) AND
                                (cpm_source_zone IS NULL OR cpm_source_zone IN (srcZones)) AND
                                (cpm_destination_zone IS NULL OR cpm_destination_zone IN (dstZones))
                            )
                            AND cpm_agent_id = 1249
                            AND ('2024-10-31 04:00:00' BETWEEN cpm_from_date AND cpm_to_date)  AND (cpm_vehicle_type=1 OR cpm_vehicle_type IS NULL)  AND (cpm_trip_type=1 OR cpm_trip_type IS NULL)
                        ORDER BY rank DESC, amount DESC  LIMIT 1 
	 [params: []]
2024/10/24 00:03:41 [profile] [profile.module.admin.controller.booking.getamountbyvehicle] [T: 489.409] [M: 22976.29] [ET: 37.499/458.319] [MU: 1462.32/22976.13] 
	RouteRates::calculate for CAB 1 2024-10-31 04:00:00 - Trip Type: 1 397878134
2024/10/24 00:03:41 [profile] [profile.module.admin.controller.booking.getamountbyvehicle] [T: 489.783] [M: 22955.23] [ET: 96.315/458.735] [MU: 3433.19/22955.07] 
	Quote::calculateOneWay  for CAB 1 Date: 2024-10-31 04:00:00
2024/10/24 00:03:41 [profile] [profile.module.admin.controller.booking.getamountbyvehicle] [T: 490.189] [M: 22951.02] [ET: 0.303/459.151] [MU: 0.9/22950.77] 
	SQL: SELECT svc.scv_scc_id FROM svc_class_vhc_cat svc
					-- INNER JOIN service_class scc ON svc.scv_scc_id=scc_id
					WHERE scv_id=:cabId 
	 [params: {"cabId":"1"}]
2024/10/24 00:03:41 [profile] [profile.module.admin.controller.booking.getamountbyvehicle] [T: 490.279] [M: 22951.62] [ET: 136.504/459.237] [MU: 3981.39/22951.52] 
	Quote For CabType: 1
2024/10/24 00:03:41 [profile] [profile.module.admin.controller.booking.getamountbyvehicle] [T: 491.71] [M: 22993.9] 
+++++++++++++++++++++++++++++++++++++++++++++++++++++++++++profile models.QuotesDataCreated.setData START++++++++++++++++++++++++++++++++++++++++++++++++++
	URL: [POST]/aaohome/booking/getamountbyvehicle
	User IP: 192.168.255.12
	Referrer: http://localhost:84/aaohome/booking/create
	POST: {"fromCity":"30804","toCity":"30372","cabType":"1","tripDistance":"917","tripDuration":"930","multiCityData":"[{\"pickup_city\":\"30804\",\"drop_city\":\"30372\",\"pickup_address\":\"\",\"drop_address\":null,\"date\":\"2024-10-31 04:00:00\",\"distance\":\"917\",\"duration\":\"930\"}]","bookingType":"1","pickupAddress":"","dropupAddress":"","routeDataArr":[{"locLatVal":"","locLonVal":"","brtLocationVal":""},{"locLatVal":"","locLonVal":"","brtLocationVal":""}],"pickupDate":"31\/10\/2024","pickupTime":"04:00 AM","isGozonow":"0","minTripDistance":"0","sccId":"1","tripUser":"1","YII_CSRF_TOKEN":"N3VxRE1WeG9UeHk5UWFBUFpPT216eWVyY0xWTVpoTkcUoJ2aBoup1fU2M5E4ePVZVcUNlKiYZZysUqEklNiKWw==","isAirportPickup":"1"}
	RawBody: fromCity=30804&toCity=30372&cabType=1&tripDistance=917&tripDuration=930&multiCityData=%5B%7B%22pickup_city%22%3A%2230804%22%2C%22drop_city%22%3A%2230372%22%2C%22pickup_address%22%3A%22%22%2C%22drop_address%22%3Anull%2C%22date%22%3A%222024-10-31+04%3A00%3A00%22%2C%22distance%22%3A%22917%22%2C%22duration%22%3A%22930%22%7D%5D&bookingType=1&pickupAddress=&dropupAddress=&routeDataArr%5B0%5D%5BlocLatVal%5D=&routeDataArr%5B0%5D%5BlocLonVal%5D=&routeDataArr%5B0%5D%5BbrtLocationVal%5D=&routeDataArr%5B1%5D%5BlocLatVal%5D=&routeDataArr%5B1%5D%5BlocLonVal%5D=&routeDataArr%5B1%5D%5BbrtLocationVal%5D=&pickupDate=31%2F10%2F2024&pickupTime=04%3A00+AM&isGozonow=0&minTripDistance=0&sccId=1&tripUser=1&YII_CSRF_TOKEN=N3VxRE1WeG9UeHk5UWFBUFpPT216eWVyY0xWTVpoTkcUoJ2aBoup1fU2M5E4ePVZVcUNlKiYZZysUqEklNiKWw%3D%3D&isAirportPickup=1
	[UserID: 30] [UserType: 4]
2024/10/24 00:03:41 [profile] [profile.module.admin.controller.booking.getamountbyvehicle] [T: 548.278] [M: 23083.74] [ET: 39.104/517.21] [MU: 16.66/23083.63] 
	QuotesDataPickup::setData for CAB 1
2024/10/24 00:03:41 [profile] [profile.module.admin.controller.booking.getamountbyvehicle] [T: 548.389] [M: 23079.24] [ET: 57.128/517.345] [MU: 87.3/23079.13] 
	models.QuotesDataCreated.setData
2024/10/24 00:03:41 [profile] [profile.module.admin.controller.booking.getamountbyvehicle] [T: 548.433] [M: 23080.3] 
============================================================Profile models.QuotesDataCreated.setData DONE==================================================
2024/10/24 00:03:41 [profile] [profile.module.admin.controller.booking.getamountbyvehicle] [T: 548.536] [M: 23076.56] [ET: 203.497/517.502] [MU: 4256.55/23076.47] 
	models.Quote.getQuote
2024/10/24 00:03:41 [profile] [profile.module.admin.controller.booking.getamountbyvehicle] [T: 548.644] [M: 23078.76] 
============================================================Profile models.Quote.getQuote DONE==================================================
2024/10/24 00:03:41 [profile] [profile.module.admin.controller.booking.getamountbyvehicle] [T: 580.331] [M: 23538.88] [ET: 0.679/549.268] [MU: 1.15/23538.44] 
	SQL: SELECT zones.zon_id
                    FROM cities c1
                    INNER JOIN zone_cities ON zone_cities.zct_cty_id = c1.cty_id AND zct_active=1
                    INNER JOIN zones ON zone_cities.zct_zon_id = zones.zon_id AND zon_active=1
                    WHERE c1.cty_id = 30804 ORDER BY zones.zon_id DESC LIMIT 0,1 
	 [params: []]
2024/10/24 00:03:41 [profile] [profile.module.admin.controller.booking.getamountbyvehicle] [T: 580.882] [M: 23540.7] [ET: 0.466/549.823] [MU: 1.15/23540.27] 
	SQL: SELECT zones.zon_id
                    FROM cities c1
                    INNER JOIN zone_cities ON zone_cities.zct_cty_id = c1.cty_id AND zct_active=1
                    INNER JOIN zones ON zone_cities.zct_zon_id = zones.zon_id AND zon_active=1
                    WHERE c1.cty_id = 30372 ORDER BY zones.zon_id DESC LIMIT 0,1 
	 [params: []]
2024/10/24 00:03:41 [profile] [profile.module.admin.controller.booking.getamountbyvehicle] [T: 582.739] [M: 23629.58] [ET: 0.453/551.683] [MU: 1.3/23629.36] 
	SQL: SELECT stt.stt_zone FROM cities cty INNER JOIN states stt ON stt.stt_id = cty.cty_state_id WHERE cty.cty_id = 30804 
	 [params: []]
2024/10/24 00:03:41 [profile] [profile.module.admin.controller.booking.getamountbyvehicle] [T: 583.04] [M: 23631.13] [ET: 0.211/551.986] [MU: 0.98/23630.76] 
	SQL: SELECT CONCAT('7','',LPAD(:regionId,2,'0'),'',LPAD(:fromZone,5,'0'),'',LPAD(:toZone,5,'0'),'',LPAD(:scv_id,3,'0'),'',LPAD(:tripType,2,'0')) AS rowIdentifier FROM DUAL 
	 [params: {"regionId":"1","fromZone":"31","toZone":"1056","scv_id":"1","tripType":"1"}]
2024/10/24 00:03:41 [profile] [profile.module.admin.controller.booking.getamountbyvehicle] [T: 643.896] [M: 23689.82] [ET: 0.644/612.832] [MU: 1.15/23689.38] 
	SQL: SELECT zones.zon_id
                    FROM cities c1
                    INNER JOIN zone_cities ON zone_cities.zct_cty_id = c1.cty_id AND zct_active=1
                    INNER JOIN zones ON zone_cities.zct_zon_id = zones.zon_id AND zon_active=1
                    WHERE c1.cty_id = 30804 ORDER BY zones.zon_id DESC LIMIT 0,1 
	 [params: []]
2024/10/24 00:03:41 [profile] [profile.module.admin.controller.booking.getamountbyvehicle] [T: 644.457] [M: 23691.18] [ET: 0.444/613.373] [MU: 1.3/23690.96] 
	SQL: SELECT stt.stt_zone FROM cities cty INNER JOIN states stt ON stt.stt_id = cty.cty_state_id WHERE cty.cty_id = 30804 
	 [params: []]
2024/10/24 00:03:41 [profile] [profile.module.admin.controller.booking.getamountbyvehicle] [T: 644.829] [M: 23692.45] [ET: 0.262/613.774] [MU: 0.91/23692.2] 
	SQL: SELECT CONCAT('7','',LPAD(:regionId,2,'0'),'',LPAD(:fromZone,5,'0'),LPAD(:tripType,2,'0')) AS demandIdentifier FROM DUAL 
	 [params: {"regionId":"1","fromZone":"31","tripType":2}]
2024/10/24 00:03:41 [profile] [profile.module.admin.controller.booking.getamountbyvehicle] [T: 686.704] [M: 23990.88] [ET: 2.034/655.608] [MU: 2.34/23990.5] 
	SQL: SELECT dzs_zone_type FROM dynamic_zone_surge WHERE dzs_fromzoneid IN (:gp19) AND dzs_tozoneid IN (:gp20,:gp21) AND dzs_scv_id=:cab AND dzs_booking_type=:tripType  ORDER BY  dzs_zone_type ASC 
	 [params: {":gp20":"191",":gp21":"1056",":gp19":"31","cab":"1","tripType":"1"}]
2024/10/24 00:03:41 [profile] [profile.module.admin.controller.booking.getamountbyvehicle] [T: 687.65] [M: 23993.03] [ET: 0.367/656.58] [MU: 1.24/23992.41] 
	SQL: SELECT prc_cancel_rule_id FROM `partner_cancel_rule` 
			WHERE (prc_zone_category = :zoneType OR prc_zone_category IS NULL)
		AND (prc_scc_id = :sccId OR prc_scc_id IS NULL)
		AND (prc_partner_id = :partnerId OR prc_partner_id IS NULL) 
		AND (prc_bkg_type = :tripType OR prc_bkg_type IS NULL) 
		 AND (prc_is_gozonow IS NULL) 
		AND prc_active=1  
		ORDER BY prc_partner_id DESC, prc_bkg_type DESC  
	 [params: {"zoneType":1,"sccId":"1","partnerId":null,"tripType":"1"}]
2024/10/24 00:03:41 [profile] [profile.module.admin.controller.booking.getamountbyvehicle] [T: 691.189] [M: 24068.38] [ET: 0.407/660.136] [MU: 1.42/24068.19] 
	SQL: SELECT acp_cr_to,acp_margin_data FROM `addon_cancellation_policy` WHERE `acp_id` = :id 
	 [params: {"id":"8"}]
2024/10/24 00:03:41 [profile] [profile.module.admin.controller.booking.getamountbyvehicle] [T: 704.457] [M: 24107.1] [ET: 0.422/673.379] [MU: 1.43/24106.91] 
	SQL: SELECT acp_cr_to,acp_margin_data FROM `addon_cancellation_policy` WHERE `acp_id` = :id 
	 [params: {"id":"9"}]
2024/10/24 00:03:41 [profile] [profile.module.admin.controller.booking.getamountbyvehicle] [T: 713.874] [M: 24558.7] [ET: 0.598/682.81] [MU: 26.49/24557.45] 
	SQL:  SELECT scv_id,scc_id, vct_id, scc_cancel_rule, scc_label,scc_rank, scv_label, scv_code, scc_model_year, 
								CONCAT(vct_label, ' (', scc_label , ')') label,
									vct_label,vct_rank, vct_desc, CONCAT(vct_label, ' ', vct_desc) vhcName, 
									vct_capacity, IF(vct_image IS NULL, 'images/cabs/no-image.png', vct_image) as vct_image, vct_big_bag_capacity, vct_small_bag_capacity, vcsc_small_bag, FLOOR(vcsc_small_bag/2) AS big_bag,
									scc_is_cng, scc_is_petrol_diesel, scc_id, scc_desc, IF( vct_id IN(5, 6), '1', '0' ) AS is_assured, scv_vct_id,scv_parent_id,scv_vct_id,scv_model,scv_scc_id
						FROM svc_class_vhc_cat
						INNER JOIN service_class ON scc_id = scv_scc_id
						INNER JOIN vehicle_category ON vct_id = scv_vct_id
						INNER JOIN vehicle_cat_svc_class on vcsc_ssc_id = scv_scc_id AND vcsc_vct_id = scv_vct_id
						WHERE scv_active = 1 
							AND scc_active = 1 
						AND vct_active = 1
		 AND scv_vct_id = 1 
	 [params: []]
2024/10/24 00:03:41 [profile] [profile.module.admin.controller.booking.getamountbyvehicle] [T: 720.138] [M: 24523.67] [ET: 609.911/689.08] [MU: 14465.64/24523.55] 
	module.admin.controller.booking.getamountbyvehicle
2024/10/24 00:03:41 [profile] [profile.module.admin.controller.booking.getamountbyvehicle] [T: 720.187] [M: 24523.8] 
*******************************************************module.admin.controller.booking.getamountbyvehicle ACTION DONE****************************************************************
2024/10/24 00:04:00 [profile] [profile.module.admin.controller.booking.getamountbyvehicle] [T: 93.65] [M: 10054.8] 
------------------------------------------------------module.admin.controller.booking.getamountbyvehicle ACTION START------------------------------------------------------
	URL: [POST]/aaohome/booking/getamountbyvehicle
	User IP: 192.168.255.12
	Referrer: http://localhost:84/aaohome/booking/create
	POST: {"fromCity":"30804","toCity":"30372","cabType":"1","tripDistance":"917","tripDuration":"930","multiCityData":"[{\"pickup_city\":\"30804\",\"drop_city\":\"30372\",\"pickup_address\":\"\",\"drop_address\":null,\"date\":\"2024-10-31 04:00:00\",\"distance\":\"917\",\"duration\":\"930\"}]","bookingType":"1","pickupAddress":"","dropupAddress":"","routeDataArr":[{"locLatVal":"","locLonVal":"","brtLocationVal":""},{"locLatVal":"","locLonVal":"","brtLocationVal":""}],"pickupDate":"31\/10\/2024","pickupTime":"04:00 AM","isGozonow":"0","minTripDistance":"0","sccId":"1","tripUser":"1","YII_CSRF_TOKEN":"N3VxRE1WeG9UeHk5UWFBUFpPT216eWVyY0xWTVpoTkcUoJ2aBoup1fU2M5E4ePVZVcUNlKiYZZysUqEklNiKWw==","isAirportPickup":"1"}
	RawBody: fromCity=30804&toCity=30372&cabType=1&tripDistance=917&tripDuration=930&multiCityData=%5B%7B%22pickup_city%22%3A%2230804%22%2C%22drop_city%22%3A%2230372%22%2C%22pickup_address%22%3A%22%22%2C%22drop_address%22%3Anull%2C%22date%22%3A%222024-10-31+04%3A00%3A00%22%2C%22distance%22%3A%22917%22%2C%22duration%22%3A%22930%22%7D%5D&bookingType=1&pickupAddress=&dropupAddress=&routeDataArr%5B0%5D%5BlocLatVal%5D=&routeDataArr%5B0%5D%5BlocLonVal%5D=&routeDataArr%5B0%5D%5BbrtLocationVal%5D=&routeDataArr%5B1%5D%5BlocLatVal%5D=&routeDataArr%5B1%5D%5BlocLonVal%5D=&routeDataArr%5B1%5D%5BbrtLocationVal%5D=&pickupDate=31%2F10%2F2024&pickupTime=04%3A00+AM&isGozonow=0&minTripDistance=0&sccId=1&tripUser=1&YII_CSRF_TOKEN=N3VxRE1WeG9UeHk5UWFBUFpPT216eWVyY0xWTVpoTkcUoJ2aBoup1fU2M5E4ePVZVcUNlKiYZZysUqEklNiKWw%3D%3D&isAirportPickup=1
	[UserID: 30] [UserType: 4]
2024/10/24 00:04:00 [profile] [profile.module.admin.controller.booking.getamountbyvehicle] [T: 136.754] [M: 11291.01] setLocationRequest start
2024/10/24 00:04:00 [profile] [profile.module.admin.controller.booking.getamountbyvehicle] [T: 230.378] [M: 11291.52] setLocationRequest ends
2024/10/24 00:04:00 [profile] [profile.module.admin.controller.booking.getamountbyvehicle] [T: 313.208] [M: 18116.9] [ET: 0.349/291.389] [MU: 0.83/18116.71] 
	SQL: SELECT COUNT(1) as cnt FROM cities WHERE cty_active=1 AND cty_service_active=1 AND cty_id=30804 
	 [params: []]
2024/10/24 00:04:00 [profile] [profile.module.admin.controller.booking.getamountbyvehicle] [T: 313.529] [M: 18118.2] [ET: 0.246/291.716] [MU: 0.84/18118.01] 
	SQL: SELECT COUNT(1) as cnt FROM cities WHERE cty_active=1 AND cty_service_active=1 AND cty_id=30372 
	 [params: []]
2024/10/24 00:04:00 [profile] [profile.module.admin.controller.booking.getamountbyvehicle] [T: 333.71] [M: 18605.08] [ET: 20.091/311.856] [MU: 486.78/18604.97] 
	BookingRoute::calculateDistance
2024/10/24 00:04:00 [profile] [profile.module.admin.controller.booking.getamountbyvehicle] [T: 334.907] [M: 18602.49] [ET: 0.667/313.032] [MU: 5.12/18602.38] 
	BookingRoute::calculateDistance
2024/10/24 00:04:00 [profile] [profile.module.admin.controller.booking.getamountbyvehicle] [T: 335.062] [M: 18598.54] [ET: 59.934/313.195] [MU: 5974.34/18598.45] 
	validateRoutes
2024/10/24 00:04:00 [profile] [profile.module.admin.controller.booking.getamountbyvehicle] [T: 339.693] [M: 18831.66] [ET: 1.025/317.845] [MU: 27.08/18831.44] 
	SQL: SELECT scv_id FROM svc_class_vhc_cat WHERE scv_active = 1 AND scv_scc_id IN (1,2,4,6) ORDER BY scv_vct_id ASC,scv_scc_id ASC 
	 [params: []]
2024/10/24 00:04:00 [profile] [profile.module.admin.controller.booking.getamountbyvehicle] [T: 341.715] [M: 18819.98] 
+++++++++++++++++++++++++++++++++++++++++++++++++++++++++++profile models.Quote.getQuote START++++++++++++++++++++++++++++++++++++++++++++++++++
	URL: [POST]/aaohome/booking/getamountbyvehicle
	User IP: 192.168.255.12
	Referrer: http://localhost:84/aaohome/booking/create
	POST: {"fromCity":"30804","toCity":"30372","cabType":"1","tripDistance":"917","tripDuration":"930","multiCityData":"[{\"pickup_city\":\"30804\",\"drop_city\":\"30372\",\"pickup_address\":\"\",\"drop_address\":null,\"date\":\"2024-10-31 04:00:00\",\"distance\":\"917\",\"duration\":\"930\"}]","bookingType":"1","pickupAddress":"","dropupAddress":"","routeDataArr":[{"locLatVal":"","locLonVal":"","brtLocationVal":""},{"locLatVal":"","locLonVal":"","brtLocationVal":""}],"pickupDate":"31\/10\/2024","pickupTime":"04:00 AM","isGozonow":"0","minTripDistance":"0","sccId":"1","tripUser":"1","YII_CSRF_TOKEN":"N3VxRE1WeG9UeHk5UWFBUFpPT216eWVyY0xWTVpoTkcUoJ2aBoup1fU2M5E4ePVZVcUNlKiYZZysUqEklNiKWw==","isAirportPickup":"1"}
	RawBody: fromCity=30804&toCity=30372&cabType=1&tripDistance=917&tripDuration=930&multiCityData=%5B%7B%22pickup_city%22%3A%2230804%22%2C%22drop_city%22%3A%2230372%22%2C%22pickup_address%22%3A%22%22%2C%22drop_address%22%3Anull%2C%22date%22%3A%222024-10-31+04%3A00%3A00%22%2C%22distance%22%3A%22917%22%2C%22duration%22%3A%22930%22%7D%5D&bookingType=1&pickupAddress=&dropupAddress=&routeDataArr%5B0%5D%5BlocLatVal%5D=&routeDataArr%5B0%5D%5BlocLonVal%5D=&routeDataArr%5B0%5D%5BbrtLocationVal%5D=&routeDataArr%5B1%5D%5BlocLatVal%5D=&routeDataArr%5B1%5D%5BlocLonVal%5D=&routeDataArr%5B1%5D%5BbrtLocationVal%5D=&pickupDate=31%2F10%2F2024&pickupTime=04%3A00+AM&isGozonow=0&minTripDistance=0&sccId=1&tripUser=1&YII_CSRF_TOKEN=N3VxRE1WeG9UeHk5UWFBUFpPT216eWVyY0xWTVpoTkcUoJ2aBoup1fU2M5E4ePVZVcUNlKiYZZysUqEklNiKWw%3D%3D&isAirportPickup=1
	[UserID: 30] [UserType: 4]
2024/10/24 00:04:00 [profile] [profile.module.admin.controller.booking.getamountbyvehicle] [T: 344.383] [M: 18939.09] [ET: 0.521/322.558] [MU: 8.84/18938.66] 
	SQL: SELECT stt_id, GROUP_CONCAT(DISTINCT zct_zon_id) zones, stt_zone AS region
				FROM   cities
				INNER JOIN states ON cty_state_id = stt_id AND stt_active = '1'
				LEFT JOIN zone_cities ON cty_id = zct_cty_id AND zct_active = 1
				LEFT JOIN zones ON zon_id=zct_zon_id AND zon_active=1
				WHERE  cty_id =:city AND cty_active = 1 
	 [params: {"city":"30804"}]
2024/10/24 00:04:00 [profile] [profile.module.admin.controller.booking.getamountbyvehicle] [T: 344.912] [M: 18944.05] [ET: 0.444/323.091] [MU: 3.34/18943.61] 
	SQL: SELECT stt_id, GROUP_CONCAT(DISTINCT zct_zon_id) zones, stt_zone AS region
				FROM   cities
				INNER JOIN states ON cty_state_id = stt_id AND stt_active = '1'
				LEFT JOIN zone_cities ON cty_id = zct_cty_id AND zct_active = 1
				LEFT JOIN zones ON zon_id=zct_zon_id AND zon_active=1
				WHERE  cty_id =:city AND cty_active = 1 
	 [params: {"city":"30372"}]
2024/10/24 00:04:00 [profile] [profile.module.admin.controller.booking.getamountbyvehicle] [T: 345.504] [M: 18946.09] [ET: 0.506/323.676] [MU: 0.9/18945.87] 
	SQL: SELECT rut_id FROM `route` WHERE rut_from_city_id =:fromCty AND rut_to_city_id=:toCty AND rut_active = 1 
	 [params: {"fromCty":"30804","toCty":"30372"}]
2024/10/24 00:04:00 [profile] [profile.module.admin.controller.booking.getamountbyvehicle] [T: 346.655] [M: 18997.24] [ET: 1.009/324.822] [MU: 43.6/18995.74] 
	SQL: SELECT scv_id, CASE
				WHEN scr_area_type=1 AND scr_area_id IN (31) THEN 10
				WHEN scr_area_type=1 AND scr_area_id IN (0) THEN 9
				WHEN scr_area_type=2 AND scr_area_id IN (105) THEN 5
				WHEN scr_area_type=2 AND scr_area_id IN (86) THEN 4
				WHEN scr_area_type=3 AND scr_area_id IN (30804) THEN 20
				WHEN scr_area_type=3 AND scr_area_id IN (30372) THEN 19
				WHEN scr_area_type=4 AND scr_area_id IN (1) THEN 3
				WHEN scr_area_type=4 AND scr_area_id IN (2) THEN 2
				WHEN scr_area_type=5 THEN 25
				ELSE 1
				END AS rank, 
			scc_id, scr_is_allowed 
		FROM service_class_rule 
		INNER JOIN svc_class_vhc_cat ON scv_id = scr_scv_id AND scv_active = 1
		INNER JOIN service_class ON scv_scc_id = scc_id
		WHERE   ((scr_area_type = 1 AND scr_area_id IN (:gp0)) 
			OR (scr_area_type = 2 AND scr_area_id IN (:gp3,:gp4)) 
			OR (scr_area_type = 3 AND scr_area_id IN (:gp1,:gp2)) 
			OR (scr_area_type = 4 AND scr_area_id IN (:gp5,:gp6))
			OR (scr_area_type = 5 AND scr_area_id IN (4181))
			OR scr_area_type IS NULL)
			AND (scr_trip_type = :tripType OR scr_trip_type IS NULL) 
			AND scr_active = 1 AND scv_id IN (1)
		ORDER BY rank DESC
		 
	 [params: {":gp0":"31",":gp1":"30804",":gp2":"30372",":gp3":"105",":gp4":"86",":gp5":"1",":gp6":"2","tripType":"1"}]
2024/10/24 00:04:00 [profile] [profile.module.admin.controller.booking.getamountbyvehicle] [T: 348.436] [M: 18988.36] [ET: 0.792/326.608] [MU: 3.33/18987.92] 
	SQL: SELECT stt_id, GROUP_CONCAT(DISTINCT zct_zon_id) zones, stt_zone AS region
				FROM   cities
				INNER JOIN states ON cty_state_id = stt_id AND stt_active = '1'
				LEFT JOIN zone_cities ON cty_id = zct_cty_id AND zct_active = 1
				LEFT JOIN zones ON zon_id=zct_zon_id AND zon_active=1
				WHERE  cty_id =:city AND cty_active = 1 
	 [params: {"city":"30804"}]
2024/10/24 00:04:00 [profile] [profile.module.admin.controller.booking.getamountbyvehicle] [T: 349.309] [M: 18993.31] [ET: 0.715/327.478] [MU: 3.35/18992.88] 
	SQL: SELECT stt_id, GROUP_CONCAT(DISTINCT zct_zon_id) zones, stt_zone AS region
				FROM   cities
				INNER JOIN states ON cty_state_id = stt_id AND stt_active = '1'
				LEFT JOIN zone_cities ON cty_id = zct_cty_id AND zct_active = 1
				LEFT JOIN zones ON zon_id=zct_zon_id AND zon_active=1
				WHERE  cty_id =:city AND cty_active = 1 
	 [params: {"city":"30372"}]
2024/10/24 00:04:00 [profile] [profile.module.admin.controller.booking.getamountbyvehicle] [T: 349.887] [M: 18995.35] [ET: 0.475/328.07] [MU: 0.9/18995.13] 
	SQL: SELECT rut_id FROM `route` WHERE rut_from_city_id =:fromCty AND rut_to_city_id=:toCty AND rut_active = 1 
	 [params: {"fromCty":"30804","toCty":"30372"}]
2024/10/24 00:04:00 [profile] [profile.module.admin.controller.booking.getamountbyvehicle] [T: 350.497] [M: 19027.12] [ET: 0.488/328.67] [MU: 24.22/19025.62] 
	SQL: SELECT scv_id, CASE
				WHEN scr_area_type=1 AND scr_area_id IN (31) THEN 10
				WHEN scr_area_type=1 AND scr_area_id IN (0) THEN 9
				WHEN scr_area_type=2 AND scr_area_id IN (105) THEN 5
				WHEN scr_area_type=2 AND scr_area_id IN (86) THEN 4
				WHEN scr_area_type=3 AND scr_area_id IN (30804) THEN 20
				WHEN scr_area_type=3 AND scr_area_id IN (30372) THEN 19
				WHEN scr_area_type=4 AND scr_area_id IN (1) THEN 3
				WHEN scr_area_type=4 AND scr_area_id IN (2) THEN 2
				WHEN scr_area_type=5 THEN 25
				ELSE 1
				END AS rank, 
			scc_id, scr_is_allowed 
		FROM service_class_rule 
		INNER JOIN svc_class_vhc_cat ON scv_id = scr_scv_id AND scv_active = 1
		INNER JOIN service_class ON scv_scc_id = scc_id
		WHERE   ((scr_area_type = 1 AND scr_area_id IN (:gp7)) 
			OR (scr_area_type = 2 AND scr_area_id IN (:gp10,:gp11)) 
			OR (scr_area_type = 3 AND scr_area_id IN (:gp8,:gp9)) 
			OR (scr_area_type = 4 AND scr_area_id IN (:gp12,:gp13))
			OR (scr_area_type = 5 AND scr_area_id IN (4181))
			OR scr_area_type IS NULL)
			AND (scr_trip_type = :tripType OR scr_trip_type IS NULL) 
			AND scr_active = 1 AND scv_id IN (1)
		ORDER BY rank DESC
		 
	 [params: {":gp7":"31",":gp8":"30804",":gp9":"30372",":gp10":"105",":gp11":"86",":gp12":"1",":gp13":"2","tripType":"1"}]
2024/10/24 00:04:00 [profile] [profile.module.admin.controller.booking.getamountbyvehicle] [T: 365.789] [M: 19077.48] [ET: 0.556/343.953] [MU: 0.83/19077.29] 
	SQL: SELECT cts_category FROM cities_stats WHERE cts_cty_id = :cityId 
	 [params: {"cityId":"30804"}]
2024/10/24 00:04:00 [profile] [profile.module.admin.controller.booking.getamountbyvehicle] [T: 366.548] [M: 19079.77] [ET: 0.607/344.699] [MU: 0.97/19079.45] 
	SQL: SELECT GROUP_CONCAT(adn_id) as ids FROM addon_service_class_rule INNER JOIN addons ON ascr_adn_id = adn_id AND adn_active=1 AND ascr_active = 1 WHERE ascr_cty_category=:cat AND ascr_scc_id=:class 
	 [params: {"cat":2,"class":"1"}]
2024/10/24 00:04:00 [profile] [profile.module.admin.controller.booking.getamountbyvehicle] [T: 388.01] [M: 19532.3] [ET: 0.879/366.176] [MU: 5.84/19531.43] 
	SQL: SELECT route.rut_id, route.rut_from_city_id start,route.rut_to_city_id end, NULL AS fromAlias, NULL AS toAlias, rut_name,route.rut_estm_distance as quotedDistance, route.rut_estm_distance as rateDistance,
                                0 AS extraDistance, 
								0 AS extraStartDistance,
								1 as rank,
                                0 as startTime, 0 as endTime, route.rut_estm_time,rate.*
                        FROM   route
						INNER JOIN rate ON rut_id = rate.rte_route_id AND rate.rte_status=1 AND rate.rte_vendor_amount>0 AND rate.rte_vehicletype_id=:cabType
                        WHERE  rut_active = 1 AND route.rut_from_city_id =:fromCity AND route.rut_to_city_id =:toCity 
	 [params: {"cabType":"1","fromCity":"30804","toCity":"30372"}]
2024/10/24 00:04:00 [profile] [profile.module.admin.controller.booking.getamountbyvehicle] [T: 391.301] [M: 19699.27] [ET: 0.618/369.482] [MU: 0.9/19699.05] 
	SQL: SELECT rut_id FROM `route` WHERE rut_from_city_id =:fromCty AND rut_to_city_id=:toCty AND rut_active = 1 
	 [params: {"fromCty":"30804","toCty":"30372"}]
2024/10/24 00:04:00 [profile] [profile.module.admin.controller.booking.getamountbyvehicle] [T: 394.037] [M: 19830.86] [ET: 0.538/372.216] [MU: 3.33/19830.42] 
	SQL: SELECT stt_id, GROUP_CONCAT(DISTINCT zct_zon_id) zones, stt_zone AS region
				FROM   cities
				INNER JOIN states ON cty_state_id = stt_id AND stt_active = '1'
				LEFT JOIN zone_cities ON cty_id = zct_cty_id AND zct_active = 1
				LEFT JOIN zones ON zon_id=zct_zon_id AND zon_active=1
				WHERE  cty_id =:city AND cty_active = 1 
	 [params: {"city":"30804"}]
2024/10/24 00:04:00 [profile] [profile.module.admin.controller.booking.getamountbyvehicle] [T: 394.728] [M: 19862.72] [ET: 0.58/372.907] [MU: 25.34/19861.97] 
	SQL: SELECT area_price_rule.*,
					CASE area_price_rule.apr_area_type
					WHEN 1 THEN 10
					WHEN 2 THEN 5
					WHEN 3 THEN 20   
					ELSE 1
					END AS rank
				FROM area_price_rule 
				WHERE apr_active=1 AND ((apr_area_type = 3 AND apr_area_id IN (:gp16)) OR (apr_area_type = 5 AND apr_area_id IN (:gp14)) OR (apr_area_type = 2 AND apr_area_id IN (:gp17)) OR (apr_area_type = 4 AND apr_area_id IN (:gp18)) OR (apr_area_type = 1 AND apr_area_id IN (:gp15))) AND apr_cab_type=:cab ORDER BY rank DESC 
	 [params: {":gp14":"4181",":gp15":"31",":gp16":"30804",":gp17":"105",":gp18":"1","cab":"1"}]
2024/10/24 00:04:00 [profile] [profile.module.admin.controller.booking.getamountbyvehicle] [T: 421.755] [M: 21407.52] [ET: 0.619/399.929] [MU: 4.21/21406.64] 
	SQL: SELECT *
				FROM 
                   (
							SELECT cities_stats.cts_cty_id AS vnd_city, cities_stats.cts_vnd_cnt AS cnt, 0 AS distance
							FROM cities_stats
							WHERE     cities_stats.cts_cty_id = :city	AND cities_stats.cts_vnd_cnt >= 2

							UNION
							SELECT cities_stats.cts_cty_id AS vnd_city, cities_stats.cts_vnd_cnt AS cnt, IFNULL(rut_actual_distance, rut_estm_distance) AS distance
							FROM route
							INNER JOIN cities_stats  ON  cities_stats.cts_cty_id = route.rut_from_city_id AND cities_stats.cts_vnd_cnt >= 2 AND IFNULL(rut_actual_distance, rut_estm_distance) < 40
							WHERE rut_to_city_id = :city
							GROUP BY cities_stats.cts_cty_id   
                    ) a
				ORDER BY DISTANCE ASC 
	 [params: {":city":"30804"}]
2024/10/24 00:04:00 [profile] [profile.module.admin.controller.booking.getamountbyvehicle] [T: 436.817] [M: 21455.7] [ET: 1.002/414.967] [MU: 4.21/21454.82] 
	SQL: SELECT *
				FROM 
                   (
							SELECT cities_stats.cts_cty_id AS vnd_city, cities_stats.cts_vnd_cnt AS cnt, 0 AS distance
							FROM cities_stats
							WHERE     cities_stats.cts_cty_id = :city	AND cities_stats.cts_vnd_cnt >= 2

							UNION
							SELECT cities_stats.cts_cty_id AS vnd_city, cities_stats.cts_vnd_cnt AS cnt, IFNULL(rut_actual_distance, rut_estm_distance) AS distance
							FROM route
							INNER JOIN cities_stats  ON  cities_stats.cts_cty_id = route.rut_from_city_id AND cities_stats.cts_vnd_cnt >= 2 AND IFNULL(rut_actual_distance, rut_estm_distance) < 40
							WHERE rut_to_city_id = :city
							GROUP BY cities_stats.cts_cty_id   
                    ) a
				ORDER BY DISTANCE ASC 
	 [params: {":city":"30372"}]
2024/10/24 00:04:00 [profile] [profile.module.admin.controller.booking.getamountbyvehicle] [T: 439.988] [M: 21472.67] [ET: 0.625/418.13] [MU: 7.13/21472.56] 
	BookingRoute::calculateDistance
2024/10/24 00:04:00 [profile] [profile.module.admin.controller.booking.getamountbyvehicle] [T: 442.454] [M: 21510.41] [ET: 0.795/420.597] [MU: 2.65/21510.04] 
	SQL: SELECT *
				FROM   partner_rate prt 
				JOIN route rut ON prt.prt_route_id = rut.rut_id AND rut.rut_active = 1
				AND  rut.rut_from_city_id  = 30804 
				AND  rut.rut_to_city_id  = 30372 
				 WHERE prt_vehicletype_id = 1
				AND prt_partner_id = 1249
				AND prt_status = 1
				 
	 [params: []]
2024/10/24 00:04:00 [profile] [profile.module.admin.controller.booking.getamountbyvehicle] [T: 443.415] [M: 21516.39] 
+++++++++++++++++++++++++++++++++++++++++++++++++++++++++++profile models.RouteRates.calculateDriverAllowance START++++++++++++++++++++++++++++++++++++++++++++++++++
	URL: [POST]/aaohome/booking/getamountbyvehicle
	User IP: 192.168.255.12
	Referrer: http://localhost:84/aaohome/booking/create
	POST: {"fromCity":"30804","toCity":"30372","cabType":"1","tripDistance":"917","tripDuration":"930","multiCityData":"[{\"pickup_city\":\"30804\",\"drop_city\":\"30372\",\"pickup_address\":\"\",\"drop_address\":null,\"date\":\"2024-10-31 04:00:00\",\"distance\":\"917\",\"duration\":\"930\"}]","bookingType":"1","pickupAddress":"","dropupAddress":"","routeDataArr":[{"locLatVal":"","locLonVal":"","brtLocationVal":""},{"locLatVal":"","locLonVal":"","brtLocationVal":""}],"pickupDate":"31\/10\/2024","pickupTime":"04:00 AM","isGozonow":"0","minTripDistance":"0","sccId":"1","tripUser":"1","YII_CSRF_TOKEN":"N3VxRE1WeG9UeHk5UWFBUFpPT216eWVyY0xWTVpoTkcUoJ2aBoup1fU2M5E4ePVZVcUNlKiYZZysUqEklNiKWw==","isAirportPickup":"1"}
	RawBody: fromCity=30804&toCity=30372&cabType=1&tripDistance=917&tripDuration=930&multiCityData=%5B%7B%22pickup_city%22%3A%2230804%22%2C%22drop_city%22%3A%2230372%22%2C%22pickup_address%22%3A%22%22%2C%22drop_address%22%3Anull%2C%22date%22%3A%222024-10-31+04%3A00%3A00%22%2C%22distance%22%3A%22917%22%2C%22duration%22%3A%22930%22%7D%5D&bookingType=1&pickupAddress=&dropupAddress=&routeDataArr%5B0%5D%5BlocLatVal%5D=&routeDataArr%5B0%5D%5BlocLonVal%5D=&routeDataArr%5B0%5D%5BbrtLocationVal%5D=&routeDataArr%5B1%5D%5BlocLatVal%5D=&routeDataArr%5B1%5D%5BlocLonVal%5D=&routeDataArr%5B1%5D%5BbrtLocationVal%5D=&pickupDate=31%2F10%2F2024&pickupTime=04%3A00+AM&isGozonow=0&minTripDistance=0&sccId=1&tripUser=1&YII_CSRF_TOKEN=N3VxRE1WeG9UeHk5UWFBUFpPT216eWVyY0xWTVpoTkcUoJ2aBoup1fU2M5E4ePVZVcUNlKiYZZysUqEklNiKWw%3D%3D&isAirportPickup=1
	[UserID: 30] [UserType: 4]
2024/10/24 00:04:00 [profile] [profile.module.admin.controller.booking.getamountbyvehicle] [T: 444.242] [M: 21538.2] [ET: 1.388/422.416] [MU: 23.77/21538.09] 
	models.RouteRates.calculateDriverAllowance
2024/10/24 00:04:00 [profile] [profile.module.admin.controller.booking.getamountbyvehicle] [T: 444.299] [M: 21539.88] 
============================================================Profile models.RouteRates.calculateDriverAllowance DONE==================================================
2024/10/24 00:04:00 [profile] [profile.module.admin.controller.booking.getamountbyvehicle] [T: 447.767] [M: 21622.84] [ET: 1.709/425.916] [MU: 3.2/21620.34] 
	SQL: SELECT * FROM (
                                SELECT *, FLOOR(IF((cpm_value_type=1),(cpm_value+15157),(IF((cpm_value_type=2),(15157+(15157*(cpm_value/100))),cpm_value))))amount,
                                    ((SELECT GROUP_CONCAT(z2.zct_zon_id) as srcZones FROM zone_cities z2
                                        WHERE z2.zct_active=1 AND zct_cty_id=30804 GROUP BY z2.zct_cty_id)) as srcZones,
                                    (SELECT GROUP_CONCAT(z2.zct_zon_id) as srcZones FROM zone_cities z2
                                        WHERE z2.zct_active=1 AND zct_cty_id=30372 GROUP BY z2.zct_cty_id) as dstZones,
                                    (
                                    IF(cpm_agent_id IS NOT NULL, 1,0) +
                                    IF(cpm_source_city IS NOT NULL,54,0) +
                                    IF(cpm_destination_city IS NOT NULL,54,0) +
                                    IF(cpm_source_zone IS NOT NULL,18,0) +
                                    IF(cpm_destination_zone IS NOT NULL,18,0) +
                                    IF(cpm_source_state IS NOT NULL,6,0) +
                                    IF(cpm_destination_state IS NOT NULL,6,0) +
                                    IF(cpm_trip_type IS NOT NULL,1,0) +
                                    IF(cpm_vehicle_type IS NOT NULL,1,0)
                               ) as rank
                                FROM `channel_partner_markup`
                                WHERE cpm_active=1) a
                            WHERE
                            (
                                (cpm_source_city IS NULL OR cpm_source_city=30804) AND
                                (cpm_destination_city IS NULL OR cpm_destination_city=30372) AND
                                (cpm_source_zone IS NULL OR cpm_source_zone IN (srcZones)) AND
                                (cpm_destination_zone IS NULL OR cpm_destination_zone IN (dstZones))
                            )
                            AND cpm_agent_id = 1249
                            AND ('2024-10-31 04:00:00' BETWEEN cpm_from_date AND cpm_to_date)  AND (cpm_vehicle_type=1 OR cpm_vehicle_type IS NULL)  AND (cpm_trip_type=1 OR cpm_trip_type IS NULL)
                        ORDER BY rank DESC, amount DESC  LIMIT 1 
	 [params: []]
2024/10/24 00:04:00 [profile] [profile.module.admin.controller.booking.getamountbyvehicle] [T: 480.241] [M: 22976.29] [ET: 37.464/458.379] [MU: 1462.32/22976.13] 
	RouteRates::calculate for CAB 1 2024-10-31 04:00:00 - Trip Type: 1 491761637
2024/10/24 00:04:00 [profile] [profile.module.admin.controller.booking.getamountbyvehicle] [T: 480.52] [M: 22955.23] [ET: 93.653/458.707] [MU: 3433.19/22955.07] 
	Quote::calculateOneWay  for CAB 1 Date: 2024-10-31 04:00:00
2024/10/24 00:04:00 [profile] [profile.module.admin.controller.booking.getamountbyvehicle] [T: 481.273] [M: 22951.02] [ET: 0.58/459.417] [MU: 0.9/22950.77] 
	SQL: SELECT svc.scv_scc_id FROM svc_class_vhc_cat svc
					-- INNER JOIN service_class scc ON svc.scv_scc_id=scc_id
					WHERE scv_id=:cabId 
	 [params: {"cabId":"1"}]
2024/10/24 00:04:00 [profile] [profile.module.admin.controller.booking.getamountbyvehicle] [T: 481.538] [M: 22951.62] [ET: 134.69/459.625] [MU: 3981.39/22951.52] 
	Quote For CabType: 1
2024/10/24 00:04:00 [profile] [profile.module.admin.controller.booking.getamountbyvehicle] [T: 483.549] [M: 22993.9] 
+++++++++++++++++++++++++++++++++++++++++++++++++++++++++++profile models.QuotesDataCreated.setData START++++++++++++++++++++++++++++++++++++++++++++++++++
	URL: [POST]/aaohome/booking/getamountbyvehicle
	User IP: 192.168.255.12
	Referrer: http://localhost:84/aaohome/booking/create
	POST: {"fromCity":"30804","toCity":"30372","cabType":"1","tripDistance":"917","tripDuration":"930","multiCityData":"[{\"pickup_city\":\"30804\",\"drop_city\":\"30372\",\"pickup_address\":\"\",\"drop_address\":null,\"date\":\"2024-10-31 04:00:00\",\"distance\":\"917\",\"duration\":\"930\"}]","bookingType":"1","pickupAddress":"","dropupAddress":"","routeDataArr":[{"locLatVal":"","locLonVal":"","brtLocationVal":""},{"locLatVal":"","locLonVal":"","brtLocationVal":""}],"pickupDate":"31\/10\/2024","pickupTime":"04:00 AM","isGozonow":"0","minTripDistance":"0","sccId":"1","tripUser":"1","YII_CSRF_TOKEN":"N3VxRE1WeG9UeHk5UWFBUFpPT216eWVyY0xWTVpoTkcUoJ2aBoup1fU2M5E4ePVZVcUNlKiYZZysUqEklNiKWw==","isAirportPickup":"1"}
	RawBody: fromCity=30804&toCity=30372&cabType=1&tripDistance=917&tripDuration=930&multiCityData=%5B%7B%22pickup_city%22%3A%2230804%22%2C%22drop_city%22%3A%2230372%22%2C%22pickup_address%22%3A%22%22%2C%22drop_address%22%3Anull%2C%22date%22%3A%222024-10-31+04%3A00%3A00%22%2C%22distance%22%3A%22917%22%2C%22duration%22%3A%22930%22%7D%5D&bookingType=1&pickupAddress=&dropupAddress=&routeDataArr%5B0%5D%5BlocLatVal%5D=&routeDataArr%5B0%5D%5BlocLonVal%5D=&routeDataArr%5B0%5D%5BbrtLocationVal%5D=&routeDataArr%5B1%5D%5BlocLatVal%5D=&routeDataArr%5B1%5D%5BlocLonVal%5D=&routeDataArr%5B1%5D%5BbrtLocationVal%5D=&pickupDate=31%2F10%2F2024&pickupTime=04%3A00+AM&isGozonow=0&minTripDistance=0&sccId=1&tripUser=1&YII_CSRF_TOKEN=N3VxRE1WeG9UeHk5UWFBUFpPT216eWVyY0xWTVpoTkcUoJ2aBoup1fU2M5E4ePVZVcUNlKiYZZysUqEklNiKWw%3D%3D&isAirportPickup=1
	[UserID: 30] [UserType: 4]
2024/10/24 00:04:00 [profile] [profile.module.admin.controller.booking.getamountbyvehicle] [T: 520.833] [M: 23088.61] [ET: 18.729/498.991] [MU: 18.83/23088.5] 
	QuotesDataPickup::setData for CAB 1
2024/10/24 00:04:00 [profile] [profile.module.admin.controller.booking.getamountbyvehicle] [T: 520.979] [M: 23083.98] [ET: 37.893/499.148] [MU: 92.03/23083.87] 
	models.QuotesDataCreated.setData
2024/10/24 00:04:00 [profile] [profile.module.admin.controller.booking.getamountbyvehicle] [T: 521.041] [M: 23085.04] 
============================================================Profile models.QuotesDataCreated.setData DONE==================================================
2024/10/24 00:04:00 [profile] [profile.module.admin.controller.booking.getamountbyvehicle] [T: 521.214] [M: 23080.88] [ET: 179.841/499.376] [MU: 4260.87/23080.79] 
	models.Quote.getQuote
2024/10/24 00:04:00 [profile] [profile.module.admin.controller.booking.getamountbyvehicle] [T: 521.37] [M: 23083.08] 
============================================================Profile models.Quote.getQuote DONE==================================================
2024/10/24 00:04:00 [profile] [profile.module.admin.controller.booking.getamountbyvehicle] [T: 529.038] [M: 23543.14] [ET: 0.687/507.205] [MU: 1.1/23542.7] 
	SQL: SELECT zones.zon_id
                    FROM cities c1
                    INNER JOIN zone_cities ON zone_cities.zct_cty_id = c1.cty_id AND zct_active=1
                    INNER JOIN zones ON zone_cities.zct_zon_id = zones.zon_id AND zon_active=1
                    WHERE c1.cty_id = 30804 ORDER BY zones.zon_id DESC LIMIT 0,1 
	 [params: []]
2024/10/24 00:04:00 [profile] [profile.module.admin.controller.booking.getamountbyvehicle] [T: 529.607] [M: 23544.97] [ET: 0.483/507.791] [MU: 1.14/23544.53] 
	SQL: SELECT zones.zon_id
                    FROM cities c1
                    INNER JOIN zone_cities ON zone_cities.zct_cty_id = c1.cty_id AND zct_active=1
                    INNER JOIN zones ON zone_cities.zct_zon_id = zones.zon_id AND zon_active=1
                    WHERE c1.cty_id = 30372 ORDER BY zones.zon_id DESC LIMIT 0,1 
	 [params: []]
2024/10/24 00:04:00 [profile] [profile.module.admin.controller.booking.getamountbyvehicle] [T: 532.27] [M: 23633.84] [ET: 0.914/510.403] [MU: 1.31/23633.63] 
	SQL: SELECT stt.stt_zone FROM cities cty INNER JOIN states stt ON stt.stt_id = cty.cty_state_id WHERE cty.cty_id = 30804 
	 [params: []]
2024/10/24 00:04:00 [profile] [profile.module.admin.controller.booking.getamountbyvehicle] [T: 532.741] [M: 23635.4] [ET: 0.35/510.914] [MU: 0.98/23635.02] 
	SQL: SELECT CONCAT('7','',LPAD(:regionId,2,'0'),'',LPAD(:fromZone,5,'0'),'',LPAD(:toZone,5,'0'),'',LPAD(:scv_id,3,'0'),'',LPAD(:tripType,2,'0')) AS rowIdentifier FROM DUAL 
	 [params: {"regionId":"1","fromZone":"31","toZone":"1056","scv_id":"1","tripType":"1"}]
2024/10/24 00:04:00 [profile] [profile.module.admin.controller.booking.getamountbyvehicle] [T: 552.727] [M: 23695.51] [ET: 0.7/530.891] [MU: 1.09/23695.07] 
	SQL: SELECT zones.zon_id
                    FROM cities c1
                    INNER JOIN zone_cities ON zone_cities.zct_cty_id = c1.cty_id AND zct_active=1
                    INNER JOIN zones ON zone_cities.zct_zon_id = zones.zon_id AND zon_active=1
                    WHERE c1.cty_id = 30804 ORDER BY zones.zon_id DESC LIMIT 0,1 
	 [params: []]
2024/10/24 00:04:00 [profile] [profile.module.admin.controller.booking.getamountbyvehicle] [T: 553.269] [M: 23696.87] [ET: 0.418/531.434] [MU: 1.3/23696.65] 
	SQL: SELECT stt.stt_zone FROM cities cty INNER JOIN states stt ON stt.stt_id = cty.cty_state_id WHERE cty.cty_id = 30804 
	 [params: []]
2024/10/24 00:04:00 [profile] [profile.module.admin.controller.booking.getamountbyvehicle] [T: 553.678] [M: 23698.13] [ET: 0.278/531.834] [MU: 0.91/23697.88] 
	SQL: SELECT CONCAT('7','',LPAD(:regionId,2,'0'),'',LPAD(:fromZone,5,'0'),LPAD(:tripType,2,'0')) AS demandIdentifier FROM DUAL 
	 [params: {"regionId":"1","fromZone":"31","tripType":2}]
2024/10/24 00:04:00 [profile] [profile.module.admin.controller.booking.getamountbyvehicle] [T: 575.966] [M: 23996.81] [ET: 0.721/554.133] [MU: 2.59/23996.44] 
	SQL: SELECT dzs_zone_type FROM dynamic_zone_surge WHERE dzs_fromzoneid IN (:gp19) AND dzs_tozoneid IN (:gp20,:gp21) AND dzs_scv_id=:cab AND dzs_booking_type=:tripType  ORDER BY  dzs_zone_type ASC 
	 [params: {":gp20":"191",":gp21":"1056",":gp19":"31","cab":"1","tripType":"1"}]
2024/10/24 00:04:00 [profile] [profile.module.admin.controller.booking.getamountbyvehicle] [T: 576.856] [M: 23998.97] [ET: 0.405/555.013] [MU: 1.25/23998.34] 
	SQL: SELECT prc_cancel_rule_id FROM `partner_cancel_rule` 
			WHERE (prc_zone_category = :zoneType OR prc_zone_category IS NULL)
		AND (prc_scc_id = :sccId OR prc_scc_id IS NULL)
		AND (prc_partner_id = :partnerId OR prc_partner_id IS NULL) 
		AND (prc_bkg_type = :tripType OR prc_bkg_type IS NULL) 
		 AND (prc_is_gozonow IS NULL) 
		AND prc_active=1  
		ORDER BY prc_partner_id DESC, prc_bkg_type DESC  
	 [params: {"zoneType":1,"sccId":"1","partnerId":null,"tripType":"1"}]
2024/10/24 00:04:00 [profile] [profile.module.admin.controller.booking.getamountbyvehicle] [T: 580.739] [M: 24074.31] [ET: 0.516/558.871] [MU: 1.42/24074.13] 
	SQL: SELECT acp_cr_to,acp_margin_data FROM `addon_cancellation_policy` WHERE `acp_id` = :id 
	 [params: {"id":"8"}]
2024/10/24 00:04:00 [profile] [profile.module.admin.controller.booking.getamountbyvehicle] [T: 594.488] [M: 24113.04] [ET: 0.702/572.643] [MU: 1.42/24112.85] 
	SQL: SELECT acp_cr_to,acp_margin_data FROM `addon_cancellation_policy` WHERE `acp_id` = :id 
	 [params: {"id":"9"}]
2024/10/24 00:04:00 [profile] [profile.module.admin.controller.booking.getamountbyvehicle] [T: 607.772] [M: 24565.01] [ET: 1.157/585.909] [MU: 26.85/24563.76] 
	SQL:  SELECT scv_id,scc_id, vct_id, scc_cancel_rule, scc_label,scc_rank, scv_label, scv_code, scc_model_year, 
								CONCAT(vct_label, ' (', scc_label , ')') label,
									vct_label,vct_rank, vct_desc, CONCAT(vct_label, ' ', vct_desc) vhcName, 
									vct_capacity, IF(vct_image IS NULL, 'images/cabs/no-image.png', vct_image) as vct_image, vct_big_bag_capacity, vct_small_bag_capacity, vcsc_small_bag, FLOOR(vcsc_small_bag/2) AS big_bag,
									scc_is_cng, scc_is_petrol_diesel, scc_id, scc_desc, IF( vct_id IN(5, 6), '1', '0' ) AS is_assured, scv_vct_id,scv_parent_id,scv_vct_id,scv_model,scv_scc_id
						FROM svc_class_vhc_cat
						INNER JOIN service_class ON scc_id = scv_scc_id
						INNER JOIN vehicle_category ON vct_id = scv_vct_id
						INNER JOIN vehicle_cat_svc_class on vcsc_ssc_id = scv_scc_id AND vcsc_vct_id = scv_vct_id
						WHERE scv_active = 1 
							AND scc_active = 1 
						AND vct_active = 1
		 AND scv_vct_id = 1 
	 [params: []]
2024/10/24 00:04:00 [profile] [profile.module.admin.controller.booking.getamountbyvehicle] [T: 614.852] [M: 24529.98] [ET: 521.103/593] [MU: 14471.94/24529.85] 
	module.admin.controller.booking.getamountbyvehicle
2024/10/24 00:04:00 [profile] [profile.module.admin.controller.booking.getamountbyvehicle] [T: 614.967] [M: 24530.1] 
*******************************************************module.admin.controller.booking.getamountbyvehicle ACTION DONE****************************************************************
2024/10/24 00:04:19 [profile] [profile.module.admin.controller.booking.create] [T: 92.924] [M: 10083.94] 
------------------------------------------------------module.admin.controller.booking.create ACTION START------------------------------------------------------
	URL: [POST]/aaohome/booking/create
	User IP: 192.168.255.12
	Referrer: http://localhost:84/aaohome/booking/create
	POST: {"YII_CSRF_TOKEN":"N3VxRE1WeG9UeHk5UWFBUFpPT216eWVyY0xWTVpoTkcUoJ2aBoup1fU2M5E4ePVZVcUNlKiYZZysUqEklNiKWw==","jsonData_vendorIns":"{\"trip_user\":\"1\",\"username\":\"9874394779\",\"bkg_contact_id\":\"1687739\",\"bkg_user_id\":\"\",\"bkg_contact_no\":\"9874394779\",\"bkg_country_code\":\"91\",\"bkg_user_email\":\"puja.developer@gmail.com\",\"bkg_user_fname\":\"kk\",\"bkg_user_lname\":\"kk\",\"bkg_booking_type\":\"1\",\"multicityAutoComTot\":\"\",\"multicityAutoComData\":\"\",\"bkg_from_city_id\":\"30804\",\"bkg_to_city_id\":\"30372\",\"routeProcessed\":\"Agra - Ahmedabad  (One Way)\",\"baseamount\":\"15206\",\"isGozonow\":0,\"bkg_from_city_id1\":\"30804\",\"bkg_to_city_id1\":\"30372\",\"bkg_pickup_date_date\":\"31\\\/10\\\/2024\",\"bkg_pickup_date_time\":\"04:00 AM\",\"bkg_return_date_date\":\"\",\"bkg_return_date_time\":\"\",\"bkg_pickup_address\":\"\",\"bkg_drop_address\":\"\",\"tot_est_dist\":\"917\",\"tot_est_dur\":\"930\",\"bkg_vehicle_type_id\":\"1\",\"modelId\":\"\",\"bkg_service_class\":\"1\",\"bkg_addon_details\":\"\",\"cabNotSupported\":1,\"paymentChangesData\":\"\",\"bkg_surge_differentiate_amount\":\"0\",\"bkgPricefactor\":{\"surgeFactorUsed\":0,\"regularBaseAmount\":13655,\"additional_param\":\"{\\\"defMarkupCab\\\":15157,\\\"partnerMinimumBasePrice\\\":14374}\",\"partner_soldout\":0},\"agtBkgCategory\":null,\"bkg_vht_id\":\"\",\"bkg_trip_distance\":\"917\",\"bkg_trip_duration\":\"930\",\"bkg_addon_ids\":\"\",\"bkg_addon_cab\":\"\",\"bkg_chargeable_distance\":\"0\",\"bkg_gozo_base_amount\":\"15206\",\"bkg_rate_per_km_extra\":\"11\",\"bkg_rate_per_km\":\"9.5\",\"bkg_base_amount\":\"15206\",\"bkg_addon_charges\":\"0\",\"bkg_additional_charge_remark\":\"\",\"bkg_additional_charge\":\"0\",\"bkg_promo1_code\":\"\",\"bkg_discount_amount\":\"0\",\"bkg_quoted_vendor_amount\":\"15569\",\"bkg_vendor_amount\":\"15569\",\"bkg_night_pickup_included\":\"1\",\"bkg_night_drop_included\":\"0\",\"bkg_driver_allowance_amount\":\"250\",\"bkg_parking_charge\":\"0\",\"bkg_is_toll_tax_included\":\"1\",\"bkg_toll_tax\":\"2100\",\"bkg_is_state_tax_included\":\"1\",\"bkg_state_tax\":\"270\",\"bkg_airport_entry_fee\":\"0\",\"bkg_convenience_charge\":\"0\",\"bkg_service_tax_rate\":\"5\",\"bkg_service_tax\":\"891\",\"bkg_total_amount\":\"18717\",\"bkg_is_warned\":\"\",\"scvId\":\"1\",\"BookingRoute\":[{\"brt_from_latitude\":\"\",\"brt_from_longitude\":\"\",\"brt_from_place_id\":\"\",\"brt_from_formatted_address\":\"\",\"brt_from_city_is_airport\":\"0\",\"brt_from_city_is_poi\":\"0\",\"brt_from_location\":\"\"},{\"brt_to_latitude\":\"\",\"brt_to_longitude\":\"\",\"brt_to_place_id\":\"\",\"brt_to_formatted_address\":\"\",\"brt_to_city_is_airport\":\"0\",\"brt_to_city_is_poi\":\"0\",\"brt_to_location\":\"\"}],\"multicityjsondata\":[{\"pickup_city\":\"30804\",\"drop_city\":\"30372\",\"pickup_address\":\"\",\"drop_address\":\"\",\"date\":\"2024-10-31 04:00:00\",\"distance\":\"917\",\"duration\":\"930\"}],\"bkg_chk_others\":\"0\",\"bkg_add_my_trip\":\"0\",\"fileImage\":\"\",\"bkg_invoice\":\"0\",\"bkg_trip_otp_required\":\"1\",\"bkg_driver_app_required\":\"1\",\"bkg_duty_slip_required\":\"0\",\"bkg_water_bottles_required\":\"0\",\"bkg_is_cash_required\":\"0\",\"bkg_pref_req_other\":\"\",\"bkg_tentative_booking\":\"0\",\"bkg_send_email\":\"1\",\"bkg_send_sms\":\"1\",\"bkg_spl_req_senior_citizen_trvl\":\"0\",\"bkg_spl_req_kids_trvl\":\"0\",\"bkg_spl_req_woman_trvl\":\"0\",\"bkg_spl_req_carrier\":\"0\",\"bkg_spl_req_driver_hindi_speaking\":\"0\",\"bkg_spl_req_driver_english_speaking\":\"0\",\"bkg_spl_req_other\":\"\",\"bkg_spl_req_lunch_break_time\":\"0\",\"bkg_info_source\":\"\",\"bkg_flight_no\":\"\",\"bkg_info_source_desc\":\"\",\"bkg_user_trip_type\":\"1\",\"bkg_no_person\":\"2\",\"bkg_num_large_bag\":\"0\",\"bkg_num_small_bag\":\"1\",\"locale_followup_date\":\"24\\\/10\\\/2024\",\"locale_followup_time\":\"02:04 AM\",\"bkg_quote_expire_date\":\"24\\\/10\\\/2024\",\"bkg_quote_expire_time_1\":\"07:40 PM\"}","Booking":{"bkg_instruction_to_driver_vendor":""},"BookingPref":{"bkg_pref_req_other":""}}
	RawBody: YII_CSRF_TOKEN=N3VxRE1WeG9UeHk5UWFBUFpPT216eWVyY0xWTVpoTkcUoJ2aBoup1fU2M5E4ePVZVcUNlKiYZZysUqEklNiKWw%3D%3D&jsonData_vendorIns=%7B%22trip_user%22%3A%221%22%2C%22username%22%3A%229874394779%22%2C%22bkg_contact_id%22%3A%221687739%22%2C%22bkg_user_id%22%3A%22%22%2C%22bkg_contact_no%22%3A%229874394779%22%2C%22bkg_country_code%22%3A%2291%22%2C%22bkg_user_email%22%3A%22puja.developer%40gmail.com%22%2C%22bkg_user_fname%22%3A%22kk%22%2C%22bkg_user_lname%22%3A%22kk%22%2C%22bkg_booking_type%22%3A%221%22%2C%22multicityAutoComTot%22%3A%22%22%2C%22multicityAutoComData%22%3A%22%22%2C%22bkg_from_city_id%22%3A%2230804%22%2C%22bkg_to_city_id%22%3A%2230372%22%2C%22routeProcessed%22%3A%22Agra+-+Ahmedabad++(One+Way)%22%2C%22baseamount%22%3A%2215206%22%2C%22isGozonow%22%3A0%2C%22bkg_from_city_id1%22%3A%2230804%22%2C%22bkg_to_city_id1%22%3A%2230372%22%2C%22bkg_pickup_date_date%22%3A%2231%5C%2F10%5C%2F2024%22%2C%22bkg_pickup_date_time%22%3A%2204%3A00+AM%22%2C%22bkg_return_date_date%22%3A%22%22%2C%22bkg_return_date_time%22%3A%22%22%2C%22bkg_pickup_address%22%3A%22%22%2C%22bkg_drop_address%22%3A%22%22%2C%22tot_est_dist%22%3A%22917%22%2C%22tot_est_dur%22%3A%22930%22%2C%22bkg_vehicle_type_id%22%3A%221%22%2C%22modelId%22%3A%22%22%2C%22bkg_service_class%22%3A%221%22%2C%22bkg_addon_details%22%3A%22%22%2C%22cabNotSupported%22%3A1%2C%22paymentChangesData%22%3A%22%22%2C%22bkg_surge_differentiate_amount%22%3A%220%22%2C%22bkgPricefactor%22%3A%7B%22surgeFactorUsed%22%3A0%2C%22regularBaseAmount%22%3A13655%2C%22additional_param%22%3A%22%7B%5C%22defMarkupCab%5C%22%3A15157%2C%5C%22partnerMinimumBasePrice%5C%22%3A14374%7D%22%2C%22partner_soldout%22%3A0%7D%2C%22agtBkgCategory%22%3Anull%2C%22bkg_vht_id%22%3A%22%22%2C%22bkg_trip_distance%22%3A%22917%22%2C%22bkg_trip_duration%22%3A%22930%22%2C%22bkg_addon_ids%22%3A%22%22%2C%22bkg_addon_cab%22%3A%22%22%2C%22bkg_chargeable_distance%22%3A%220%22%2C%22bkg_gozo_base_amount%22%3A%2215206%22%2C%22bkg_rate_per_km_extra%22%3A%2211%22%2C%22bkg_rate_per_km%22%3A%229.5%22%2C%22bkg_base_amount%22%3A%2215206%22%2C%22bkg_addon_charges%22%3A%220%22%2C%22bkg_additional_charge_remark%22%3A%22%22%2C%22bkg_additional_charge%22%3A%220%22%2C%22bkg_promo1_code%22%3A%22%22%2C%22bkg_discount_amount%22%3A%220%22%2C%22bkg_quoted_vendor_amount%22%3A%2215569%22%2C%22bkg_vendor_amount%22%3A%2215569%22%2C%22bkg_night_pickup_included%22%3A%221%22%2C%22bkg_night_drop_included%22%3A%220%22%2C%22bkg_driver_allowance_amount%22%3A%22250%22%2C%22bkg_parking_charge%22%3A%220%22%2C%22bkg_is_toll_tax_included%22%3A%221%22%2C%22bkg_toll_tax%22%3A%222100%22%2C%22bkg_is_state_tax_included%22%3A%221%22%2C%22bkg_state_tax%22%3A%22270%22%2C%22bkg_airport_entry_fee%22%3A%220%22%2C%22bkg_convenience_charge%22%3A%220%22%2C%22bkg_service_tax_rate%22%3A%225%22%2C%22bkg_service_tax%22%3A%22891%22%2C%22bkg_total_amount%22%3A%2218717%22%2C%22bkg_is_warned%22%3A%22%22%2C%22scvId%22%3A%221%22%2C%22BookingRoute%22%3A%5B%7B%22brt_from_latitude%22%3A%22%22%2C%22brt_from_longitude%22%3A%22%22%2C%22brt_from_place_id%22%3A%22%22%2C%22brt_from_formatted_address%22%3A%22%22%2C%22brt_from_city_is_airport%22%3A%220%22%2C%22brt_from_city_is_poi%22%3A%220%22%2C%22brt_from_location%22%3A%22%22%7D%2C%7B%22brt_to_latitude%22%3A%22%22%2C%22brt_to_longitude%22%3A%22%22%2C%22brt_to_place_id%22%3A%22%22%2C%22brt_to_formatted_address%22%3A%22%22%2C%22brt_to_city_is_airport%22%3A%220%22%2C%22brt_to_city_is_poi%22%3A%220%22%2C%22brt_to_location%22%3A%22%22%7D%5D%2C%22multicityjsondata%22%3A%5B%7B%22pickup_city%22%3A%2230804%22%2C%22drop_city%22%3A%2230372%22%2C%22pickup_address%22%3A%22%22%2C%22drop_address%22%3A%22%22%2C%22date%22%3A%222024-10-31+04%3A00%3A00%22%2C%22distance%22%3A%22917%22%2C%22duration%22%3A%22930%22%7D%5D%2C%22bkg_chk_others%22%3A%220%22%2C%22bkg_add_my_trip%22%3A%220%22%2C%22fileImage%22%3A%22%22%2C%22bkg_invoice%22%3A%220%22%2C%22bkg_trip_otp_required%22%3A%221%22%2C%22bkg_driver_app_required%22%3A%221%22%2C%22bkg_duty_slip_required%22%3A%220%22%2C%22bkg_water_bottles_required%22%3A%220%22%2C%22bkg_is_cash_required%22%3A%220%22%2C%22bkg_pref_req_other%22%3A%22%22%2C%22bkg_tentative_booking%22%3A%220%22%2C%22bkg_send_email%22%3A%221%22%2C%22bkg_send_sms%22%3A%221%22%2C%22bkg_spl_req_senior_citizen_trvl%22%3A%220%22%2C%22bkg_spl_req_kids_trvl%22%3A%220%22%2C%22bkg_spl_req_woman_trvl%22%3A%220%22%2C%22bkg_spl_req_carrier%22%3A%220%22%2C%22bkg_spl_req_driver_hindi_speaking%22%3A%220%22%2C%22bkg_spl_req_driver_english_speaking%22%3A%220%22%2C%22bkg_spl_req_other%22%3A%22%22%2C%22bkg_spl_req_lunch_break_time%22%3A%220%22%2C%22bkg_info_source%22%3A%22%22%2C%22bkg_flight_no%22%3A%22%22%2C%22bkg_info_source_desc%22%3A%22%22%2C%22bkg_user_trip_type%22%3A%221%22%2C%22bkg_no_person%22%3A%222%22%2C%22bkg_num_large_bag%22%3A%220%22%2C%22bkg_num_small_bag%22%3A%221%22%2C%22locale_followup_date%22%3A%2224%5C%2F10%5C%2F2024%22%2C%22locale_followup_time%22%3A%2202%3A04+AM%22%2C%22bkg_quote_expire_date%22%3A%2224%5C%2F10%5C%2F2024%22%2C%22bkg_quote_expire_time_1%22%3A%2207%3A40+PM%22%7D&Booking%5Bbkg_instruction_to_driver_vendor%5D=&BookingPref%5Bbkg_pref_req_other%5D=
	[UserID: 30] [UserType: 4]
2024/10/24 00:04:19 [profile] [profile.module.admin.controller.booking.create] [T: 131.135] [M: 11320.14] setLocationRequest start
2024/10/24 00:04:19 [profile] [profile.module.admin.controller.booking.create] [T: 222.813] [M: 11320.65] setLocationRequest ends
2024/10/24 00:04:20 [profile] [profile.module.admin.controller.booking.create] [T: 573.784] [M: 23867.98] [ET: 4.088/555.562] [MU: 0.84/23867.83] 
	SQL: SELECT ctt_tags FROM contact WHERE ctt_id = 1687739 
	 [params: []]
2024/10/24 00:04:20 [profile] [profile.module.admin.controller.booking.create] [T: 963.561] [M: 27251.17] [ET: 0.82/945.369] [MU: 2.65/27250.86] 
	SQL: SELECT GROUP_CONCAT(zct_zon_id) as zones FROM zone_cities 
						INNER JOIN zones ON zon_id=zct_zon_id AND zon_active=1
						WHERE zct_cty_id=:city AND zct_active=1 
	 [params: {":city":"30804"}]
2024/10/24 00:04:20 [profile] [profile.module.admin.controller.booking.create] [T: 1112.65] [M: 28646.83] Upload Attachment
2024/10/24 00:04:20 [profile] [profile.module.admin.controller.booking.create] [T: 1124.262] [M: 28651.41] Booking Model Saved
2024/10/24 00:04:20 [profile] [profile.module.admin.controller.booking.create] [T: 1175.627] [M: 30034.85] Additional Data Saved
2024/10/24 00:04:20 [profile] [profile.module.admin.controller.booking.create] [T: 1183.951] [M: 30640.27] [ET: 0.38/1165.759] [MU: 0.93/30640.08] 
	SQL: SELECT CalcWorkingMinutes('2024-10-24 00:04:20', '2024-10-31 04:00:00') FROM dual 
	 [params: []]
2024/10/24 00:04:20 [profile] [profile.module.admin.controller.booking.create] [T: 1207.364] [M: 30702.04] Create traveller contact
2024/10/24 00:04:20 [profile] [profile.module.admin.controller.booking.create] [T: 1220.822] [M: 30722.76] [ET: 2.073/1202.622] [MU: 1.15/30722.32] 
	SQL: SELECT   if(phn_full_number <> '', phn_full_number, CONCAT(usr_country_code, usr_mobile)) contactNumber
					FROM `contact_phone` 
					LEFT JOIN users ON usr_contact_id = phn_contact_id
					WHERE  phn_contact_id=:contact  AND phn_active=1
					ORDER BY  phn_active DESC, (phn_is_primary + phn_is_verified + phn_active) DESC
			 
	 [params: {"contact":"1687739"}]
2024/10/24 00:04:20 [profile] [profile.module.admin.controller.booking.create] [T: 1249.645] [M: 30790.18] [ET: 0.692/1231.431] [MU: 1.73/30789.87] 
	SQL: 
				SELECT eml_id, eml_contact_id
				FROM `contact_email`
				WHERE eml_email_address = :email
					AND eml_active = 1
			 AND eml_type = 1 
	 [params: {"email":"puja.developer@gmail.com"}]
2024/10/24 00:04:20 [profile] [profile.module.admin.controller.booking.create] [T: 1250.323] [M: 30792.59] [ET: 0.487/1232.108] [MU: 1.73/30792.28] 
	SQL: 
				SELECT eml_id, eml_contact_id
				FROM `contact_email`
				WHERE eml_email_address = :email
					AND eml_active = 1
			 AND eml_type = 1 
	 [params: {"email":"puja.developer@gmail.com"}]
2024/10/24 00:04:20 [profile] [profile.module.admin.controller.booking.create] [T: 1253.659] [M: 30793.38] [ET: 1.562/1235.442] [MU: 1.79/30793.07] 
	SQL: SELECT phn_id, phn_contact_id
                              FROM contact_phone
                              WHERE phn_phone_no = :phnNumber AND phn_active = 1 AND phn_phone_country_code = 91 
	 [params: {"phnNumber":"9874394779"}]
2024/10/24 00:04:20 [profile] [profile.module.admin.controller.booking.create] [T: 1255.12] [M: 30796.02] [ET: 0.653/1236.914] [MU: 1.79/30795.64] 
	SQL: SELECT phn_id, phn_contact_id
                              FROM contact_phone
                              WHERE phn_phone_no = :phnNumber AND phn_active = 1 AND phn_phone_country_code = 91 AND phn_contact_id = 1687739 
	 [params: {"phnNumber":"9874394779"}]
2024/10/24 00:04:21 [profile] [profile.module.admin.controller.booking.create] [T: 2349.055] [M: 30854.09] Contact::createbyBookingUser DONE
2024/10/24 00:04:21 [profile] [profile.module.admin.controller.booking.create] [T: 2368.528] [M: 32022.93] [ET: 1.006/2350.338] [MU: 1.52/32022.62] 
	SQL: SELECT cr_contact_id, cr_is_vendor, cr_is_driver, cr_is_consumer, cr_is_partner
					FROM contact_profile WHERE cr_contact_id = :contactId AND cr_status = 1 
	 [params: {"contactId":"1687739"}]
2024/10/24 00:04:21 [profile] [profile.module.admin.controller.booking.create] [T: 2382.175] [M: 32059.66] User Created and Linked
2024/10/24 00:04:21 [profile] [profile.module.admin.controller.booking.create] [T: 2388.92] [M: 32062.51] User Info Saved
2024/10/24 00:04:21 [profile] [profile.module.admin.controller.booking.create] [T: 2388.988] [M: 32062.95] BKG User Info Saved
2024/10/24 00:04:21 [profile] [profile.module.admin.controller.booking.create] [T: 2396.716] [M: 32855.9] Lead Converted to Booking
2024/10/24 00:04:21 [profile] [profile.module.admin.controller.booking.create] [T: 2398.879] [M: 32860.66] setBookingRouteInfo Saved
2024/10/24 00:04:22 [profile] [profile.module.admin.controller.booking.create] [T: 2580.003] [M: 36808.1] [ET: 1.033/2561.808] [MU: 1.53/36807.73] 
	SQL: SELECT
					MAX(date_add(brt_pickup_datetime,INTERVAL brt_trip_duration MINUTE)) drop_time,
					MIN(brt_pickup_datetime) pickup_time
					FROM booking_route
					WHERE brt_bkg_id IN(7) AND brt_active=1
					ORDER BY brt_pickup_datetime desc 
	 [params: []]
2024/10/24 00:04:22 [profile] [profile.module.admin.controller.booking.create] [T: 2682.278] [M: 36849.88] [ET: 0.613/2664.078] [MU: 6.17/36847.88] 
	SQL: SELECT bkg_regular_base_amount AS regular, 
				bkg_manual_base_amount AS manual,bkg_manual_surge_factor,
				bkg_ddbp_base_amount AS ddbp,
				bkg_dtbp_base_amount AS dtbp,bkg_dtbp_factor,								
                bkg_ddbp_surge_factor,
				bkg_profitability_base_amount  AS pb,
				bkg_profitability_surge_factor,
				bkg_dzpp_surge_factor,
				bkg_dzpp_base_amount,
				bkg_debp_surge_factor,
				bkg_debp_base_amount,
				bkg_durp_surge_factor,
				bkg_durp_base_amount,
				bkg_ddbpv2_base_amount,
				bkg_ddbpv2_surge_factor,
				bkg_ddsbp_base_amount,
				bkg_ddsbp_surge_factor,
				bkg_additional_param AS additionalParam,
				JSON_VALUE(booking_price_factor.bkg_additional_param,'$.srgManual.factor') AS srgManualFactor,
				JSON_VALUE(booking_price_factor.bkg_additional_param,'$.srgDZPP.factor') AS srgDZPPFactor,
				JSON_VALUE(booking_price_factor.bkg_additional_param,'$.srgDDBP.factor') AS srgDDBPFactor,
				JSON_VALUE(booking_price_factor.bkg_additional_param,'$.srgDEBP.factor') AS srgDEBPFactor,
				JSON_VALUE(booking_price_factor.bkg_additional_param,'$.srgDURP.factor') AS srgDURPFactor,
				JSON_VALUE(booking_price_factor.bkg_additional_param,'$.srgDDBPV2.factor') AS srgDDBPV2Factor,
				JSON_VALUE(booking_price_factor.bkg_additional_param,'$.srgDTBP.factor') AS srgDTBPFactor,
				JSON_VALUE(booking_price_factor.bkg_additional_param,'$.srgDTBP.surgeAmount') AS dtbpSurgeAmount,
				JSON_VALUE(booking_price_factor.bkg_additional_param,'$.srgDDSBP.factor') AS srgDDSBPFactor,
				(CASE bkg_surge_applied  WHEN 0 THEN 'R'  WHEN 1 THEN 'M'  WHEN 2 THEN 'DD'  WHEN 4 THEN 'DT'  WHEN 7 THEN 'DZ'  WHEN 8 THEN 'DUR'  WHEN 9 THEN 'DE'  WHEN 10 THEN 'DD(V2)'  WHEN 11 THEN 'DE+DD(V2)'  WHEN 12 THEN 'DDSBP'  ELSE '' END) AS QuoteFactor 
				FROM booking_price_factor WHERE  bpf_bkg_id =:bkgId 
	 [params: {"bkgId":"7"}]
2024/10/24 00:04:22 [profile] [profile.module.admin.controller.booking.create] [T: 2684.326] [M: 36843.73] BookingPriceFactor::getQuotedFactor
2024/10/24 00:04:22 [profile] [profile.module.admin.controller.booking.create] [T: 2684.403] [M: 36844.19] Promo Part Done
2024/10/24 00:04:22 [profile] [profile.module.admin.controller.booking.create] [T: 2686.591] [M: 36849.79] [ET: 0.741/2668.398] [MU: 2.5/36849.48] 
	SQL: SELECT GROUP_CONCAT(zct_zon_id) as zones FROM zone_cities 
						INNER JOIN zones ON zon_id=zct_zon_id AND zon_active=1
						WHERE zct_cty_id=:city AND zct_active=1 
	 [params: {":city":"30804"}]
2024/10/24 00:04:22 [profile] [profile.module.admin.controller.booking.create] [T: 2688.112] [M: 36895.6] [ET: 1.35/2669.912] [MU: 43/36894.35] 
	SQL:  SELECT scv_id,scc_id, vct_id, scc_cancel_rule, scc_label,scc_rank, scv_label, scv_code, scc_model_year, 
								CONCAT(vct_label, ' (', scc_label , ')') label,
									vct_label,vct_rank, vct_desc, CONCAT(vct_label, ' ', vct_desc) vhcName, 
									vct_capacity, IF(vct_image IS NULL, 'images/cabs/no-image.png', vct_image) as vct_image, vct_big_bag_capacity, vct_small_bag_capacity, vcsc_small_bag, FLOOR(vcsc_small_bag/2) AS big_bag,
									scc_is_cng, scc_is_petrol_diesel, scc_id, scc_desc, IF( vct_id IN(5, 6), '1', '0' ) AS is_assured, scv_vct_id,scv_parent_id,scv_vct_id,scv_model,scv_scc_id
						FROM svc_class_vhc_cat
						INNER JOIN service_class ON scc_id = scv_scc_id
						INNER JOIN vehicle_category ON vct_id = scv_vct_id
						INNER JOIN vehicle_cat_svc_class on vcsc_ssc_id = scv_scc_id AND vcsc_vct_id = scv_vct_id
						WHERE scv_active = 1 
							AND scc_active = 1 
						AND vct_active = 1
		 AND scv_id = 1 
	 [params: []]
2024/10/24 00:04:22 [profile] [profile.module.admin.controller.booking.create] [T: 2699.218] [M: 37487.9] [ET: 2.061/2681.04] [MU: 2.35/37487.52] 
	SQL: SELECT dzs_zone_type FROM dynamic_zone_surge WHERE dzs_fromzoneid IN (:gp0) AND dzs_tozoneid IN (:gp1,:gp2) AND dzs_scv_id=:cab AND dzs_booking_type=:tripType  ORDER BY  dzs_zone_type ASC 
	 [params: {":gp1":"191",":gp2":"1056",":gp0":"31","cab":"1","tripType":"1"}]
2024/10/24 00:04:22 [profile] [profile.module.admin.controller.booking.create] [T: 2705.904] [M: 37490.05] [ET: 5.759/2687.707] [MU: 1.24/37489.43] 
	SQL: SELECT prc_cancel_rule_id FROM `partner_cancel_rule` 
			WHERE (prc_zone_category = :zoneType OR prc_zone_category IS NULL)
		AND (prc_scc_id = :sccId OR prc_scc_id IS NULL)
		AND (prc_partner_id = :partnerId OR prc_partner_id IS NULL) 
		AND (prc_bkg_type = :tripType OR prc_bkg_type IS NULL) 
		 AND (prc_is_gozonow IS NULL) 
		AND prc_active=1  
		ORDER BY prc_partner_id DESC, prc_bkg_type DESC  
	 [params: {"zoneType":1,"sccId":"1","partnerId":null,"tripType":"1"}]
2024/10/24 00:04:22 [profile] [profile.module.admin.controller.booking.create] [T: 2720.752] [M: 37505.3] Cancellation Policy
2024/10/24 00:04:22 [profile] [profile.module.admin.controller.booking.create] [T: 2727.33] [M: 37508.41] Booking Saved
2024/10/24 00:04:22 [profile] [profile.module.admin.controller.booking.create] [T: 2743.296] [M: 37551.73] Booking Other Models Saved
2024/10/24 00:04:22 [profile] [profile.module.admin.controller.booking.create] [T: 2864.384] [M: 37728.96] Agent booking assignment test 1:	
2024/10/24 00:04:22 [profile] [profile.module.admin.controller.booking.create] [T: 2883.664] [M: 38269.36] [ET: 1794.769/2865.451] [MU: 9648.27/38269.27] 
	DBUtil::Transaction
2024/10/24 00:04:22 [profile] [profile.module.admin.controller.booking.create] [T: 2886.18] [M: 38344.34] [ET: 0.489/2867.989] [MU: 0.93/38344.02] 
	SQL: select bkg_id FROM booking bkg INNER JOIN booking_trail bkgTrail ON bkgTrail.btr_bkg_id = bkg.bkg_id WHERE 1
 			    AND bkgTrail.bkg_tags IS NOT NULL AND CONCAT(',', bkg_tags , ',') REGEXP ',(3),'  AND bkg.bkg_id = 7 
	 [params: []]
2024/10/24 00:04:22 [profile] [profile.module.admin.controller.booking.create] [T: 2886.556] [M: 38345.88] [ET: 0.304/2868.387] [MU: 0.93/38345.57] 
	SQL: select bkg_id FROM booking bkg INNER JOIN booking_trail bkgTrail ON bkgTrail.btr_bkg_id = bkg.bkg_id WHERE 1
 			    AND bkgTrail.bkg_tags IS NOT NULL AND CONCAT(',', bkg_tags , ',') REGEXP ',(2),'  AND bkg.bkg_id = 7 
	 [params: []]
2024/10/24 00:04:22 [profile] [profile.module.admin.controller.booking.create] [T: 2956.257] [M: 38406.71] [ET: 36.49/2938.059] [MU: 1.24/38406.09] 
	SQL: SELECT ucm_id,ucm_label,ucm_cash_trip_types,ucm_rel_manager,ucm_gozocoin_percent,ucm_coins 
					FROM contact_profile cp 
				INNER JOIN contact ON ctt_id = cp.cr_contact_id AND ctt_active = 1
				INNER JOIN contact_pref cpr ON cp.cr_contact_id = cpr.cpr_ctt_id 
				INNER JOIN user_category_master ucm ON ucm.ucm_id = cpr.cpr_category 
				WHERE cp.cr_status = 1 AND cp.cr_is_consumer = :user AND ucm_active = 1 
	 [params: {"user":"1"}]
2024/10/24 00:04:22 [profile] [profile.module.admin.controller.booking.create] [T: 2957.078] [M: 37813.72] [ET: 0.42/2938.904] [MU: 0.92/37813.56] 
	SQL: SELECT CalcWorkingMinutes(NOW(), '2024-10-31 04:00:00') FROM dual 
	 [params: []]
2024/10/24 00:04:22 [profile] [profile.module.admin.controller.booking.create] [T: 2957.848] [M: 37815.97] [ET: 0.203/2939.679] [MU: 0.93/37815.78] 
	SQL: SELECT CalcWorkingMinutes('2024-10-24 11:00:00', '2024-10-31 04:00:00') FROM dual 
	 [params: []]
2024/10/24 00:04:22 [profile] [profile.module.admin.controller.booking.create] [T: 2986.343] [M: 39190.36] [ET: 0.52/2968.15] [MU: 0.83/39190.17] 
	SQL: SELECT bkg_id FROM booking WHERE bkg_booking_id =:bkgId OR bkg_id=:bkgId  
	 [params: {"bkgId":"7"}]
2024/10/24 00:04:22 [profile] [profile.module.admin.controller.booking.create] [T: 2991.117] [M: 39207.36] [ET: 3.389/2972.909] [MU: 1.01/39207.05] 
	SQL: SELECT count(distinct scq_id)
					FROM service_call_queue
					WHERE scq_follow_up_queue_type = :refType 
					AND scq_follow_up_date_time<=NOW() AND scq_status IN (1,3) 
	 [params: {"refType":7}]
2024/10/24 00:04:22 [profile] [profile.module.admin.controller.booking.create] [T: 3016.578] [M: 39260.14] [ET: 23.008/2998.398] [MU: 0.86/39259.89] 
	SQL: SELECT tqm_tea_id FROM `team_queue_mapping` WHERE `tqm_active` = 1 AND tqm_queue_id=:refTypeId ORDER BY `tqm_priority` ASC LIMIT 0,1  
	 [params: {"refTypeId":7}]
2024/10/24 00:04:22 [profile] [profile.module.admin.controller.booking.create] [T: 3051.839] [M: 39267.39] [ET: 26.725/3033.655] [MU: 2.27/39265.64] 
	SQL: SELECT
					COUNT(DISTINCT  adm_id) as cnt
					FROM admins adm
					JOIN `admin_profiles` adp ON adp.adp_adm_id = adm.adm_id AND  adm.adm_active=1
					JOIN
					(
						SELECT  ado_admin_id, ado_status, ado_time
						FROM `admin_onoff`
						WHERE 1 AND ado_status = 1 AND
						ado_time > DATE_SUB(NOW(),INTERVAL :duration HOUR)
						GROUP BY ado_admin_id
						ORDER BY ado_time desc
					) aadmin_onoff on aadmin_onoff.ado_admin_id = adm.adm_id
					 JOIN
					(
						SELECT
						admin_profiles.adp_adm_id,
						JSON_UNQUOTE(JSON_EXTRACT(admin_profiles.adp_cdt_id, CONCAT("$[", pseudo_rows.row, "].cdtWeight"))) AS cdtWeight,
						JSON_UNQUOTE(JSON_EXTRACT(admin_profiles.adp_cdt_id, CONCAT("$[", pseudo_rows.row, "].cdtId"))) AS cdtId
						FROM admin_profiles
						JOIN pseudo_rows
						WHERE 1
						HAVING cdtId IS NOT NULL
					) temp ON temp.adp_adm_id=adp.adp_adm_id
					JOIN `cat_depart_team_map` cdt  ON temp.cdtId=cdt.cdt_id
					JOIN teams ON cdt.cdt_tea_id = teams.tea_id
					WHERE  teams.tea_id =:teamid
					AND
					(
						(tea_start_time IS NULL AND tea_stop_time IS NULL)
							OR
						(tea_start_time < tea_stop_time AND CURRENT_TIME() BETWEEN tea_start_time AND tea_stop_time)
							OR
						(tea_stop_time < tea_start_time AND CURRENT_TIME() < tea_start_time AND CURRENT_TIME() < tea_stop_time)
							OR
						(tea_stop_time < tea_start_time AND CURRENT_TIME() > tea_start_time)
					)
					ORDER BY temp.cdtWeight ASC LIMIT 0,1 
	 [params: {"teamid":false,"duration":4}]
2024/10/24 00:04:22 [profile] [profile.module.admin.controller.booking.create] [T: 3052.371] [M: 39267.66] [ET: 0.456/3034.199] [MU: 1.08/39267.28] 
	SQL: SELECT
					COUNT(DISTINCT scq_assigned_uid)
					FROM  service_call_queue
					WHERE  scq_follow_up_queue_type = :refType AND scq_active=1  AND scq_status IN (1,3) AND scq_follow_up_date_time > DATE_SUB(NOW(),INTERVAL :duration HOUR) 
	 [params: {"refType":7,"duration":4}]
2024/10/24 00:04:22 [profile] [profile.module.admin.controller.booking.create] [T: 3052.779] [M: 39269] [ET: 0.311/3034.607] [MU: 0.93/39268.69] 
	SQL: select bkg_id FROM booking bkg INNER JOIN booking_trail bkgTrail ON bkgTrail.btr_bkg_id = bkg.bkg_id WHERE 1
 			    AND bkgTrail.bkg_tags IS NOT NULL AND CONCAT(',', bkg_tags , ',') REGEXP ',(3),'  AND bkg.bkg_id = 7 
	 [params: []]
2024/10/24 00:04:22 [profile] [profile.module.admin.controller.booking.create] [T: 3053.126] [M: 39270.55] [ET: 0.287/3034.957] [MU: 0.93/39270.23] 
	SQL: select bkg_id FROM booking bkg INNER JOIN booking_trail bkgTrail ON bkgTrail.btr_bkg_id = bkg.bkg_id WHERE 1
 			    AND bkgTrail.bkg_tags IS NOT NULL AND CONCAT(',', bkg_tags , ',') REGEXP ',(2),'  AND bkg.bkg_id = 7 
	 [params: []]
2024/10/24 00:04:22 [profile] [profile.module.admin.controller.booking.create] [T: 3060.471] [M: 39299.45] [ET: 0.453/3042.281] [MU: 0.99/39299.14] 
	SQL: SELECT GROUP_CONCAT(tqm.tqm_tea_id) teamIds FROM `service_call_queue` scq
			INNER JOIN team_queue_mapping tqm ON
			tqm.tqm_queue_id=scq.scq_follow_up_queue_type
			AND tqm.tqm_active = 1
			WHERE `scq_id` = :scqId 
	 [params: {"scqId":"5"}]
2024/10/24 00:04:22 [profile] [profile.module.admin.controller.booking.create] [T: 3061.013] [M: 39301.06] [ET: 0.445/3042.838] [MU: 0.99/39300.75] 
	SQL: SELECT GROUP_CONCAT(tqm.tqm_tea_id) teamIds FROM `service_call_queue` scq
			INNER JOIN team_queue_mapping tqm ON
			tqm.tqm_queue_id=scq.scq_follow_up_queue_type
			AND tqm.tqm_active = 1
			WHERE `scq_id` = :scqId 
	 [params: {"scqId":"5"}]
2024/10/24 00:04:22 [profile] [profile.module.admin.controller.booking.create] [T: 3061.392] [M: 39303.63] [ET: 0.304/3043.221] [MU: 1.64/39303.13] 
	SQL: SELECT COUNT(DISTINCT scq_assigned_uid) countCSR, COUNT(DISTINCT scq_id) countClosedCalls
				FROM  service_call_queue
				WHERE  scq_to_be_followed_up_by_id = :teamId 
					AND	scq_to_be_followed_up_by_type=1 
					AND scq_active=1 AND scq_status IN (2) 
					AND scq_follow_up_date_time > DATE_SUB(NOW(),INTERVAL :duration HOUR) 
	 [params: {"teamId":null,"duration":1}]
